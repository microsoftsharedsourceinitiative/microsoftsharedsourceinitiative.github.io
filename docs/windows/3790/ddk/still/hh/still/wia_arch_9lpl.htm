<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Device Communication through the Bus Driver</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Device Communication through the Bus Driver">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Still&nbsp;Image&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_device_communication_through_the_bus_driver_si"></A>Device Communication through the Bus Driver</H2>

<P>The primary responsibility of the WIA minidriver is to communicate with the device. When a WIA application makes a call to the WIA service, that request is forwarded to the WIA minidriver’s interface through the <B>IStiUSD</B> or <B>IWiaMiniDrv</B> interface. In some cases, the WIA minidriver must query the physical device or perform some other action on the device. The minidriver's device communication layer is responsible for translating the request from the WIA service into a request that the device can understand, and then sending the request to the device through the bus driver stack. Similarly, when the device sends its response back up the bus driver stack, this layer is responsible for translating the response from a device into a response that the WIA service understands.</P>

<P>All communication with the bus driver stack is performed using calls to the <B>CreateFile</B>, <B>ReadFile</B>, <B>WriteFile</B>, and<B> DeviceIoControl</B> functions, which are described in the Platform SDK documentation. For more information about communicating with the bus driver stack, see <A HREF="wia_drv_basic_6pex.htm">Accessing Kernel-Mode Drivers for Still Image Devices</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Device%20Communication%20through%20the%20Bus%20Driver"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
