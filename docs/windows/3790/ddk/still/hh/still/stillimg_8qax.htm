<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>INF Files for Still Image Devices</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="INF Files for Still Image Devices">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_ddinstall_section_dr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_delfiles_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_delreg_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_wfp_gg_gly">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_copyfiles_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_ddinstall_section_dr">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_ddinstall.services_section_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Still&nbsp;Image&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_inf_files_for_still_image_devices_si"></A>INF Files for Still Image Devices</H2>

<P>The default class installer for still image devices, <I>sti_ci.dll</I>, recognizes a special set of .<I>inf</I> file entries. Within an .<I>inf</I> file, these entries must be placed within a device's <A HREF="JavaScript:hhobj_1.Click()">INF <I>DDInstall</I> section</A>. The entries are described in the following table.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=14%>INF File<BR>
Entry</TH>
<TH align=left width=59%>Value</TH>
<TH align=left width=27%>Comments</TH>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>SubClass</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%><B>StillImage</B></TD>
<TD width=27%>Required</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>DeviceType</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%><B>1</B> for scanners, <B>2</B> for cameras, <B>3</B> for Video devices</TD>
<TD width=27%>Required</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>DeviceSubType</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Vendor-defined value.</TD>
<TD width=27%>Optional</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>Connection</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>For non-PnP devices connected to serial or parallel ports, this can be <B>Serial</B> or <B>Parallel</B> to limit the user's choice of ports during installation.</TD>
<TD width=27%>Optional. If not specified, the user can select any serial or parallel port.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>Capabilities</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Specifies a number that is converted to bit flags identifying device capabilities. These flags are stored in the registry and are available to Microsoft STI components by means of the <A HREF="stifnc_6ht5.htm">STI_DEV_CAPS</A> structure.
<P>Bit 0 – Sets/clears STI_GENCAP_NOTIFICATIONS in STI_DEV_CAPS.</P>

<P>Bit 1 – Sets/clears STI_GENCAP_POLLING_NEEDED in STI_DEV_CAPS.</P>

<P>Bit 2 – Sets/clears STI_GENCAP_GENERATE_ARRIVALEVENT in STI_DEV_CAPS.</P>

<P>Bit 3 – Sets/clears STI_GENCAP_AUTO_PORTSELECT in STI_DEV_CAPS.</P>
</TD>
<TD width=27%>Optional</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>PropertyPages</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Identifies the name and entry point of a DLL that creates customized <A HREF="stillimg_7gvd.htm">property sheet pages for still image devices</A>.
<P>The following example identifies the DLL, <I>estp2cpl.dll</I>, as well as the <B>EnumStiPropPages</B> entry point in this DLL. The entry point name is optional; if omitted, the entry point defaults to <B>EnumStiPropPages</B>.</P>

<PRE>PropertyPages = estp2cpl.dll, EnumStiPropPages</PRE>
</TD>
<TD width=27%>Optional</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>DeviceData</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Identifies a vendor-supplied data section containing information to be stored in the registry, under the <B>DeviceData</B> key. For TWAIN-supported devices, the data section must contain a <B>TwainDS</B> entry (see <A HREF="stillimg_8pih.htm#ddk_vendor_modifiable_registry_values_si">Vendor-Modifiable Registry Values</A>).</TD>
<TD width=27%>Optional. This entry is required for <A HREF="stillimg_4x49.htm">push-model aware applications</A>, however.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>Events</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Identifies a vendor-supplied data section listing still image device events. Each entry in this section must have the following format:
<P><I>EventName</I><B>="</B><I>String</I><B>",{</B><I>GUID</I><B>},</B>App</P>

<P><I>EventName</I> is the event's internal name, <I>String</I> is the event's display string, <I>GUID</I> is the event's GUID (see <A HREF="stillimg_34ix.htm">Still Image Device Events</A>), and <I>App</I> specifies the imaging application to be launched when the event occurs. To launch the currently registered application, use an asterisk (<B>*</B>) for <I>App</I>.</P>
</TD>
<TD width=27%>Optional. This entry is required for <A HREF="stillimg_4x49.htm">push-model aware applications</A>, however.</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=100%><B>UninstallSection</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>&nbsp;</TD>
<TD width=59%>Points to an INF section typically containing <A HREF="JavaScript:hhobj_2.Click()">INF <B>DelFiles</B> directives</A> and <A HREF="JavaScript:hhobj_3.Click()">INF <B>DelReg</B> directives</A>. An entry in this section has the following format:
<P><B>UninstallSection</B><I>=UninstallSectionName</I></P>

<P><I>UninstallSectionName</I> is the name of the section containing <B>Delfiles</B> or <B>DelReg</B> directives. Note that Windows File Protection (<A HREF="JavaScript:hhobj_4.Click()">WFP</A>) might prohibit a user from deleting some files, even though they are specified using <B>DelFiles</B> directives.</P>
</TD>
<TD width=27%>Optional. This entry is valid only for Windows 2000.</TD>
</TR>
</TABLE><BR>

<P>The default class installer for still image devices supports the standard <A HREF="JavaScript:hhobj_5.Click()">INF CopyFiles directive</A>. The installer uses an internal reference counter for component files, so files shared by several devices are not removed prematurely during an uninstall operation.</P>

<P>The default .<I>inf</I> file for still image devices, <I>sti.inf</I>, defines two installation sections for each device type, as follows:

<UL>
	<LI>An <A HREF="JavaScript:hhobj_6.Click()">INF <I>DDInstall</I> section</A>, which must be referenced within the <I>DDInstall</I> section of the vendor-supplied .<I>inf</I> file, as shown in the following table.</LI>
</UL>

<TABLE>

<TR VALIGN="top">
<TH align=left width=34%>For USB devices</TH>
<TH align=left width=35%>For SCSI devices</TH>
<TH align=left width=31%>For serial devices</TH>
</TR>

<TR VALIGN="top">
<TD width=34%>
<PRE>Include=sti.inf
Needs=STI.USBSection</PRE>
</TD>
<TD width=35%>
<PRE>Include=sti.inf
Needs=STI.SCSISection</PRE>
</TD>
<TD width=31%>
<PRE>Include=sti.inf
Needs=STI.SerialSection</PRE>
</TD>
</TR>
</TABLE><BR>

<UL>
	<LI>An <A HREF="JavaScript:hhobj_7.Click()">INF <I>DDInstall</I>.<B>Services</B> section</A>, which must be referenced within the <I>DDInstall</I>.<B>Services</B> section of the vendor-supplied .<I>inf</I> file, as shown in the following table.</LI>
</UL>

<TABLE>

<TR VALIGN="top">
<TH align=left width=31%>For USB devices</TH>
<TH align=left width=33%>For SCSI devices</TH>
<TH align=left width=36%>For serial devices</TH>
</TR>

<TR VALIGN="top">
<TD width=31%>
<PRE>Include=sti.inf
Needs=STI.USBSection.Services</PRE>
</TD>
<TD width=33%>
<PRE>Include=sti.inf
Needs=STI.SCSISection.Services</PRE>
</TD>
<TD width=36%>
<PRE>Include=sti.inf
Needs=STI.SerialSection.Services</PRE>
</TD>
</TR>
</TABLE><BR>

<P>If you are also <A HREF="stillimg_3ort.htm">creating device-specific components for image acquisition APIs</A>, you will typically include the filenames for these components in the .<I>inf</I> file . For additional guidance in creating .<I>inf</I> files for still image devices, you can look at any .<I>inf</I> file provided with Windows&nbsp;2000 or later that contains the entry "Subclass=StillImage".</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: INF%20Files%20for%20Still%20Image%20Devices"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
