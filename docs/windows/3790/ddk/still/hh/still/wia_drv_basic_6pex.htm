<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Accessing Kernel-Mode Drivers for Still Image Devices</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Accessing Kernel-Mode Drivers for Still Image Devices">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Still&nbsp;Image&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_accessing_kernel_mode_drivers_for_still_image_devices_si"></A>Accessing Kernel-Mode Drivers for Still Image Devices</H2>

<P>Microsoft provides WDM-based kernel-mode drivers to support still image devices connected to SCSI and USB buses. Both drivers support Plug and Play devices and provide services for adding, removing, starting, stopping, and creating registry entries for Plug and Play devices. Additionally, both drivers provide suspend and resume operations for devices that support power management.</P>

<P>User-mode still image minidrivers can access these kernel-mode drivers by calling <B>CreateFile</B>, <B>ReadFile</B>, <B>WriteFile</B>, and <B>DeviceIoControl</B> (described in the Platform SDK documentation). <B>ReadFile</B> and <B>WriteFile</B> are used for block data transfers. Specifically, <B>ReadFile</B> is called to obtain image data, and <B>WriteFile</B> is used for sending commands to devices that accept commands as data streams.</P>

<P>Before calling <B>ReadFile</B>, <B>Writefile</B> or <B>DeviceIoControl</B>, the minidriver must call <A HREF="stifnc_9oa1.htm"><B>IStiDeviceControl::GetMyDevicePortName</B></A> to obtain the device's port name and then use that port name as a parameter to <B>CreateFile</B>.</P>

<P class=indent1><A HREF="wia_drv_basic_2yeh.htm">SCSI Driver</A></P>

<P class=indent1><A HREF="wia_drv_basic_4d9l.htm">USB Driver</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Accessing%20Kernel-Mode%20Drivers%20for%20Still%20Image%20Devices"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
