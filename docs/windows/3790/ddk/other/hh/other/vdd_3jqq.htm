<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Double-Buffer DMA Transfer</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Double-Buffer DMA Transfer">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Other&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_double_buffer_dma_transfer"></A>Double-Buffer DMA Transfer</H3>

<P>In the double-buffer strategy, the VDD calls <B>VDDRequestDMA</B> to move the data as described by the last DMA request. The <B>VDDRequestDMA</B> function looks at the last DMA command trapped by the VDM and executes a data transfer that matches those DMA parameters, although the transfer does not actually use DMA. When the DMA transfer request specifies that data be moved from an application buffer to the device, the data actually goes from the application buffer to a block of memory the VDD has mapped to the virtual address space occupied by the board. When the data has been transferred to the VDD’s buffer, the VDD can then transfer it to the device by passing the data to the kernel-mode device driver. Likewise, when the DMA transfer is requesting data be moved from the device to an application buffer, the VDD first calls the kernel-mode driver to copy the data from the device to the VDD’s buffer. The VDD can then transfer the data from its buffer to the application’s buffer by calling <B>VDDRequestDMA</B>, as shown in the following figure.</P>

<P><B><IMG SRC="images/401-04.gif" ALT="" BORDER=0></B></P>

<P><B>Two-stage virtual DMA transfer</B></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Double-Buffer%20DMA%20Transfer"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
