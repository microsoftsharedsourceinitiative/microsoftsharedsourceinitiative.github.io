<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Interface Between BaseVDD/MiniVDD/Display Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_nec98mm_interface_between_basevdd_minivdd_display_drivers"></A>Interface Between BaseVDD/MiniVDD/Display Drivers</H1>

<P>The following table indicates the functions that must be supported by each display driver/miniVDD for the primary and secondary display adapters or usable services.</P>

<P><B>MiniVDD Functions</B></P>

<P><B>baseVDD —&gt; miniVDD</B></P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=6%>No.</TH>
<TH align=left width=37%>Function</TH>
<TH align=left width=23%>&nbsp;</TH>
<TH align=left width=6%>Pri</TH>
<TH align=left width=8%>Sec</TH>
<TH align=left width=20%>Notes</TH>
</TR>

<TR VALIGN="top">
<TD width=6%>1</TD>
<TD width=37%><B>REGISTER_DISPLAY_DRIVER</B></TD>
<TD width=23%>Interface between miniVDD and driver</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>2</TD>
<TD width=37%><B>PRE_HIRES_TO_VGA</B></TD>
<TD width=23%>Switch to core graph</TD>
<TD width=6%>1</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>3</TD>
<TD width=37%><B>SAVE_REGISTERS</B></TD>
<TD width=23%>Save registers</TD>
<TD width=6%>2</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>4</TD>
<TD width=37%><B>RESTORE_REGISTERS</B></TD>
<TD width=23%>Restore registers</TD>
<TD width=6%>2</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>5</TD>
<TD width=37%><B>ENABLE_TRAPS</B> </TD>
<TD width=23%>Enable I/O traps</TD>
<TD width=6%>2</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>6</TD>
<TD width=37%><B>DISABLE_TRAPS</B> </TD>
<TD width=23%>Disable I/O traps</TD>
<TD width=6%>2</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>7</TD>
<TD width=37%><B>DISPLAY_DRIVER_DISABLING</B></TD>
<TD width=23%>Disable display</TD>
<TD width=6%>1</TD>
<TD width=8%>1</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>8</TD>
<TD width=37%><B>ENABLE_ACCELERATER</B></TD>
<TD width=23%>Enable display</TD>
<TD width=6%>1</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>9</TD>
<TD width=37%><B>DISABLE_ACCELERATER</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>3</TD>
<TD width=8%>3</TD>
<TD width=20%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>10</TD>
<TD width=37%><B>CHECK_UPDATE</B> </TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>3</TD>
<TD width=8%>3</TD>
<TD width=20%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>11</TD>
<TD width=37%><B>CHECK_WINDOWED</B> </TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>3</TD>
<TD width=8%>3</TD>
<TD width=20%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>12</TD>
<TD width=37%><B>ACC_VBE_PM</B></TD>
<TD width=23%>VBE/PM </TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>13</TD>
<TD width=37%><B>ACC_VBE_DDC</B></TD>
<TD width=23%>VBE/DDC </TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>14</TD>
<TD width=37%><B>ACC_INT_10</B></TD>
<TD width=23%>ESA BIOS (VGA BIOS) </TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>15</TD>
<TD width=37%><B>ACC_GET_CAPABILITIES</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>16</TD>
<TD width=37%><B>ACC_GET_EXT_MODE_INFO</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>17</TD>
<TD width=37%><B>ACC_GET_FLAT_SELECTOR</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>18</TD>
<TD width=37%><B>ACC_ENABLE_BIOS</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>19</TD>
<TD width=37%><B>ACC_DISABLE_BIOS</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>20</TD>
<TD width=37%><B>ACC_SET_PALETTE</B></TD>
<TD width=23%>Accelerator BIOS </TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>21</TD>
<TD width=37%><B>ACC_GET_PALETTE</B></TD>
<TD width=23%>Accelerator BIOS </TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>22</TD>
<TD width=37%><B>ACC_SET_CURSOR</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>23</TD>
<TD width=37%><B>ACC_SHOW_CURSOR</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>24</TD>
<TD width=37%><B>ACC_HIDE_CURSOR</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>26</TD>
<TD width=37%><B>ACC_GET_CURSOR_POS</B></TD>
<TD width=23%>Accelerator BIOS</TD>
<TD width=6%>4</TD>
<TD width=8%>3</TD>
<TD width=20%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>27</TD>
<TD width=37%><B>GET_NUM_UNITS</B></TD>
<TD width=23%>Obtain # of monitor units available for connection</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature<BR>
(not yet supported)</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>28</TD>
<TD width=37%><B>SET_ADAPTER_POWER_STATE</B> </TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature<BR>
(not yet supported)</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>29</TD>
<TD width=37%><B>GET_ADAPTER_POWER_<BR>
STATE_CAPS</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>30</TD>
<TD width=37%><B>SET_MONITOR_POWER_STATE</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>31</TD>
<TD width=37%><B>GET_MONITOR_POWER_<BR>
STATE_CAPS</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>32</TD>
<TD width=37%><B>ET_MONITOR_INFO</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>33</TD>
<TD width=37%><B>I2C_OPEN</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>34</TD>
<TD width=37%><B>I2C_ACCESS</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>35</TD>
<TD width=37%><B>GPIO_OPEN</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>36</TD>
<TD width=37%><B>GPIO_ACCESS</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>37</TD>
<TD width=37%><B>COPYPROTECTION_ACCESS</B></TD>
<TD width=23%>&nbsp;</TD>
<TD width=6%>2</TD>
<TD width=8%>2</TD>
<TD width=20%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD colspan=6 width=100%>1: Support is necessary<BR>
2: Support may be necessary<BR>
3: Support is unnecessary (not in use)<BR>
4: Necessary for accelerator BOS support (this function may not be supported in the future)</TD>
</TR>
</TABLE><BR>

<P><B>Protected Mode API Functions</B></P>

<P>Display driver (Windows kernel) —&gt; baseVDD </P>

<P>The following miniVDD related protected mode API call interface will be changed partially. </P>

<P>Display drivers to be created in the future must follow these guidelines.</P>

<P>Multimonitor support does not function — even if a candidate for the secondary display adapter exists — if a display driver that does not meet the following calling guidelines is set as the primary, nor can it be used as a secondary. </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=6%>No</TH>
<TH align=left width=37%>Function</TH>
<TH align=left width=26%>&nbsp;</TH>
<TH align=left width=7%>Pri</TH>
<TH align=left width=8%>Sec</TH>
<TH align=left width=16%>Notes</TH>
</TR>

<TR VALIGN="top">
<TD width=6%>1</TD>
<TD width=37%><B>VDD_DRIVER_REGISTER</B></TD>
<TD width=26%>register VDD driver</TD>
<TD width=7%>1</TD>
<TD width=8%>1</TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>2</TD>
<TD width=37%><B>VDD_DRIVER_UNREGISTER </B></TD>
<TD width=26%>unregister VDD driver</TD>
<TD width=7%>1</TD>
<TD width=8%>1</TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>3</TD>
<TD width=37%><B>VDD_SAVE_DRIVER_STATE </B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>4</TD>
<TD width=37%><B>VDD_REGISTER_DISPLAY_<BR>
DRIVER_INFO</B></TD>
<TD width=26%>interface between miniVDD and driver</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>5</TD>
<TD width=37%><B>VDD_REGISTER_SSB_FLAGS</B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>6</TD>
<TD width=37%><B>VDD_GET_DISPLAY_CONFIG</B></TD>
<TD width=26%>Obtain display settings</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>7</TD>
<TD width=37%><B>VDD_PRE_MODE_CHANGE</B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>8</TD>
<TD width=37%><B>VDD_POST_MODE_CHANGE</B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>9</TD>
<TD width=37%><B>VDD_SET_USER_FLAGS</B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>10</TD>
<TD width=37%><B>VDD_SET_BUSY_FLAG_ADDR</B></TD>
<TD width=26%>&nbsp;</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>Not Used</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>11</TD>
<TD width=37%><B>VDD_VBE_PM</B></TD>
<TD width=26%>power management 
<P>(—&gt; ACC_VBE_PM) </P>
</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>12</TD>
<TD width=37%><B>VDD_ENABLE</B></TD>
<TD width=26%>resource control</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>13</TD>
<TD width=37%><B>VDD_GETMEMBASE</B></TD>
<TD width=26%>obtain memory address</TD>
<TD width=7%>3</TD>
<TD width=8%>3</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>14</TD>
<TD width=37%><B>VDD_OPEN</B></TD>
<TD width=26%>open device</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>15</TD>
<TD width=37%><B>VDD_CLOSE</B></TD>
<TD width=26%>close device</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>16</TD>
<TD width=37%><B>VDD_OPEN_KEY</B></TD>
<TD width=26%>open settings key</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>17</TD>
<TD width=37%><B>VDD_SET_POWER_STATE</B></TD>
<TD width=26%>power management
<P>(—&gt; ACC_VBE_PM)</P>
</TD>
<TD width=7%>2</TD>
<TD width=8%>2</TD>
<TD width=16%>New Feature</TD>
</TR>

<TR VALIGN="top">
<TD colspan=6 width=100%>1: Support is necessary<BR>
2: Can be used<BR>
3: Cannot be used</TD>
</TR>
</TABLE><BR>

<P><B>VDD Service Functions</B></P>

<P>miniVDD —&gt; baseVDD</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=6%>No</TH>
<TH align=left width=36%>Function</TH>
<TH align=left width=27%>Pri</TH>
<TH align=left width=9%>Sec</TH>
<TH align=left width=9%>Notes</TH>
<TH align=left width=13%>Notes</TH>
</TR>

<TR VALIGN="top">
<TD width=6%>1</TD>
<TD width=36%><B>VDD_Get_Special_VM_IDs</B></TD>
<TD width=27%>Obtain Message VM ID </TD>
<TD width=9%>1</TD>
<TD width=9%>1</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>2</TD>
<TD width=36%><B>VDD_Register_Mini_VDD</B></TD>
<TD width=27%>Register miniVDD </TD>
<TD width=9%>1</TD>
<TD width=9%>1</TD>
<TD width=13%>Modified</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>3</TD>
<TD width=36%><B>VDD_Install_IO_Handler</B></TD>
<TD width=27%>I/O trap </TD>
<TD width=9%>3</TD>
<TD width=9%>&nbsp;</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>4</TD>
<TD width=36%><B>VDD_Install_Mult_IO_Handlers</B></TD>
<TD width=27%>I/O trap </TD>
<TD width=9%>3</TD>
<TD width=9%>&nbsp;</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>5</TD>
<TD width=36%><B>VDD_Enable_Local_Trapping</B></TD>
<TD width=27%>I/O trap </TD>
<TD width=9%>3</TD>
<TD width=9%>&nbsp;</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>6</TD>
<TD width=36%><B>VDD_Disable_Local_Trapping</B></TD>
<TD width=27%>I/O trap </TD>
<TD width=9%>3</TD>
<TD width=9%>&nbsp;</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>7</TD>
<TD width=36%><B>Test_Vid_VM_Handle</B></TD>
<TD width=27%>Display owner VM check </TD>
<TD width=9%>1</TD>
<TD width=9%>1</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>8</TD>
<TD width=36%><B>VDD_Trap_Suspend</B></TD>
<TD width=27%>Interrupt process </TD>
<TD width=9%>1</TD>
<TD width=9%>1</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=6%>9</TD>
<TD width=36%><B>VDD_Map_VRAM</B></TD>
<TD width=27%>Accelerator BIOS</TD>
<TD width=9%>3</TD>
<TD width=9%>2</TD>
<TD width=13%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD colspan=6 width=100%>1: Can be used<BR>
2: Cannot be used<BR>
3: Cannot be used due to possible discontinuation of support in the future (supported in Windows 98 for compatibility with current drivers)</TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Interface%20Between%20BaseVDD%2FMiniVDD%2FDisplay%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
