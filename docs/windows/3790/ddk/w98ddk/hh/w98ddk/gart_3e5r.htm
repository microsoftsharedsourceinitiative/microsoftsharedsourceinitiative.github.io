<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>PCIGetHandleInfo</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="PCIGetHandleInfo">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_gart_pcigethandleinfo"></A>PCIGetHandleInfo</H1>

<P>Given a PCIMP device handle (passed to every PCIMP function), <B>PCIGetHandleInfo</B> retrieves both the PCI bus number and the device function number associated with this miniport device. These values can then be passed to <A HREF="gart_6087.htm"><B>PCIReadConfig</B></A> and <A HREF="gart_0gmf.htm"><B>PCIWriteConfig</B></A> to read and write associated configuration information.</P>

<PRE class=syntax><B>VOID
  PCIGetHandleInfo(
</B>    <B>PVOID </B> <I>pHandle</I><B>,</B> 
    <B>PULONG </B> <I>pulBus</I><B>,</B> 
    <B>PULONG </B> <I>pulDevFunc</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>pHandle</I></DT>

<DD>PCIMP device handle.</DD>

<DT><I>pulBus</I></DT>

<DD>Pointer to a ULONG where this function writes the bus number.</DD>

<DT><I>pulDevFunc</I></DT>

<DD>Pointer to a ULONG where this function writes the device/function number.</DD>
</DL>

<H4>Return Values</H4>

<P>This function has no return value.</P>

<H4>Comments</H4>

<P>Because they may change, the miniport should not save the bus and device/function numbers across GART miniport services. The miniport need only call <A HREF="#_gart_pcigethandleinfo"><B>PCIGetHandleInfo</B></A><B> </B>at the beginning of functions that call <A HREF="gart_6087.htm"><B>PCIReadConfig</B></A> and/or <A HREF="gart_0gmf.htm"><B>PCIWriteConfig</B></A>.</P>

<P>The device/function number, although passed as a ULONG to preserve the stack alignment, contains only one byte of information, in the least significant part of the ULONG. The lowest three bits are the function number and the upper five bits are the device number. It is not likely that a GART miniport will need to use these values separately.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: PCIGetHandleInfo"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
