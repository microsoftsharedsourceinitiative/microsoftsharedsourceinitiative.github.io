<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Data Transfer Using Waveform Device Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_2286"></A>Data Transfer Using Waveform Device Drivers</H3>

<P class=proch><B><IMG SRC="../images/wedge.gif" ALT="" BORDER=0>The following sequence of operations occurs when transferring audio data between a client application and a waveform-output device driver: </B>

<OL>
	<LI>The client allocates the memory for the data block. </LI>

	<LI>The client requests that the driver prepare the data block. </LI>

	<LI>The client sends the data block to the driver. </LI>

	<LI>The driver puts the data block in its output queue. </LI>

	<LI>The client can send additional data blocks, which the driver also puts in its output queue. </LI>

	<LI>When the driver has sent a data block from its output queue to its output device, it returns the data block to the client by sending the client a message. </LI>

	<LI>The client requests that the driver clean up the preparation previously done on the data block. </LI>

	<LI>The client then frees the memory for the data block. </LI>
</OL>

<P>In addition, the driver must transfer the data it receives from the client to the waveform hardware. This transfer takes place in the background, as an interrupt-driven process. The driver can transfer data directly, or it can use the computer's DMA controller to transfer the data. Whether you choose to transfer data directly or use DMA depends on the capabilities of your target hardware. </P>

<P>For input devices, the model is similar, except the client sends the driver an empty buffer. The buffer is directly filled with audio data by the driver or with DMA. The driver notifies the client when the buffer is filled. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Data%20Transfer%20Using%20Waveform%20Device%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
