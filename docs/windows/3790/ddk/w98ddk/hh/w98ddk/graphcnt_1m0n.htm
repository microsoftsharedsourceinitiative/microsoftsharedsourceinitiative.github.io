<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DRAWMODE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_787"></A>DRAWMODE</H1>

<PRE>typedef struct tagDRAWMODE {
  short    Rop2;           // see below
  short    bkMode;         // see below
  unsigned long  bkColor;        // see below
  unsigned long  TextColor;      // see below
  short    TBreakExtra;    // see below
  short    BreakExtra;     // see below
  short    BreakErr;       // see below
  short    BreakRem;       // see below
  short    BreakCount;     // see below
  short    CharExtra;      // see below
  unsigned long  LbkColor;       // see below
  unsigned long  LTextColor;     // see below
  DWORD    ICMCXform;      // see below
  short    StretchBltMode; // see below
  DWORD    eMiterLimit;    // see below
} DRAWMODE;
 </PRE>

<P>Contains information used to draw lines, fill interiors, and write text. 

<DL>
<DT><B>Rop2</B> </DT>

<DD>Binary-raster operation value. The value, in the range of 1 to 16, determines how to combine source and destination colors. Can be one of these values: 

<TABLE>

<TR VALIGN="top">
<TD width=28%>R2_BLACK (1) </TD>
<TD width=72%>Black: zero. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOTMERGEPEN (2) </TD>
<TD width=72%>Inverse of the bitwise OR of the source and destination colors: NOT (Source OR Dest). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MASKNOTPEN (3) </TD>
<TD width=72%>Bitwise AND of the destination and the inverse of the source: Dest AND (NOT Source). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOTCOPYPEN (4) </TD>
<TD width=72%>Inverse of the source color: NOT Source. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MASKPENNOT (5) </TD>
<TD width=72%>Bitwise AND of the source and the inverse of the destination: Source AND (NOT Dest). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOT (6) </TD>
<TD width=72%>Inverse of the destination color: NOT Dest. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_XORPEN (7) </TD>
<TD width=72%>Bitwise exclusive OR of the destination and source: Dest XOR Source. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOTMASKPEN (8) </TD>
<TD width=72%>Inverse of the bitwise AND of the destination and source colors: NOT (Dest AND Source). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MASKPEN 9 </TD>
<TD width=72%>Bitwise AND of the destination and source colors: Dest AND Source. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOTXORPEN (10) </TD>
<TD width=72%>Inverse of the bitwise exclusive OR of the destination and source colors: NOT (Dest XOR Source). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_NOP 11 </TD>
<TD width=72%>Destination color: Dest. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MERGENOTPEN (12) </TD>
<TD width=72%>Bitwise OR of the destination and the inverse of the source: Dest AND (NOT Source). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_COPYPEN (13) </TD>
<TD width=72%>Source color: Source. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MERGEPENNOT (14) </TD>
<TD width=72%>Bitwise OR of the source and the inverse of the destination: Source OR (NOT Dest). </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_MERGEPEN (15) </TD>
<TD width=72%>Bitwise OR of the source and the destination: Source OR Dest. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>R2_WHITE (16) </TD>
<TD width=72%>White: 1. </TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>bkMode</B> </DT>

<DD>Background mode for styled lines, hatched brushes, brushes used for interiors and scan lines, bitmaps, and text. This member can be one of the following values: 

<TABLE>

<TR VALIGN="top">
<TD width=34%>BKMODE_TRANSPARENT (1) Also defined as TRANSPARENT </TD>
<TD width=66%>Leaves destination background unchanged. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>BKMODE_OPAQUE (2) Also defined as OPAQUE </TD>
<TD width=66%>Replaces destination background with the color specified by the <B>bkColor</B> member. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>BKMODE_LEVEL1 (3) </TD>
<TD width=66%>Use Level 1 transparent anti-aliasing. A 1 in the glyph bitmap means that the display driver should blend the color specified in the <B>TextColor</B> member with the current pixel's color. Level 1 is a 25% blend. The blend should be done on the brightness, not the RGB values, and so it must be gamma-corrected. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>BKMODE_LEVEL2 (4) </TD>
<TD width=66%>Use Level 2 transparent anti-aliasing. A 1 in the glyph bitmap means that the display driver should blend the color specified in the <B>TextColor</B> member with the current pixel's color. Level 2 is a 50% blend. The blend should be done on the brightness, not the RGB values, and so it must be gamma-corrected. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>BKMODE_LEVEL3 (5) </TD>
<TD width=66%>Use Level 3 transparent anti-aliasing. A 1 in the glyph bitmap means that the display driver should blend the color specified in the <B>TextColor</B> member with the current pixel's color. Level 3 is a 75% blend. The blend should be done on the brightness, not the RGB values, and so it must be gamma-corrected. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>BKMODE_TRANSLATE (6) </TD>
<TD width=66%>For 8 bpp palettized surfaces only. The <B>TextColor</B> member is a far pointer to a byte array that is used to translate the existing pixel to a new pixel value. Use the current pixel byte as an index into the table to get the pixel's new value. </TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>bkColor</B> </DT>

<DD>Physical color value that specifies the background color. </DD>

<DT><B>TextColor</B> </DT>

<DD>Physical color value that specifies the text (foreground) color. </DD>

<DT><B>TBreakExtra</B> </DT>

<DD>Total amount of space, in pixels, to add to the break characters in a line of text. <B>TBreakExtra</B> is set to zero if no justification is required. </DD>

<DT><B>BreakExtra</B> </DT>

<DD>Amount of space, in pixels, to add to each break character in a line of text. This value is equal to <B>TBreakExtra</B> divided by <B>BreakCount</B>. </DD>

<DT><B>BreakErr</B> </DT>

<DD>Running error term: the amount of space, in pixels, not yet added to break characters in a line of text. This member is used in conjunction with the <B>BreakRem</B> member to determine which break characters receive the additional pixels specified by <B>BreakRem</B>. Initially, <B>BreakErr</B> is set to (<B>BreakCount</B>/2)+1. </DD>

<DT><B>BreakRem</B> </DT>

<DD>Amount of space, in pixels, to add to one or more break characters in a line of text. This space is in addition to any extra space specified by the <B>BreakExtra</B> member and is intended to be distributed evenly across the line. The <B>BreakRem</B> value is equal to the remainder after dividing <B>TBreakExtra</B> by <B>BreakCount</B>. </DD>

<DT><B>BreakCount</B> </DT>

<DD>Number of break characters in a line of text. If the <B>TBreakExtra</B> member is not zero, each break character must be drawn wider than its normal width. The <B>BreakExtra</B> member specifies the extra width, in pixels,. The <B>BreakRem</B> member may also specify additional pixels for one or more break characters. </DD>

<DT><B>CharExtra</B> </DT>

<DD>Amount of space, in pixels, to add between characters in a line of text. </DD>

<DT><B>LbkColor</B> </DT>

<DD>A <B>COLORREF</B> value that specifies the logical background color. </DD>

<DT><B>LTextColor</B> </DT>

<DD>A <B>COLORREF</B> value that specifies the logical text (foreground) color. </DD>

<DT><B>ICMCXform</B> </DT>

<DD>Transformation for image color matching. A color transform links an input color space to the device output color space. This field is used by drivers whenever a DIB is to be processed from GDI to the device, as in <B>SetDIBitsToDevice</B>, <B>SetDIBits</B>, and any other similar DIB function calls. </DD>

<DT><B>StretchBltMode</B> </DT>

<DD>StretchBlt mode value. Can be one of the following values: 

<TABLE>

<TR VALIGN="top">
<TH align=left width=34%>Value </TH>
<TH align=left width=66%>Meaning </TH>
</TR>

<TR VALIGN="top">
<TD width=34%>STRETCH_ANDSCANS (1) </TD>
<TD width=66%>Uses the AND operator to combine eliminated lines with the remaining lines. This mode preserves black pixels at the expense of colored or white pixels. It is the default mode. Also defined as SBM_BLACKONWHITE. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>STRETCH_ORSCANS (2) </TD>
<TD width=66%>Uses the OR operator to combine eliminated lines with the remaining lines. This mode preserves colored or white pixels at the expense of black pixels. Also defined as SBM_WHITEONBLACK. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>STRETCH_DELETESCANS (3) </TD>
<TD width=66%>Deletes the eliminated lines. Information in the eliminated lines is not preserved. Also defined as SBM_COLORONCOLOR. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>STRETCH_HALFTONE (4) </TD>
<TD width=66%>Maps pixels from the source rectangle into blocks of pixels in the destination rectangle. The average color over the destination block of pixels approximates the color of the source pixels. Also defined as SBM_HALFTONE. </TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>eMiterLimit</B> </DT>

<DD>Miter limit value. The miter length is defined as the distance from the intersection of the line walls on the inside of the join to the intersection of the line walls on the outside of the join. The miter limit is the maximum allowed ratio of the miter length to the line width. </DD>
</DL>

<H4>See Also</H4>

<P><B>Output</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DRAWMODE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
