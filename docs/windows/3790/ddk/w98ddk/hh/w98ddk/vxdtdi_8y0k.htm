<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>TDI_EVENT_DISCONNECT</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="TDI_EVENT_DISCONNECT">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_vxdtdi_tdi_event_disconnect"></A>TDI_EVENT_DISCONNECT</H1>

<P>The <B>TDI_EVENT_DISCONNECT</B> event handler is called when a connection is disconnecting, either gracefully or abortively. If the connection is gracefully closing, the called client must issue a graceful <B>TdiDisconnect</B> to complete the disconnection, if it has not already done so. If the connection is abortively closing, the connection is gone at the time the event handler is called and the client need take no further action. An abortive disconnect may occur because an RST was received or because of a time-out.</P>

<PRE class=syntax><B>TDI_STATUS
  DisconnectEvent(
    PVOID  </B><I>EventContext</I><B>, </B>
<B>    PVOID  </B><I>ConnectionContext</I><B>, </B>
<B>    uint  </B><I>DisconnectDataLength</I><B>, </B>
<B>    PVOID  </B><I>DisconnectData</I><B>, </B>
<B>    uint  </B><I>OptionsLength</I><B>, </B>
<B>    PVOID  </B><I>Options</I><B>, </B>
<B>    ulong  </B><I>Flags</I>
<B>    );</B></PRE>

<H4>Parmeters</H4>

<DL>
<DT><I>EventContext</I> </DT>

<DD>Context value supplied on the TdiSetEvent call.</DD>

<DT><I>ConnectionContext</I> </DT>

<DD>Context for the disconnection connection object. This context was supplied by the client as a parameter to the <B>TdiOpenConnection</B> call that opened the connection.</DD>

<DT><I>DisconnectDataLength</I></DT>

<DD>Unused and set to zero and NULL,  respectively.</DD>

<DT><I>DisconnectData</I></DT>

<DD>Unused and set to zero and NULL,  respectively.</DD>

<DT><I>OptionsLength</I> </DT>

<DD>Length in bytes of the <I>Options</I> parameter.</DD>

<DT><I>Options</I> </DT>

<DD>Pointer to a buffer containing IP options received with the frame containing the FIN or RST, if the disconnect was triggered by an incoming frame. This buffer is valid only for the duration of the call to the event handler, and may be NULL. </DD>

<DT><I>Flags</I> </DT>

<DD>Identifies the type of disconnect. It is either TDI_DISCONNECT_RELEASE or TDI_DISCONNECT_ABORT. 
</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: TDI_EVENT_DISCONNECT"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
