<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>WM_IME_COMPOSITION</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_966"></A>WM_IME_COMPOSITION</H1>

<P>Sent two bytes of composition characters to the application. The <B>WM_IME_COMPOSITION</B> message is sent when an IME changes composition status as a result of a user's keystroke. The IME user interface window changes its appearance when it processes this message. An application can call <B>ImmGetCompositionString</B> to obtain detailed composition status. </P>

<P>There is no return value. 

<DL>
<DT><I>wParam</I> </DT>

<DD>Double byte character that is the latest change of composition character. </DD>

<DT><I>lParam</I> </DT>

<DD>Flag that indicates how the composition string or character changed. An application checks this to retrieve the necessary information. It can be a combination of the following values: 

<P>GCS_COMPSTR 


<P>GCS_COMPATTR 


<P>GCS_COMPCLAUSE 


<P>GCS_COMPREADSTR 


<P>GCS_COMPREADATTR 


<P>GCS_COMPREADCLAUSE 


<P>GCS_TYPINGINFO 


<P>GCS_SETCURSORPOS 


<P>GCS_RESULTSTR 


<P>GCS_RESULTCLAUSE 


<P>GCS_RESULTREADSTR 


<P>GCS_RESULTREADCLAUSE 


<P>GCR_ERRORSTR 


<P>GCR_INFOSTR 

</DD>
</DL>

<P>The following values are special styles for <B>WM_IME_COMPOSITION</B>. </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=41%>Value </TH>
<TH align=left width=59%>Meaning </TH>
</TR>

<TR VALIGN="top">
<TD width=41%>CS_INSERTCHAR </TD>
<TD width=59%>An IME specifies this value when <I>wParam</I> shows a composition character which should be inserted into the current insertion point. An application should display a composition character if it processes this bit flag. </TD>
</TR>

<TR VALIGN="top">
<TD width=41%>CS_NOMOVECARET </TD>
<TD width=59%>An IME specifies this value to prevent an application from moving the caret position as a result of processing WM_IME_COMPOSITION. For example, if an IME specifies a combination of CS_INSERTCHAR and CS_NOMOVECARET, it means that an application should insert a character given by <I>wParam</I> into the current caret position, but should not move the caret. Subsequent WM_IME_COMPOSITION with GCS_RESULTSTR replaces this character. </TD>
</TR>
</TABLE><BR>

<P>An application that needs to display composition characters by itself should not pass this message to either the application IME user interface window or <B>DefWindowProc</B>, which passes the message to the default IME window. An IME should give this message to an application even when the IME simply cancels the current composition. An application or IME UI should use this message to erase the current composition string. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: WM_IME_COMPOSITION"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
