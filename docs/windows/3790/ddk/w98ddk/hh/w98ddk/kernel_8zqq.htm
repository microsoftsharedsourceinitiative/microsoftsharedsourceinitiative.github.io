<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>VMM_GetSystemInitState</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1372"></A>VMM_GetSystemInitState</H1>

<PRE>include vmm.inc

VMMCall VMM_GetSystemInitState

mov [InitState], eax
 </PRE>

<P>Retrieves the current system initialization state. Uses EAX, ECX, Flags. 

<UL>
	<LI>Returns the current system initialization state in the EAX register. 
<P>The following table identifies initialization milestones and return values for VMM_GetSystemInitState. Milestones are listed in the table in chronological order. When a milestone completes, this service returns the value (one of the values) listed to the right of the milestone. The first value is returned if the first milestone has not been completed. 
</LI>
</UL>

<TABLE>

<TR VALIGN="top">
<TH align=left width=34%>Milestone </TH>
<TH align=left width=66%>VMM_GetSystemInitState return value </TH>
</TR>

<TR VALIGN="top">
<TD width=34%>SYS_CRITICAL_Init is broadcast</TD>
<TD width=66%>SYSSTATE_PRESYSCRITINIT (00000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DEVICE_INIT is broadcast</TD>
<TD width=66%>SYSSTATE_PREDEVICEINIT (10000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>INIT_COMPLETE is broadcast</TD>
<TD width=66%>SYSSTATE_PREINITCOMPLETE (20000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>&nbsp;</TD>
<TD width=66%>SYSSTATE_VXDINITCOMPLETED (40000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>KERNEL32_INITIALIZED is broadcast </TD>
<TD width=66%>SYSSTATE_KERNEL32INITED (50000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>KERNEL32_SHUTDOWN is broadcast </TD>
<TD width=66%>SYSSTATE_KERNEL32TERMINATED (A0000000h) 
<P>STATE_PRESYSVMTERMINATE (B0000000h) </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SYS_VM_TERMINATE is broadcast </TD>
<TD width=66%>SYSSTATE_PRESYSTEMEXIT (E0000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SYSTEM_EXIT is broadcast </TD>
<TD width=66%>SYSSTATE_PRESYSTEMEXIT2 (E4000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SYSTEM_EXIT2 is broadcast </TD>
<TD width=66%>SYSSTATE_PRESYSCRITEXIT (F0000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SYS_CRITICAL_EXIT is broadcast </TD>
<TD width=66%>SYSSTATE_PRESYSCRITEXIT2 (F4000000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SYS_CRITICAL_EXIT2 is broadcast </TD>
<TD width=66%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=34%>Return to real mode </TD>
<TD width=66%>SYSSTATE_POSTSYSCRITEXIT2 (FFF00000h) </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DEVICE_REBOOT_NOTIFY is broadcast (See Device_Reboot_Notify function)</TD>
<TD width=66%>SYSSTATE_PREDEVICEREBOOT (0xFFFF0000)</TD>
</TR>

<TR VALIGN="top">
<TD width=34%>CRIT_REBOOT_NOTIFY is broadcast (See Crit_Reboot_Notify function)</TD>
<TD width=66%>SYSSTATE_PRECRITREBOOT (0xFFFFF000)</TD>
</TR>

<TR VALIGN="top">
<TD width=34%>REBOOT_PROCESS
<P>REBOOT_PROCESS</P>

<P>REBOOT_PROCESS</P>

<P>REBOOT_PROCESSOR is broadcast (See Reboot_Processor function)</P>
</TD>
<TD width=66%>SYSSTATE_PREREBOOTCPU (0xFFFFFF00)</TD>
</TR>
</TABLE><BR>

<P>VMM.H contains the above definitions.</P>

<P>Future versions of Windows may have additional initialization states with values between the ones defined here, which implies that you should use a relational comparison to test the initialized state. Currently, this service returns zero in ECX, but additional information may be returned in this register in the future. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: VMM_GetSystemInitState"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
