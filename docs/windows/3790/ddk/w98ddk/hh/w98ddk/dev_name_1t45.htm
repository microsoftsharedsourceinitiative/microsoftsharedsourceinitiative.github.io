<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>.vkd (VKD Debug Binary Utility)</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT=".vkd (VKD Debug Binary Utility)">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_.vkd_vkd_debug_binary_utility__me"></A>.vkd (VKD Debug Binary Utility)</H1>

<P>Virtual Keyboard Device</P>

<P class=indent1>[0] - General info</P>

<P class=indent1>[1] - Hot Key info</P>

<P class=indent1>[2] - Per VM info</P>

<P class=indent1>[3] - Set VKD queue_outs</P>

<P class=indent1>[ESC] - Exit VKD debug query</P>

<H1>.vmm (Display VMM Commands) </H1>

<P>.vmm</P>

<P>Displays a menu of subcommands. Pressing a single key causes the corresponding command to be carried out. </P>

<TABLE border=1 frame=box rules=all>

<TR VALIGN="top">
<TH align=left width=28%>Service</TH>
<TH align=left width=72%>Comments</TH>
</TR>

<TR VALIGN="top">
<TD width=28%>[A] System time</TD>
<TD width=72%>Displays the current system time.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[B] Display Critical Section info</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[C] Display blocked thread information</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[D] Reset dyna-link profile counts</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[E] I/O port trap information</TD>
<TD width=72%>Displays information about I/O emulation handling. The first section displays general information about the hash table used to dispatch trapped I/O instructions. The second section lists each I/O port trapped, number of times trapped, percentage of total number if I/O traps, current trapping state, hash function result, table index, offset from ideal table index, and handler routine name. This information is useful for determining which ports are trapped frequently and thus need to be tuned for speed.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[F] Reset I/O profile counts</TD>
<TD width=72%>Reset the trap counts on all I/O ports. Useful for isolating the profile information to a particular section of execution, such as reading from a floppy drive, etc.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[G] Turn procedure call trace logging on/off</TD>
<TD width=72%>Toggles the state of call tracing. When on, each debugging code created by the BeginProc macro performs a Queue_Out of the routine name each time it is entered. Thus when ".S" is invoked to dump a fault log, the log will be interspersed with messages stating each routine name as it is called and who called it, so it is possible to get a complete execution log.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[H] V86 interrupt hook information </TD>
<TD width=72%>Displays the V86 interrupt table; showing the current vector assignment and which VMM/device driver routines have hooked the interrupt, if any. This command gives a look at which interrupts are looked at by the different device drivers, etc.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[I] PM interrupt hook information</TD>
<TD width=72%>This command is similar to "G" above, but show the logical PM interrupt table. It shows current vector assignments and routine names that are hooked into the interrupt chains.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[J] Reset PM and V86 interrupt profile counts</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[K] Display event lists</TD>
<TD width=72%>This command displays the list of current global events, and then of list of local events for each VM.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[L] Display device list</TD>
<TD width=72%>This command displays the list of loaded devices along with the information from each Device Descriptor Block. Type .<B>VMM L</B>={DDB}, where DDB is the name of the VxD, to list an explicit module.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[M] Display V86 break points</TD>
<TD width=72%>This command displays a list of all V86 break points that are currently allocated. This list shows that CS:IP of the break point, the Ring 0 callback address/label and the reference data.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[N] Display PM break points</TD>
<TD width=72%>This command displays a list of all PM break points that are currently allocated. This list shows that CS:IP of the break point, the Ring 0 callback address/label and the reference data.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[O] Display interrupt profile</TD>
<TD width=72%>Profiles the activity (counts) of V86 Ints, PM Ints and VMM Ints</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[P] Reset interrupt profile counts</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[Q] Display GP fault profile</TD>
<TD width=72%>Profiles General Protection Fault activity</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[R] Reset GP fault profile counts</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[S] Toggle verbose device call trace</TD>
<TD width=72%>Turn on verbose device tracing to displays the name of each VxD before it is called, and <B>OK</B> when the VxD returns.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[T] Dyna-link service profile information</TD>
<TD width=72%>Displays a list of all services (in VMM and all devices) that shows the number of times the service has been called, the service number, routine address, and routine name. This information is a pseudo profile of which services are used frequently and thus should be tuned for speed.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[U] Fault Hook information</TD>
<TD width=72%>Displays all V86 fault hooks, PM fault hooks and VMM fault hooks.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[V] Display time out queues</TD>
<TD width=72%>Displays all the time out queues including the Async time out queue and Global time out queue.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[W] PM CLI/STI trace info</TD>
<TD width=72%>&nbsp;</TD>
</TR>

<TR VALIGN="top">
<TD width=28%>[X] DPMI info</TD>
<TD width=72%>&nbsp;</TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: .vkd%20(VKD%20Debug%20Binary%20Utility)"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
