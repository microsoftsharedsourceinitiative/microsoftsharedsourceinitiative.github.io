<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Registration</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_548"></A>Registration</H2>

<P>A display driver registers itself with VFLATD by first calling the <B>VflatD_Query</B> function to verify that the correct version of VFLATD has been loaded, then calling the <B>VflatD_Create_Virtual_Frame_Buffer</B> function to register itself and obtain a selector identifying the logical frame buffer. </P>

<P>A display adapter must also specify a bank-switch procedure when it calls the <B>VflatD_Create_Virtual_Frame_Buffer</B> function. Thereafter, whenever a page fault occurs during a drawing operation, VFLATD calls the bank-switch procedure, directing it to map a block of video data into the physical frame buffer. The procedure must be written using 32-bit code and must be a maximum of 100 bytes in length. When the procedure is called, EAX identifies the new bank to be swapped into the physical frame buffer. The procedure must save all registers except EAX and EDX and must not return a value. </P>

<P>This section is a reference to the virtual flat-frame buffer device. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Registration"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
