<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Associating a 3D Buffer with Listener Properties</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="_dxddk_associating_a_3d_buffer_with_listener_properties_dsound"></A>Associating a 3D Buffer with Listener Properties</H4>

<P>In the DirectSound API, there may be multiple "listeners," one for each currently executing DirectSound 3-D application. Each listener has associated "3-D buffers." However, in the driver only one object supports the listener property set — the driver's primary buffer. Furthermore, the driver is not necessarily aware of any association between its secondary buffer objects and the applications that created them. </P>

<P>Additional information must be passed to the driver so that, when listener properties change, the driver knows which secondary buffers should be affected. Similarly, when a secondary buffer's 3-D properties are set, the driver must know which listener properties to reference when determining the 3-D effect. </P>

<P>To do this, DirectSound passes special data to the driver through the <A HREF="ds-ddk_0678.htm"><B>IDsDriverPropertySet::Get</B></A> and <A HREF="ds-ddk_9tgk.htm"><B>IDsDriverPropertySet::Set</B></A> methods. On any call to set a 3-D property for either listener or buffer, DirectSound passes a pointer to a 32-bit identifier that associates buffer and listener properties together. This 32-bit identifier is unique for each application using 3-D listener and buffer properties. See the reference section for information about the <B>InstanceId</B> member of the <A HREF="ds-ddk_5wtg.htm"><B>DSPROPERTY</B></A> structure. </P>

<P>To help the DirectSound driver maintain its internal data structures, DirectSound notifies the driver when an application begins using 3-D audio hardware acceleration and when the application no longer uses 3-D audio hardware acceleration. DirectSound does this using the <A HREF="ds-ddk_6w6c.htm"><B>DSPROPERTY_DIRECTSOUND3DLISTENER_ALLOCATION</B></A> property along with the 32-bit identifier described previously. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Associating%20a%203D%20Buffer%20with%20Listener%20Properties"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
