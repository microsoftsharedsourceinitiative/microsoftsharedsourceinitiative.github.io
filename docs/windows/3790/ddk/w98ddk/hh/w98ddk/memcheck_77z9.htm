<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Memcheck Interfaces</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Memcheck Interfaces">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_memcheck_interfaces_me"></A>Memcheck Interfaces</H2>

<P>First, let us review the application main window interface. This interface provides the user with an overview of the memory allocation activity within the system. The user can watch this window and determine how much memory each driver has allocated to itself, how much memory in total is allocated by ring zero components, and how much a driver's allocation pool has grown or shrunk since a system snapshot was last taken. </P>

<P>The following example represents the output: </P>

<TABLE>

<TR VALIGN="top">
<TH align=left colspan=3 width=51%>Fixed Memory</TH>
<TH align=left colspan=2 width=49%>Swappable Memory</TH>
</TR>

<TR VALIGN="top">
<TD width=14%><B>VxD Name</B></TD>
<TD width=17%><B>Allocations</B></TD>
<TD width=20%><B>Bytes</B></TD>
<TD width=22%><B>Allocations</B></TD>
<TD width=27%><B>Bytes</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>afvxd</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>235(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>bios</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>2(0)</TD>
<TD width=27%>16857(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>cbss</TD>
<TD width=17%>14(0)</TD>
<TD width=20%>954(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>cdfs</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>12(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>cdvsd</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>74(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>configmg</TD>
<TD width=17%>40<B>(4)</B></TD>
<TD width=20%>66316<B>(80)</B></TD>
<TD width=22%>1827<B>(467)</B></TD>
<TD width=27%>64573<B>(7139)</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>cwbase</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>20(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>cwbwdm</TD>
<TD width=17%>9(0)</TD>
<TD width=20%>2968(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>debug</TD>
<TD width=17%>39<B>(4)</B></TD>
<TD width=20%>936<B>(96)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>dfs</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>8192(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>disktsd</TD>
<TD width=17%>6(0)</TD>
<TD width=20%>120(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>dosmgr</TD>
<TD width=17%>3(0)</TD>
<TD width=20%>60(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>drmk</TD>
<TD width=17%>3(0)</TD>
<TD width=20%>96(0)</TD>
<TD width=22%>3(0)</TD>
<TD width=27%>72(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>esdi506</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>1102(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>hsflop</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>98(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>ifsmgr</TD>
<TD width=17%>186<B>(32)</B></TD>
<TD width=20%>16193<B>(2016)</B></TD>
<TD width=22%>60<B>(7)</B></TD>
<TD width=27%>1818<B>(328)</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>ios</TD>
<TD width=17%>32(0)</TD>
<TD width=20%>2192(0)</TD>
<TD width=22%>5(0)</TD>
<TD width=27%>1968(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>isapnp</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>1(0)</TD>
<TD width=27%>4096(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>ks</TD>
<TD width=17%>12<I>(-2)</I></TD>
<TD width=20%>1132<I>(-176)</I></TD>
<TD width=22%>67<I>(-4)</I></TD>
<TD width=27%>4524<I>(-124)</I></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>mmdevldr</TD>
<TD width=17%>4(0)</TD>
<TD width=20%>64(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>mstcp</TD>
<TD width=17%>28(0)</TD>
<TD width=20%>7368(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>ndis</TD>
<TD width=17%>90(0)</TD>
<TD width=20%>202793(0)</TD>
<TD width=22%>1(0)</TD>
<TD width=27%>1488(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>nmx</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>3686400(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>ntkern</TD>
<TD width=17%>320<B>(5)</B></TD>
<TD width=20%>450914<I>(-409)</I></TD>
<TD width=22%>352<I>(-5)</I></TD>
<TD width=27%>13912<I>(-104)</I></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>pccard</TD>
<TD width=17%>20(0)</TD>
<TD width=20%>1166(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>pci</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>24(0)</TD>
<TD width=27%>1044(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>pcimp</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>12(0)</TD>
<TD width=22%>1(0)</TD>
<TD width=27%>60(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>perf</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>62(0)</TD>
<TD width=27%>2373(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>portcls</TD>
<TD width=17%>17(0)</TD>
<TD width=20%>6072(0)</TD>
<TD width=22%>29(0)</TD>
<TD width=27%>7444(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>pppmac</TD>
<TD width=17%>18(0)</TD>
<TD width=20%>39018(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>rt</TD>
<TD width=17%>3(0)</TD>
<TD width=20%>704(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>scsi1hlp</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>8(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>serenum</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>1(0)</TD>
<TD width=27%>32(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>serial</TD>
<TD width=17%>3(0)</TD>
<TD width=20%>37(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>shell</TD>
<TD width=17%>8(0)</TD>
<TD width=20%>120(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>sysaudio</TD>
<TD width=17%>0(0)</TD>
<TD width=20%>0(0)</TD>
<TD width=22%>492<B>(1)</B></TD>
<TD width=27%>61834<B>(4096)</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>tcpip</TD>
<TD width=17%>116<B>(2)</B></TD>
<TD width=20%>205074<B>(128)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>tdi</TD>
<TD width=17%>18(0)</TD>
<TD width=20%>700(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>uhcd</TD>
<TD width=17%>6(0)</TD>
<TD width=20%>2428(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>usbd</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>160(0)</TD>
<TD width=22%>3(0)</TD>
<TD width=27%>71(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>usbhub</TD>
<TD width=17%>4(0)</TD>
<TD width=20%>358(0)</TD>
<TD width=22%>2(0)</TD>
<TD width=27%>122(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>v86mmgr</TD>
<TD width=17%>3(0)</TD>
<TD width=20%>2152(0)</TD>
<TD width=22%>2(0)</TD>
<TD width=27%>475136(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vcache</TD>
<TD width=17%>66(0)</TD>
<TD width=20%>70486(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vcd</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>679(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vcomm</TD>
<TD width=17%>4(0)</TD>
<TD width=20%>61(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vcond</TD>
<TD width=17%>6(0)</TD>
<TD width=20%>112(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vdd</TD>
<TD width=17%>4(0)</TD>
<TD width=20%>1181<B>(80)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vdef</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>20(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vdhcp</TD>
<TD width=17%>13(0)</TD>
<TD width=20%>4440(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vfat</TD>
<TD width=17%>547<B>(96)</B></TD>
<TD width=20%>87857<B>(22378)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vip</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>40(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vmcpd</TD>
<TD width=17%>17<B>(3)</B></TD>
<TD width=20%>8976<B>(1584)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vmm</TD>
<TD width=17%>611<B>(74)</B></TD>
<TD width=20%>159262<B>(21912)</B></TD>
<TD width=22%>462<B>(15)</B></TD>
<TD width=27%>4064993<B>(91918)</B></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vmouse</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>31(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vnbt</TD>
<TD width=17%>88(0)</TD>
<TD width=20%>10438(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vnetbios</TD>
<TD width=17%>3<B>(2)</B></TD>
<TD width=20%>4154<B>(58)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vnetsup</TD>
<TD width=17%>28(0)</TD>
<TD width=20%>1528(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>voltrack</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>12(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vredir</TD>
<TD width=17%>12(0)</TD>
<TD width=20%>22733(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vtdapi</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>16(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vwin32</TD>
<TD width=17%>95<B>(8)</B></TD>
<TD width=20%>7404<B>(700)</B></TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vxdldr</TD>
<TD width=17%>328<I>(-4)</I></TD>
<TD width=20%>1231914<I>(-141556)</I></TD>
<TD width=22%>9(0)</TD>
<TD width=27%>634000(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>vxdmon</TD>
<TD width=17%>14(0)</TD>
<TD width=20%>109178(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>wdmaud</TD>
<TD width=17%>5(0)</TD>
<TD width=20%>120(0)</TD>
<TD width=22%>56(0)</TD>
<TD width=27%>14644(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>wmidrv</TD>
<TD width=17%>2(0)</TD>
<TD width=20%>144(0)</TD>
<TD width=22%>1(0)</TD>
<TD width=27%>20(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>wsock2</TD>
<TD width=17%>1(0)</TD>
<TD width=20%>8192(0)</TD>
<TD width=22%>0(0)</TD>
<TD width=27%>0(0)</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Total:</TD>
<TD width=17%>2871<B>(224)</B></TD>
<TD width=20%>6435226<I>(-93109)</I></TD>
<TD width=22%>3462<B>(480)</B></TD>
<TD width=27%>5371081<B>(99157)</B></TD>
</TR>
</TABLE><BR>

<P>Note that the interface is divided into five columns. Starting from the left, the first column is the name of the VXD/WDM driver. Second column represents how many fixed handles that driver has allocated and third column shows how many fixed bytes are allocated. The fourth and fifth columns show how many swappable handles the driver has allocated and how many swappable bytes the driver has allocated, respectively. </P>

<P>Also note that there is a column to the right of each of the latter four columns containing a number in parentheses. This number is the tabulated delta between how much memory was allocated to the particular driver at the time of the last snapshot and how much memory is allocated to the driver presently. For example, if we are examining how many fixed bytes are allocated to the TCP/IP driver, which at the time of the last snapshot, had 1024 bytes allocated to it, and now has 1536 bytes allocated to it, the "Fixed Bytes" column would read: 1536 (512). This denotes that the <I>tcpip.sys</I> driver has grown by 512 bytes since the time of the last snapshot. A negative value in parentheses indicates that the driver is now using less memory than it was at the time of the snapshot (negative values here can be safely ignored for all practical purposes). However, if one or more of the numbers in parentheses continues to grow, and never shrinks again, it is a good indication that the associated driver is leaking resources. </P>

<P class=proch><B><IMG SRC="../images/wedge.gif" ALT="" BORDER=0>To take a snapshot</B>

<OL>
	<LI>In the File menu, click <B>Clear delta columns</B>.
<P>Memcheck will take the last recorded state of the computer and base all delta information on that snapshot from that point forward.
</LI>

	<LI>Click <B>Clear delta columns</B> again to declare a new snapshot.</LI>
</OL>

<P>So now let's say we have found a hypothetical memory leak in some driver, say <I>tcpip.sys</I>. We have observed most keenly that every time we connect to a network resource, <I>tcpip</I>'s memory usage grows its allocation pool by 42 bytes in one handle. This means that if I connect to a network resource every time the display refreshes, I will notice that the delta columns, as well as the total columns, will grow by one handle and 42 bytes. If we let the computer stand alone for a while without connecting to a network resource, it does not appear to free those allocations (the columns do not ever decrement by one handle and 42 bytes). We can now safely say that this driver is leaking. </P>

<P>The next step is to move to the second interface, through the Windows debugger for further investigation. For the purpose of this documentation, it is assumed that you have the Windows debugger loaded and a functional Rterm instance as the terminal client on the remote host already set up. </P>

<P>At this point you may be asking yourself: "Why are there two interfaces? Couldn't you just consolidate them into one?" If we were to attempt to display deeper and more precise information about what is happening in ring zero, we would consequently (probably) be modifying the state of the ring zero component we were looking at. And if that isn't enough for you, ring zero components change state faster than the state information can be moved to ring three and displayed to the user. Therefore, certain functionality must be left to the debugger interface, where the computer can be (basically) halted and we can poke around safely looking at memory allocation information. </P>

<P>To access the Memcheck driver's debugger interface, we must break in by pressing CTRL+C on the remote terminal (Rterm) client. From the x##, x--, or x%% prompt, type '..Memcheck', without the single quotation marks and press Enter. This will cause the Memcheck driver to display a menu. For the purpose of this documentation, not all of the options in this menu are relevant, and thus not all of them will be explained. </P>

<P>Mainly, we are concerned with the options in the "Filter On" section, the "Break On" section, and the 'd' and 's' commands. Through the "Filter On" section, we can filter out allocation information that fits specified criteria. Keep in mind that the number of allocation data that the driver could potentially be storing may very well be immense. Thus, by specifying, for example, a driver name such as <I>tcpip</I> (remember, it is not necessary to specify the 8.3 filename suffix, the basename will do), we can filter out those allocations that were made by <I>tcpip</I> only. Then, we can dump that allocation information to the Rterm by issuing the 'd' command. This will dump the entire list of all allocations made by that driver, one by one. However, in most if not all cases, the 's' command should be issued to switch the driver into "summary mode". This will tabulate all of the allocations that came from a unique caller address into one listing. For example, if the function called <B>AllocateBuffer</B> in <I>tcpip</I> made 32 separate allocations at different times, but all with the same block size, the Memcheck driver will tabulate all of these together and list this caller only once, specifying that 32 allocations were made from that address. </P>

<P>Let's digress from our hypothetical example to take a moment to review the Memcheck debug menu and illustrate how the allocation list is processed and output. Note the following debugger output: </P>

<PRE><I>1##</I>..Memcheck
MEMCHECK DEBUG MENU 1.20 (case sensitive)
'd' dump
Filter on:
'n' driver name ()
'c' caller address 00000000h
'b' memory block size 00000000h (0)
'f' memory block flags 00000000h (zero for all)
's' turns ON summary mode
Break on:
'C' Caller address 00000000h
'B' memory block size 00000000h (0)
'F' memory block flags 00000000h
'S' stack checksum dwID 00000000h
Misc:
'l' dump dynamic loading device's footprints (Filter on vxdldr)
'v' validate a stack checksum (dwID)
't' turn OFF stack checksum generation (dwID)
'e' dump error pool
'E' dump and clear error pool
'i' turn OFF int 3's
'r' reset or clear all
'h' or '?' for help message
'm' turn OFF MEMCHECK menu
'g' or esc to exit
<I>Enter MEMCHECK selection</I>:<B>n</B>
<I>Enter the name of the Vxd(SYS) (limit 8 chars):</I><B>vcache</B>
MEMCHECK DEBUG MENU 1.20 (case sensitive)
'd' dump
Filter on:
'n' driver name <B>(vcache)</B>
'c' caller address 00000000h
'b' memory block size 00000000h (0)
'f' memory block flags 00000000h (zero for all)
's' turns ON summary mode
Break on:
'C' Caller address 00000000h
'B' memory block size 00000000h (0)
'F' memory block flags 00000000h
'S' stack checksum dwID 00000000h
Misc:
'l' dump dynamic loading device's footprints (Filter on vxdldr)
'v' validate a stack checksum (dwID)
't' turn OFF stack checksum generation (dwID)
'e' dump error pool
'E' dump and clear error pool
'i' turn OFF int 3's
'r' reset or clear all
'h' or '?' for help message
'm' turn OFF MEMCHECK menu
'g' or esc to exit
Enter MEMCHECK selection:
</PRE>

<P>In the previous example, we have issued the 'n' command, instructing Memcheck to filter its immense allocation list for allocations made by the component named "vcache". After entering this command, note that the Memcheck debug menu is displayed again, but this time, under the "Filter on" section, we see that we are filtering for the name "vcache". Keep in mind that all filter options are processed together, so we can continue to refine the filter by also filtering on block size, allocation flags, or caller address. </P>

<P>If you've ever been so bold as to not apply a filter, then issue the 'd' (dump allocation list) command, you will have probably noticed that the allocation list continues to dump for quite some time. By specifying the filter, we are able to output only the following allocations: </P>

<PRE>MEMCHECK DEBUG MENU 1.20 (case sensitive)
'd' dump
Filter on:
'n' driver name (vcache)
'c' caller address 00000000h
'b' memory block size 00000000h (0)
'f' memory block flags 00000000h (zero for all)
's' turns ON summary mode
Break on:
'C' Caller address 00000000h
'B' memory block size 00000000h (0)
'F' memory block flags 00000000h
'S' stack checksum dwID 00000000h
Misc:
'l' dump dynamic loading device's footprints (Filter on vxdldr)
'v' validate a stack checksum (dwID)
't' turn OFF stack checksum generation (dwID)
'e' dump error pool
'E' dump and clear error pool
'i' turn OFF int 3's
'r' reset or clear all
'h' or '?' for help message
'm' turn OFF MEMCHECK menu
'g' or esc to exit
Enter MEMCHECK selection:d
</PRE>

<TABLE>

<TR VALIGN="top">
<TH align=left width=14%>(dwID)</TH>
<TH align=left width=13%>Memory</TH>
<TH align=left width=14%>Size</TH>
<TH align=left width=15%>Flags</TH>
<TH align=left width=13%>Address:</TH>
<TH align=left width=11%>Driver:</TH>
<TH align=left width=20%>Symbol</TH>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000034)</TD>
<TD width=13%>c140fcb0,</TD>
<TD width=14%>00000034,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c140ffb0,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000001e)</TD>
<TD width=13%>c1415a30,</TD>
<TD width=14%>000103b0,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c0383e0b:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(6)+20F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14cb850,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000018)</TD>
<TD width=13%>c14e21e0,</TD>
<TD width=14%>00000018,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c02532cc:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(4)+24</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000018)</TD>
<TD width=13%>c14e79b0,</TD>
<TD width=14%>00000018,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c02532cc:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(4)+24</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000018)</TD>
<TD width=13%>c14e85d0,</TD>
<TD width=14%>00000018,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c02532cc:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(4)+24</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14e8a40,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e8d80,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e8dc0,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e8e00,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e8e40,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e8e80,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e8ec0,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e8f00,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14e8f40,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14e8f80,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003a)</TD>
<TD width=13%>c14e8fc0,</TD>
<TD width=14%>0000003a,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003a)</TD>
<TD width=13%>c14e9000,</TD>
<TD width=14%>0000003a,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e9040,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000038)</TD>
<TD width=13%>c14e9080,</TD>
<TD width=14%>00000038,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e90c0,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e9100,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e9140,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e9180,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14e91c0,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14e9210,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c14e9260,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14e92a0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14e92f0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000038)</TD>
<TD width=13%>c14e9330,</TD>
<TD width=14%>00000038,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14e9370,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14e93b0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14e93f0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14e9440,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14e9490,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000031)</TD>
<TD width=13%>c14f26d0,</TD>
<TD width=14%>00000031,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f3050,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f3090,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000041)</TD>
<TD width=13%>c14f30d0,</TD>
<TD width=14%>00000041,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000041)</TD>
<TD width=13%>c14f3120,</TD>
<TD width=14%>00000041,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f3170,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f31b0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f31f0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000041)</TD>
<TD width=13%>c14f3230,</TD>
<TD width=14%>00000041,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000041)</TD>
<TD width=13%>c14f3280,</TD>
<TD width=14%>00000041,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14f32d0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c14f3320,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f3370,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c14f33b0,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14f3400,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14f3450,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14f34a0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14f34f0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003f)</TD>
<TD width=13%>c14f3540,</TD>
<TD width=14%>0000003f,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003f)</TD>
<TD width=13%>c14f3580,</TD>
<TD width=14%>0000003f,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000041)</TD>
<TD width=13%>c14f35c0,</TD>
<TD width=14%>00000041,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003e)</TD>
<TD width=13%>c14f3610,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c14f3650,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f36a0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c14f36e0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c14f3730,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f3780,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c14f37c0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000047)</TD>
<TD width=13%>c14f3800,</TD>
<TD width=14%>00000047,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c14f3850,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000044)</TD>
<TD width=13%>c14f38a0,</TD>
<TD width=14%>00000044,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c1514000,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000030)</TD>
<TD width=13%>c15212a0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c1523000,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c1523180,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c15262c0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c1530000,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c15300a0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000017c)</TD>
<TD width=13%>c1532200,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000104)</TD>
<TD width=13%>c1534430,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c15344d0,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c15358c0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000043)</TD>
<TD width=13%>c1535a70,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c15364a0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c15377e0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003f)</TD>
<TD width=13%>c1537b70,</TD>
<TD width=14%>0000003f,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003a)</TD>
<TD width=13%>c1537bb0,</TD>
<TD width=14%>0000003a,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000017c)</TD>
<TD width=13%>c1537db0,</TD>
<TD width=14%>0000003e,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000038)</TD>
<TD width=13%>c1537df0,</TD>
<TD width=14%>00000038,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c1539ec0,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c153a2c0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c15400c0,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000034)</TD>
<TD width=13%>c1540230,</TD>
<TD width=14%>00000034,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000002c)</TD>
<TD width=13%>c1540310,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c15403b0,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c154e350,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000030)</TD>
<TD width=13%>c154e590,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003c)</TD>
<TD width=13%>c154e980,</TD>
<TD width=14%>0000003c,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000038)</TD>
<TD width=13%>c154f0d0,</TD>
<TD width=14%>00000038,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000042)</TD>
<TD width=13%>c154f410,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000040)</TD>
<TD width=13%>c154f460,</TD>
<TD width=14%>00000040,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(00000048)</TD>
<TD width=13%>c154f4a0,</TD>
<TD width=14%>0000003f,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003a)</TD>
<TD width=13%>c154f540,</TD>
<TD width=14%>0000003a,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000002c)</TD>
<TD width=13%>c154faf0,</TD>
<TD width=14%>00000043,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000002c)</TD>
<TD width=13%>c154fdc0,</TD>
<TD width=14%>00000042,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003f)</TD>
<TD width=13%>c15500c0,</TD>
<TD width=14%>0000003f,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>(0000003a)</TD>
<TD width=13%>c1550160,</TD>
<TD width=14%>0000003a,</TD>
<TD width=15%>00800001,</TD>
<TD width=13%>c008fe4f:</TD>
<TD width=11%>vcache</TD>
<TD width=20%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=41%>Total Bytes 00011c6dh(72813)</TD>
<TD width=15%>Count:103</TD>
<TD width=13%>&nbsp;</TD>
<TD width=11%>&nbsp;</TD>
<TD width=20%>&nbsp;</TD>
</TR>
</TABLE><BR>

<P>To further shorten our output, we can give the 's' (toggle summary mode) command as follows:</P>

<PRE>MEMCHECK DEBUG MENU 1.20 (case sensitive)
'd' dump
Filter on:
'n' driver name (vcache)
'c' caller address 00000000h
'b' memory block size 00000000h (0)
'f' memory block flags 00000000h (zero for all)
's' turns ON summary mode
Break on:
'C' Caller address 00000000h
'B' memory block size 00000000h (0)
'F' memory block flags 00000000h
'S' stack checksum dwID 00000000h
Misc:
'l' dump dynamic loading device's footprints (Filter on vxdldr)
'v' validate a stack checksum (dwID)
't' turn OFF stack checksum generation (dwID)
'e' dump error pool
'E' dump and clear error pool
'i' turn OFF int 3's
'r' reset or clear all
'h' or '?' for help message
'm' turn OFF MEMCHECK menu
'g' or esc to exit
Enter MEMCHECK selection:s
MEMCHECK DEBUG MENU 1.20 (case sensitive)
'd' dump
Filter on:
'n' driver name (vcache)
'c' caller address 00000000h
'b' memory block size 00000000h (0)
'f' memory block flags 00000000h (zero for all)
's' turns OFF summary mode
Break on:
'C' Caller address 00000000h
'B' memory block size 00000000h (0)
'F' memory block flags 00000000h
'S' stack checksum dwID 00000000h
Misc:
'l' dump dynamic loading device's footprints (Filter on vxdldr)
'v' validate a stack checksum (dwID)
't' turn OFF stack checksum generation (dwID)
'e' dump error pool
'E' dump and clear error pool
'i' turn OFF int 3's
'r' reset or clear all
'h' or '?' for help message
'm' turn OFF MEMCHECK menu
'g' or esc to exit
Enter MEMCHECK selection:d
Attempting to walk tree
</PRE>

<TABLE>

<TR VALIGN="top">
<TH align=left width=15%>(dwID)</TH>
<TH align=left width=11%>Count</TH>
<TH align=left colspan=2 width=18%>nBytes</TH>
<TH align=left width=15%>Address:</TH>
<TH align=left width=19%>Driver:</TH>
<TH align=left width=22%>Symbol</TH>
</TR>

<TR VALIGN="top">
<TD width=15%>(00000000)</TD>
<TD width=11%><I>99</I>,</TD>
<TD width=16%>00001875h,</TD>
<TD colspan=2 width=17%><I>c008fe4f</I>:</TD>
<TD width=19%>vcache:</TD>
<TD width=22%>VCACHE(1)+A9F</TD>
</TR>

<TR VALIGN="top">
<TD width=15%>(00000018)</TD>
<TD width=11%>3,</TD>
<TD width=16%>00000048h,</TD>
<TD colspan=2 width=17%>c02532cc:</TD>
<TD width=19%>vcache:</TD>
<TD width=22%>VCACHE(4)+24</TD>
</TR>

<TR VALIGN="top">
<TD width=15%>(0000001e)</TD>
<TD width=11%>1,</TD>
<TD width=16%>000103b0h,</TD>
<TD colspan=2 width=17%>c0383e0b:</TD>
<TD width=19%>vcache:</TD>
<TD width=22%>VCACHE(6)+20F</TD>
</TR>

<TR VALIGN="top">
<TD colspan=3 width=42%>Total Unique Callers:3,</TD>
<TD colspan=4 width=58%>nBytes=72813(00011c6dh)</TD>
</TR>
</TABLE><BR>

<P>Note that out of the 103 allocations that were dumped previously, there were only 3 unique callers. In other words, 99 allocations were made from the same address in code (in this case, 0xC008FE4F). </P>

<P>Going back to the original example with <I>tcpip</I>, let's say that we performed the action that caused the leak (in this case, connecting to a network resource) 10 times before switching into summary mode and dumping the list. We could look for any listing that reports 10 allocations. If there is only one of those listed, we can safely bet that that instance is the offender. </P>

<P>We would then move on to the "Break On" section, and instruct the driver to break every time an allocation was made by that particular caller address. Again, we reproduce the offending behavior, but this time, Memcheck int 3's when this operation is performed. </P>

<P>Now we have all the information we need to track down the leak. All that needs to be done is to grab a stack dump and, if possible, analyze it to determine what is going on. Even if it is not possible to analyze, at least we have the offending function, the repro steps, and a stack dump. This is enough for the developer of the component to figure out what exactly is the problem. </P>

<P>Though these are not complete directions, you are now basically familiar with the interfaces you are using and can play around with them to better understand what is going on.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Memcheck%20Interfaces"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
