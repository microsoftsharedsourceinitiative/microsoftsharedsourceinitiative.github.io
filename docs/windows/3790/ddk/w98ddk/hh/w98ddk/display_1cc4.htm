<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Hardware Initialization</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_444"></A>Hardware Initialization</H3>

<P>A display driver sets the display mode and registers for the display hardware whenever GDI calls the <B>Enable</B> and <B>Disable</B> functions. The driver is also responsible for saving and restoring the display mode and registers whenever Windows is switching between Windows applications and non-Windows applications. </P>



<H4><A NAME="_pss_445"></A>Enabling and Disabling the Display Hardware</H4>

<P>A display driver prepares the display hardware for Windows whenever GDI calls the <B>Enable</B> function. To prepare the hardware, the display driver sets the display hardware to graphics mode and initializes the hardware registers as needed. This should include setting the refresh rate based on the current monitor. For more information on refresh rates, see <I>About Refresh Rate Support</I>. Although GDI calls the <B>BitBlt</B> function to clear the screen as Windows starts, many display drivers eliminate the possibility of the user seeing any random data by also clearing the screen as they initialize the display hardware. </P>

<P>A display driver restores the display hardware to a text mode whenever GDI calls the <B>Disable</B> function. </P>



<H4><A NAME="_pss_446"></A>Screen Switching</H4>

<P>The display driver works with the Virtual Display Device (VDD) to reenable the display hardware for Windows high resolution (hi-res) mode after returning from a full-screen MS-DOS virtual machine. To accomplish this task, the display driver must call the VDD function <B>VDD_DRIVER_REGISTER </B>to register the function <B>ResetHiResMode</B> immediately after the Windows hi-res mode has been set by the display driver during initialization. <B>ResetHiResMode</B> is a required display driver function that is called by the VDD to place the screen back into Windows hi-res mode after a user switches away from a full screen MS-DOS session. </P>

<H4>See Also</H4>

<P><B>ResetHiResMode</B>, <B>VDD_DRIVER_REGISTER</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Hardware%20Initialization"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
