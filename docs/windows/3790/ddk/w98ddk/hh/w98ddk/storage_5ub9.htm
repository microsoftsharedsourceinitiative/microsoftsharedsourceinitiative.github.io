<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>ScsiPortGetBusData</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_4325"></A>ScsiPortGetBusData</H3>

<PRE>ULONG ScsiPortGetBusData(DeviceExtension, BusDataType, SystemIoBusNumber,
    Slotnumber, Buffer, Length)
IN PVOID  DeviceExtension;
IN ULONG  BusDataType;
IN ULONG  SystemIoBusNumber;
IN ULONG  SlotNumber;
IN PVOID  Buffer;
IN ULONG  Length;
 </PRE>

<P>Gets bus-type-specific information. 

<UL>
	<LI>Returns the number of bytes that were actually returned. </LI>
</UL>

<DL>
<DT><I>DeviceExtension</I> </DT>

<DD>Points to the HBA miniport driver's storage for per-adapter data. </DD>

<DT><I>BusDataType</I> </DT>

<DD>Specifies the type of bus-specific data. Recognized information comes from CMOS, EISA, POS, CBUS, PCIC, and VME sources. </DD>

<DT><I>SystemIoBusNumber</I> </DT>

<DD>Specifies which of the buses of the same type should be addressed. This value can be retrieved from the PORT_CONFIGURATION_INFORMATION structure. </DD>

<DT><I>SlotNumber</I> </DT>

<DD>Specifies the slot to be accessed. </DD>

<DT><I>Buffer</I> </DT>

<DD>Specifies where the retrieved data should be stored. </DD>

<DT><I>Length</I> </DT>

<DD>Specifies the amount of data to retrieved. 
</DD>
</DL>

<P>This function can be called only from a miniport driver's <B>HwFindAdapter</B> routine. Calls to <B>ScsiPortGetBusData</B> from other miniport driver functions will result in system failure or an incorrect operation. </P>

<P>If <I>Length</I> is zero, the buffer is treated as a pointer to where the pointer to the buffer should be stored. The port driver will allocate a buffer for the data. The pointer to this buffer is returned in the location pointed to by <I>Buffer</I>. This data is valid only until this function is called again or <B>HwFindAdapter</B> returns. </P>

<P>In the case of the PCI bus, you can also access its configuration space using CONFIGMG_Call_Enumerator_Function.  See KB article Q140730 (Accessing PCI Device’s Configuration Space from Device Driver).</P>

<H4>See Also</H4>

<P><B>PORT_CONFIGURATION_INFORMATION</B>, <B>HwFindAdapter</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: ScsiPortGetBusData"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
