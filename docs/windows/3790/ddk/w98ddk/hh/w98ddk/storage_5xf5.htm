<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Win31 Compatible Filesystem Mode</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_4411"></A>Win31 Compatible Filesystem Mode</H2>

<P>The IFS manager supports a special Win31 compatible file system mode. There is a registry switch that can be turned on to put the IFS manager in the Win31 compatible mode. Long names are not allowed in this mode. Most of the long name APIs are converted to their short name equivalents. New APIs that do not have such equivalents are mostly supported with some exceptions that are described in the following. Individual FSDs do not need to do anything special to support this mode. The IFS manager does the appropriate mappings so that the FSDs get only short names when the Win31 file system mode is in operation. </P>

<P>A number of the new functions are failed. The list of functions that are failed is given in the following. </P>

<TABLE>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 5704h </TD>
<TD width=60%><B>Get Last Access Date and Time</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 5705h </TD>
<TD width=60%><B>Set Last Access Date and Time</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 5706h </TD>
<TD width=60%><B>Get Creation Date and Time</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 5707h </TD>
<TD width=60%><B>Set Creation Date and Time</B> </TD>
</TR>
</TABLE><BR>

<P>There are other functions which are converted to their short name equivalents. The list of such functions is given in the following. </P>

<TABLE>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7139h </TD>
<TD width=60%><B>Make Directory</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 713Ah </TD>
<TD width=60%><B>Remove Directory</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 713Bh </TD>
<TD width=60%><B>Change Directory</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7141h </TD>
<TD width=60%><B>Delete File</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7143h </TD>
<TD width=60%><B>Get or Set File Attributes</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7147h </TD>
<TD width=60%><B>Get Current Directory</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7156h </TD>
<TD width=60%><B>Rename File</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 7160h </TD>
<TD width=60%><B>Get Canonicalized Path Name</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 716Ch </TD>
<TD width=60%><B>Create or Open File</B> </TD>
</TR>
</TABLE><BR>

<P>There are other functions that are translated appropriately internally within the IFS manager so that they are processed as short name functions even though they are coming in via the new LFN APIs. These are functions which need to be supported but do not have an equivalent in the old short name API set. The list of these functions is given in the following. </P>

<TABLE>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 714Eh </TD>
<TD width=60%><B>Find First File</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 714Fh </TD>
<TD width=60%><B>Find Next File</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 71A1h </TD>
<TD width=60%><B>Find Close</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 71A0h </TD>
<TD width=60%><B>Get Volume Information</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 71A6h </TD>
<TD width=60%><B>Get File Info By Handle</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>Interrupt 21h Function 71A7h </TD>
<TD width=60%><B>File Time To DOS Time and DOS Time To File Time</B> </TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Win31%20Compatible%20Filesystem%20Mode"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
