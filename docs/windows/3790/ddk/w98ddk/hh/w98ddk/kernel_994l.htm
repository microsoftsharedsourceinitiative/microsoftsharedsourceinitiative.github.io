<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>_EnterMutex</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1655"></A>_EnterMutex</H1>

<PRE>include vmm.inc

VMMCall     _EnterMutex, &lt;MutexHandle, Flags&gt;
 </PRE>

<P>Enters a mutex. If the mutex is unowned, the calling thread becomes the owner and execution continues. If the mutex is owned by another thread, the calling thread blocks until the mutex is available. If this thread already owns the mutex, the reentry count is incremented and execution continues. Uses C Calling Convention: Uses EAX, ECX, EDX, and Flags. 

<UL>
	<LI>No return value. </LI>
</UL>

<DL>
<DT><I>MutexHandle</I></DT>

<DD>Handle of the mutex. </DD>

<DT><I>Flags</I></DT>

<DD>Action to take when interrupts occur while the virtual machine is blocked for the mutex. This parameter can be a combination of the following values: 

<TABLE>

<TR VALIGN="top">
<TD width=27%>Block_Enable_Ints </TD>
<TD width=73%>Service interrupts in the virtual machine even if the virtual machine does not currently have interrupts enabled. This forces interrupts to be enabled. This value is only relevant if either Block_Svc_Ints or Block_Svc_If_Ints_Locked is set. </TD>
</TR>

<TR VALIGN="top">
<TD width=27%>Block_Svc_If_Ints_Locked </TD>
<TD width=73%>Service events and simulated interrupts in the virtual machine if the thread blocks for the mutex and the VMStat_V86IntsLocked flag is set. </TD>
</TR>

<TR VALIGN="top">
<TD width=27%>Block_Svc_Ints </TD>
<TD width=73%>Service events and simulated interrupts in the virtual machine if the thread blocks for the mutex. </TD>
</TR>

<TR VALIGN="top">
<TD width=27%>Block_Thread_Idle </TD>
<TD width=73%>Consider the thread to be idle if it blocks for the mutex. </TD>
</TR>
</TABLE><BR>



<P>The Block_Poll value is reserved and must not be used with this service. 

</DD>
</DL>

<P>If the mutex has a priority boost and the mutex is entered for the first time, the execution priority of the current thread is boosted by the same amount. </P>

<H4>See Also</H4>

<P><B>_EnterMustComplete</B>, <B>_LeaveMutex</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: _EnterMutex"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
