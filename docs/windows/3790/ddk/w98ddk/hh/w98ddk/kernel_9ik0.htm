<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Setting the Copy Buffer and Map Page Sizes</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_1940"></A>Setting the Copy Buffer and Map Page Sizes</H2>

<P>The <B>V86MMGR_Set_Mapping_Info</B> service defines the minimum amount of translation buffer and global V86 map address space required by a virtual device. By default, the translation copy buffer size is 4 kilobytes and there are no global mapping pages. If these defaults are not adequate, a virtual device can set new values by using this service. For example, the VNETBIOS device uses this service to ensure that there will be adequate global page mapping space to map network buffers. </P>

<P>If multiple virtual devices call this service, the V86MMGR uses the largest value specified when allocating buffer space. In other words, if 10 virtual devices request a two-page copy buffer, this service set the copy buffer size to two pages (not 20). While a large copy buffer can speed up I/O operations, it requires extra memory to be allocated for each virtual machine. Virtual devices should keep the copy buffer size as small as possible. </P>

<P>This service must be called during the <B>Sys_Critical_Init</B> or <B>Device_Init</B> phase of device initialization. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Setting%20the%20Copy%20Buffer%20and%20Map%20Page%20Sizes"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
