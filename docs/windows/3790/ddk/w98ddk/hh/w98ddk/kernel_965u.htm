<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Call_When_Idle</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1592"></A>Call_When_Idle</H1>

<PRE>include vmm.inc

mov     esi, OFFSET32 IdleCallback
VMMCall Call_When_Idle
jc      error
 </PRE>

<P>Installs a system-idle callback function. The system calls this function whenever the Windows kernel signals that Windows is idle and all other virtual machines are also idle. Virtual devices typically use this service to perform background operations. For example, the memory manager uses this service to asynchronously write dirty pages to the backing store. Uses Flags. 

<UL>
	<LI>Clears the carry flag is clear if the callback function is installed. Otherwise, sets the carry flag. </LI>
</UL>

<DL>
<DT><I>IdleCallback</I></DT>

<DD>Address of the callback function to install. For more information about the callback function, see <B>IdleCallback</B>. 
</DD>
</DL>

<P>Virtual devices can install any number of idle callback functions. The system calls each one, in the order installed, until one of the functions clears the carry flag. A system-idle callback function remains installed until it is explicitly removed by the <B>Cancel_Call_When_Idle</B> service. </P>

<H4>See Also</H4>

<P><B>IdleCallback </B></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Call_When_Idle"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
