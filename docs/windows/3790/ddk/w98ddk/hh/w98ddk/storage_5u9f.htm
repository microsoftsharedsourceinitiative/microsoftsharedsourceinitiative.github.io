<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>HwFindAdapter</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_4313"></A>HwFindAdapter</H3>

<PRE>ULONG HwFindAdapter(DeviceExtension, HwContext, BusInformation, ArgumentString,
    ConfigInfo, Again)
IN PVOID  DeviceExtension;
IN PVOID  HwContext;
IN PVOID  BusInformation;
IN PCHAR  ArgumentString;
IN OUT PPORT_CONFIGURATION_INFORMATION  ConfigInfo;
OUT PBOOLEAN  Again;
 </PRE>

<P>Returns information about the miniport driver's adapter in the PORT_CONFIGURATION_INFORMATION buffer. 

<UL>
	<LI>Return one of the following status values: </LI>
</UL>

<TABLE>

<TR VALIGN="top">
<TH align=left width=34%>Value </TH>
<TH align=left width=66%>Meaning </TH>
</TR>

<TR VALIGN="top">
<TD width=34%>SP_RETURN_FOUND </TD>
<TD width=66%>Indicates a host adapter was found and the configuration information was successfully determined. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SP_RETURN_ERROR </TD>
<TD width=66%>Indicates a host adapter was found but there was error obtaining the configuration information. If possible such an error should be logged. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SP_RETURN_BAD_CONFIG </TD>
<TD width=66%>Indicates the supplied configuration information was invalid. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>SP_RETURN_NOT_FOUND </TD>
<TD width=66%>Indicates no host adapter was found for the supplied configuration information. </TD>
</TR>
</TABLE><BR>

<DL>
<DT><I>DeviceExtension</I> </DT>

<DD>Supplies the HBA miniport driver's adapter data storage. This storage is initialized to zero before this routine is called by the OS-dependent port driver. </DD>

<DT><I>HwContext</I> </DT>

<DD>Supplies the context value that was passed to <B>ScsiPortInitialize</B>. </DD>

<DT><I>BusInformation</I> </DT>

<DD>Supplies bus-type-specific information that has been gathered. The format of this information depends on the particular bus type. </DD>

<DT><I>ArgumentString</I> </DT>

<DD>Supplies a zero-terminated ASCII string. This string originates from the user and can be NULL. </DD>

<DT><I>ConfigInfo</I> </DT>

<DD>Returns a pointer to the configuration information structure, which is filled by the HBA miniport driver. This structure is initialized with any known configuration information, such as <I>SystemIoBusNumber</I>. If possible, drivers should have a set of defaults that do not require any supplied configuration information. </DD>

<DT><I>Again</I> </DT>

<DD>Indicates the HBA miniport driver wants the OS-specific port driver to call its HW_FIND_ADAPTER function again with a new <I>DeviceExtension</I> and the same <I>ConfigurationInformation</I>. This is used by the HBA miniport drivers that can search for more than one adapter on a bus. 
</DD>
</DL>

<P>This function is called by <B>ScsiPortInitialize</B> after the necessary storage has been allocated. </P>

<H4>See Also</H4>

<P>PORT_CONFIGURATION_INFORMATION </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: HwFindAdapter"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
