<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>VID_IRET_Proc</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1931"></A>VID_IRET_Proc</H1>

<PRE>include vpicd.inc

clc
cmp     [TimeOut],0
jz      no_timeout
stc

no_timeout:
mov     eax, IRQHandle
mov     ebx, VMHandle
call    VID_IRET_Proc
 </PRE>

<P>Handles attempts by a virtual machine to return from an interrupt. The system calls this procedure whenever a virtual machine executes an <B>iret</B> instruction, or whenever a time out occurs for a simulated interrupt. </P>

<P>The system disables interrupts before calling this procedure. The procedure can re-enable interrupts if necessary. Uses EAX, EBX, ECX, EDX, ESI, and Flags. 

<UL>
	<LI>No return value. </LI>
</UL>

<DL>
<DT><I>IRQHand</I> </DT>

<DD>Handle of the interrupt request. </DD>

<DT><I>VM</I> </DT>

<DD>Handle of the current virtual machine. 
</DD>
</DL>

<P>This procedure is useful for devices that must simulate large numbers of interrupts in a short period of time. For example, the virtual COM device simulates an interrupt, allows one character to be read from the COM port, and waits for the virtual machine to execute an <B>iret</B> instruction before putting more data into the virtual COM receive buffer. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: VID_IRET_Proc"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
