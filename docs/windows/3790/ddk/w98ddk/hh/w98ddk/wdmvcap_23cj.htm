<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KS_VIDEOSTREAM_CONFIG_CAPS</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_wdmvcap_ks_videostream_config_caps"></A>KS_VIDEOSTREAM_CONFIG_CAPS</H3>

<P>The <B>KS_VIDEO_STREAM_CONFIG_CAPS</B> structure is identical to the DirectShow <B>VIDEO_STREAM_CONFIG_CAPS</B> structure, and includes the following information: analog video standard, scaling capabilities, cropping capabilities, minimum and maximum frame rates, minimum and maximum data rates</P>

<PRE class=syntax>typedef struct  _KS_VIDEO_STREAM_CONFIG_CAPS  {
  GUID  guid;
  ULONG  VideoStandard;    
  SIZE  InputSize;
  SIZE  MinCroppingSize;
  SIZE  MaxCroppingSize;
  int  CropGranularityX;
  int  CropGranularityY;
  int  CropAlignX;
  int  CropAlignY;
  SIZE  MinOutputSize;
  SIZE  MaxOutputSize;
  int  OutputGranularityX;
  int  OutputGranularityY;
  int  StretchTapsX;
  int  StretchTapsY;
  int  ShrinkTapsX;
  int  ShrinkTapsy;
  LONGLONG  MinFrameInterval;  
  LONGLONG  MaxFrameInterval;
  LONG  MinBitsPerSecond;
  LONG  MaxBitsPerSecond;
} KS_VIDEO_STREAM_CONFIG_CAPS;</PRE>

<H4>Members</H4>

<DL>
<DT><B>guid</B></DT>

<DD>Specifies the KSDATAFORMAT_SPECIFIER_VIDEOINFO value. This GUID is identical to the DirectShow MEDIATYPE_Video value.</DD>

<DT><B>VideoStandard</B></DT>

<DD>Specifies the logical OR of all AnalogVideoStandards supported for the stream. All possible video standards are provided by the KS_ANalogVideoStandard enumeration. Digital cameras should set this member to KS_AnalogVideo_None.</DD>

<DT><B>InputSize</B></DT>

<DD>Specifies the size of the incoming signal. This value is the <B>SIZE</B> structure that indicates the image rectangle's width and height in pixels. This is the largest signal the filter can digitize with each pixel remaining unique. </DD>

<DT><B>MinCroppingSize</B></DT>

<DD>Specifies the smallest cropping rectangle allowed, as specified in the <B>KS_VIDEOINFOHEADER</B> structure's <B>rcSource</B> member. </DD>

<DT><B>MaxCroppingSize</B></DT>

<DD>Specifies the largest cropping rectangle allowed, as specified in the <B>KS_VIDEOINFOHEADER</B> structure's <B>rcSource</B> member.</DD>

<DT><B>CropGranularityX</B></DT>

<DD>Specifies the horizontal granularity of the cropping size. For example, valid widths could be specified as even multiples of four. </DD>

<DT><B>CropGranularityY</B></DT>

<DD>Specifies the vertical granularity of cropping size. For example, valid heights could be specified as even multiples of four. </DD>

<DT><B>CropAlignX</B></DT>

<DD>Specifies the horizontal alignment of the cropping rectangle inside InputSize. For example, the driver could specify that valid rectangles must start on a boundary that is a multiple of four. </DD>

<DT><B>CropAlignY</B></DT>

<DD>Specifies the vertical alignment of the cropping rectangle inside <B>InputSize</B>. For example, the driver could specify that valid rectangles must start on a boundary that is a multiple of four.</DD>

<DT><B>MinOutputSize</B></DT>

<DD>Specifies the smallest bitmap this pin can produce.</DD>

<DT><B>MaxOutputSize</B></DT>

<DD>Specifies the largest bitmap this pin can produce.</DD>

<DT><B>OutputGranularityX</B></DT>

<DD>Specifies the granularity of the output bitmap width.</DD>

<DT><B>OutputGranularityY</B></DT>

<DD>Specifies the granularity of the output bitmap height.</DD>

<DT><B>StretchTapsX</B></DT>

<DD>Specifies a value indicating how well the filter can stretch the image's width. A value of zero means the filter can not stretch. A value of 1 indicates the filter uses pixel doubling, a value 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation. </DD>

<DT><B>StretchTapsY</B></DT>

<DD>Specifies a value indicating how well the filter can stretch the image's height. A value of zero means the filter can not stretch. A value of 1 indicates the filter uses pixel doubling, a value of 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation.</DD>

<DT><B>ShrinkTapsX</B></DT>

<DD>Specifies a value indicating how well the filter can shrink the image's width. A value of zero indicates that the filter can not shrink. A value of 1 indicates the filter eliminates some rows of pixels to achieve shrinking, a value of 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation. </DD>

<DT><B>ShrinkTapsY</B></DT>

<DD>Specifies a value indicating how well the filter can shrink the image's height. A value of zero indicates the filter can not shrink. A value of 1 indicates the filter eliminates some rows of pixels to achieve shrinking, a value of 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation. </DD>

<DT><B>MinFrameInterval</B></DT>

<DD>Specifies the minimum frame rate allowed. This value applies to capture filters only.</DD>

<DT><B>MaxFrameInterval</B></DT>

<DD>Specifies the maximum frame rate allowed. This value applies to capture filters only.</DD>

<DT><B>MinBitsPerSecond</B></DT>

<DD>Specifies the minimum data rate this pin can produce.</DD>

<DT><B>MaxBitsPerSecond</B></DT>

<DD>Specifies the maximum data rate this pin can produce.
</DD>
</DL>

<H4>Comments</H4>

<P>It is important to understand the relationships between the members of this structure. For example, assume the following values for some of the structure members: </P>

<P><B>MinCroppingSize</B> = (160, 120) </P>

<P><B>MaxCroppingSize</B> = (320, 240) </P>

<P><B>CropGranularityX</B> = 4 </P>

<P><B>CropGranularityY</B> = 8 </P>

<P>These values indicate that valid cropping sizes begin at <B>MinCroppingSize</B> and increase in steps in the x-direction by<B> CropGranularityX</B> and in the y-direction by <B>CropGranularityY</B>. In this case the x-value can be anywhere from 160 to 320 pixels in steps of 4 and the y-value can be anywhere from 120 to 240 pixels in steps of 8. </P>

<P>In this scenario a few of the valid sizes are: 

<UL>
	<LI>160 x 120, 164 x 120, 168 x 120, 172 x 120, etc. </LI>

	<LI>160 x 128, 164 x 128, 168 x 128, 172 x 128, etc. </LI>

	<LI>160 x 136, 164 x 136, 168 x 136, 172 x 136, etc. </LI>
</UL>

<P><B>CropAlignX</B> and <B>CropAlignY</B> indicate where the cropping rectangle can be inside the input size rectangle. Given a 160 x 120 sized, cropping rectangle and the following: </P>

<P><B>CropAlignX</B> = 2 </P>

<P><B>CropAlignY</B> = 4 </P>

<P>Some of the valid values for the <B>KS_VIDEOINFOHEADER</B> structure's <B>rcSource</B> member would be: 

<UL>
	<LI>(0, 0, 160, 120) </LI>

	<LI>(2, 0, 162, 120) </LI>

	<LI>(2, 4, 162, 124) </LI>

	<LI>(2, 8, 162, 128) </LI>
</UL>

<P>For a 320 x 240 cropping rectangle and the same cropping alignment values, (2, 4, 322, 244) is one example of the many legal rectangles. </P>

<P>The structure members discussed in this section work together to specify what values of <B>rcSource</B> are valid for the <B>KS_VIDEOINFOHEADER</B> structure that describes the output pin's media type. Of the remaining structure members, <B>MinOutputSize</B>, <B>MaxOutputSize</B>, <B>OutputGranularityX</B>, and <B>OutputGranularityY</B> describe the <B>biWidth</B> and <B>biHeight</B> members of the <B>KS_BITMAPINFOHEADER</B> structure contained in the pin's media type <B>KS_VIDEOINFOHEADER</B> structure. </P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KS_VIDEOSTREAM_CONFIG_CAPS"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
