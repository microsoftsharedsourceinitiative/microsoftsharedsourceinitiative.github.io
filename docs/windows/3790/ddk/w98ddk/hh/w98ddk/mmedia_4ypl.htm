<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Reference</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_2789"></A>Reference</H2>

<P>This section is a reference to the messages and data structures provided by Windows 95 for use by video compression and decompression drivers. There are separate sections for messages and data structures. </P>

<P>Windows communicates with video compression and decompression drivers through messages sent to the driver. The driver processes these messages with its <B>DriverProc</B> entry-point function. </P>

<P>A message consists of three parts: a message number and two DWORD parameters. Message numbers are identified by predefined message names. The two DWORD parameters contain message-dependent values. </P>

<P>The following messages are used by video compression and decompression drivers for compressing data: </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=44%>Functionality </TH>
<TH align=left width=56%>Messages and Structures to Use </TH>
</TR>

<TR VALIGN="top">
<TD width=44%>Open a video compression and decompression driver </TD>
<TD width=56%>DRV_OPEN, ICOPEN </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Configure driver state </TD>
<TD width=56%>ICM_CONFIGURE, ICM_GETSTATE, ICM_SETSTATE </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Interrogate driver </TD>
<TD width=56%>ICM_ABOUT, ICM_GETINFO, ICINFO </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Configure compression quality </TD>
<TD width=56%>ICM_GETDEFAULTQUALITY, ICM_GETINFO, ICM_GETQUALITY, ICM_SETQUALITY </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Determine key frame rate and buffer queue requirements </TD>
<TD width=56%>ICM_GETDEFAULTKEYFRAMERATE, ICM_COMPRESS_KEYFRAME, ICM_GETBUFFERSWANTED </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Specify decompression input format and determine decompression format </TD>
<TD width=56%>ICM_DECOMPRESS_GET_FORMAT, ICM_DECOMPRESS_QUERY, ICM_DECOMPRESS_GET_PALETTE </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Decompress data </TD>
<TD width=56%>ICM_DECOMPRESS, ICM_DECOMPRESS_BEGIN, ICM_DECOMPRESS_END, ICDECOMPRESS </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Decompress using extended decompression messages </TD>
<TD width=56%>ICM_DECOMPRESSEX, ICM_DECOMPRESSEX_BEGIN, ICM_DECOMPRESSEX_END, ICM_DECOMPRESSEX_QUERY, ICDECOMPRESSEX </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Specify compression input format and determine compressed format </TD>
<TD width=56%>ICM_COMPRESS_GET_FORMAT, ICM_COMPRESS_QUERY, ICM_COMPRESS_GET_SIZE </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Compress data </TD>
<TD width=56%>ICM_COMPRESS, ICM_COMPRESS_BEGIN, ICM_COMPRESS_END, ICCOMPRESS </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Specify decompression input/output formats for drawing data </TD>
<TD width=56%>ICM_DRAW_QUERY, ICM_DRAW_SUGGESTFORMAT, ICDRAWSUGGEST </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Decompress data for drawing directly to screen </TD>
<TD width=56%>ICM_DRAW, ICM_DRAW_BEGIN, ICM_DRAW_END, ICDRAW, ICDRAWBEGIN </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Rendering data directly to screen </TD>
<TD width=56%>ICM_DRAW_CHANGEPALETTE, ICM_DRAW_GETTIME, ICM_DRAW_SETTIME, ICM_DRAW_START, ICM_DRAW_STOP, ICM_DRAW_FLUSH, ICM_DRAW_RENDERBUFFER, ICM_DRAW_UPDATE, ICM_DRAW_WINDOW </TD>
</TR>

<TR VALIGN="top">
<TD width=44%>Notify applications of compression/decompression status </TD>
<TD width=56%>ICM_SET_STATUS_PROC, ICSETSTATUSPROC </TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Reference"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
