<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Interaction of Battery Class and Miniclass Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Interaction of Battery Class and Miniclass Drivers">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mj_device_control_kr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Battery&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_interaction_of_battery_class_and_miniclass_drivers_dg"></A>Interaction of Battery Class and Miniclass Drivers</H1>

<P>Together, the battery class driver and the miniclass driver manage the computer's use of a battery. The following figure shows how these two drivers interact.</P>

<P><IMG SRC="images/battmini.gif" ALT="" BORDER=0></P>

<P><B>Interaction of Battery Class and Miniclass Drivers</B></P>

<P>The miniclass driver is the primary function driver for the devices it controls. It receives IRPs from the Power Manager through the composite battery driver and calls support routines in the battery class driver to register its devices, to report status, and to handle certain system-defined battery IOCTLs. </P>

<P>The class driver receives information and status from all the miniclass drivers and reports it to the Power Manager through the composite battery driver. In response to battery IOCTLs, the class driver calls <A HREF="bat-mini_7b76.htm">battery miniclass driver routines</A> (<I>BatteryMiniXxx</I> routines) in the miniclass drivers to perform specific device control operations. Additionally, applications such as the power meter can send <A HREF="JavaScript:hhobj_1.Click()">IRP_MJ_DEVICE_CONTROL</A> requests to a miniclass driver to get information about a specific battery. </P>

<P>The class driver is designed to handle the superset of possible battery information and conditions, including temperature, changes in capacity, and so forth; individual batteries vary in their ability to detect and report all these conditions. Each miniclass driver should be designed to manage its specific battery type and must respond appropriately to the class driver when asked for any information that the battery does not support.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Interaction%20of%20Battery%20Class%20and%20Miniclass%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
