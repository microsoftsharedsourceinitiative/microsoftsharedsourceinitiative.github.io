<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>USB_BUS_INTERFACE_HUB_V2</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="USB_BUS_INTERFACE_HUB_V2">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_query_interface_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>System&nbsp;Support&nbsp;for&nbsp;Buses:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_usb_bus_interface_hub_v2_kr"></A>USB_BUS_INTERFACE_HUB_V2</H1>

<P>The USB_BUS_INTERFACE_HUB_V2 structure is used to report version 2 of the port driver interface to the bus driver. </P>

<PRE class=syntax>typedef struct _USB_BUS_INTERFACE_HUB_V2 {
  USHORT  Size;
  USHORT  Version;
  PVOID  BusContext;
  PINTERFACE_REFERENCE  InterfaceReference;
  PINTERFACE_DEREFERENCE  InterfaceDereference;
  PUSB_BUSIFFN_CREATE_USB_DEVICE  CreateUsbDevice;
  PUSB_BUSIFFN_INITIALIZE_USB_DEVICE  InitializeUsbDevice;
  PUSB_BUSIFFN_GET_USB_DESCRIPTORS  GetUsbDescriptors;
  PUSB_BUSIFFN_REMOVE_USB_DEVICE  RemoveUsbDevice;
  PUSB_BUSIFFN_RESTORE_DEVICE  RestoreUsbDevice;
  PUSB_BUSIFFN_GET_POTRTHACK_FLAGS  GetPortHackFlags;
  PUSB_BUSIFFN_GET_DEVICE_INFORMATION  QueryDeviceInformation;
  PUSB_BUSIFFN_GET_CONTROLLER_INFORMATION  GetControllerInformation;
  PUSB_BUSIFFN_CONTROLLER_SELECTIVE_SUSPEND  ControllerSelectiveSuspend;
  PUSB_BUSIFFN_GET_EXTENDED_HUB_INFO  GetExtendedHubInformation;
  PUSB_BUSIFFN_GET_ROOTHUB_SYM_NAME  GetRootHubSymbolicName;
  PUSB_BUSIFFN_GET_DEVICE_BUSCONTEXT  GetDeviceBusContext;
  PUSB_BUSIFFN_INITIALIZE_20HUB  Initialize20Hub;
} USB_BUS_INTERFACE_HUB_V2, *PUSB_BUS_INTERFACE_HUB_V2;</PRE>

<H4>Members</H4>

<DL>
<DT><I>Size</I></DT>

<DD>Contains, on input, the size in bytes of the buffer that holds the interface pointers. </DD>

<DT><I>Version</I></DT>

<DD>Indicates, on input, the version of the interface. The values that this member can take are as follows.

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Version Symbol</TH>
<TH align=left width=52%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>USB_BUSIF_HUB_VERSION_0</TD>
<TD width=52%>Version 0 of the port driver interface </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>USB_BUSIF_HUB_VERSION_1</TD>
<TD width=52%>Version 1 of the port driver interface </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>USB_BUSIF_HUB_VERSION_2</TD>
<TD width=52%>Version 2 of the port driver interface </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>USB_BUSIF_HUB_VERSION_3</TD>
<TD width=52%>Version 3 of the port driver interface </TD>
</TR>
</TABLE><BR>

</DD>

<DT><I>BusContext</I></DT>

<DD>Contains information that describes the host controller and the host controller driver that exposes this interface. This is an opaque entity that the caller must pass to the routines. </DD>

<DT><I>InterfaceReference</I></DT>

<DD>Pointer to a routine that increments the number of references to this interface. For more information on this routine, see <A HREF="usbinterkr_45de.htm"><I>InterfaceReference</I></A>. </DD>

<DT><I>InterfaceDereference</I></DT>

<DD>Pointer to a routine that decrements the number of references to this interface. For more information on this routine, see <A HREF="usbinterkr_4ieq.htm"><I>InterfaceDereference</I></A>. </DD>

<DT><I>CreateUsbDevice</I></DT>

<DD>Pointer to a routine that indicates to the port driver that a new USB device has arrived. For more information on this routine, see <A HREF="usbinterkr_0ble.htm"><I>CreateUsbDevice</I></A><I>. </I></DD>

<DT><I>InitializeUsbDevice</I></DT>

<DD>Pointer to a routine that allocates an address and assigns it to the device. The bus driver must call this routine for each new device on the USB bus. For more information on this routine, see <A HREF="usbinterkr_2gqa.htm"><I>InitializeUsbDevice</I></A>. </DD>

<DT><I>GetUsbDescriptors</I></DT>

<DD>Pointer to a routine that retrieves the configuration and device descriptors for the indicated device. For more information on this routine, see <A HREF="usbinterkr_281e.htm"><I>GetUsbDescriptors</I></A>. </DD>

<DT><I>RemoveUsbDevice</I></DT>

<DD>Pointer to a routine that removes a USB device. For more information on this routine, see <A HREF="usbinterkr_1m7m.htm"><I>RemoveUsbDevice</I></A>. </DD>

<DT><I>RestoreUsbDevice</I></DT>

<DD>Pointer to a routine that recreates a USB device using the information in the device handle of a device that has been removed. For more information on this routine, see <A HREF="usbinterkr_01te.htm"><I>RestoreUsbDevice</I></A>. </DD>

<DT><I>GetPortHackFlags</I></DT>

<DD>Pointer to a routine that is obsolete. Do not use. For more information on this routine, see <A HREF="usbinterkr_91o2.htm"><I>GetPortHackFlags</I></A>. </DD>

<DT><I>QueryDeviceInformation</I></DT>

<DD>Pointer to a routine that retrieves information about a USB device. For more information on this routine, see <A HREF="usbinterkr_3t82.htm"><I>QueryDeviceInformation</I></A>. </DD>

<DT><I>GetControllerInformation</I></DT>

<DD>Pointer to a routine that retrieves information about the host controller. For more information on this routine, see <A HREF="usbinterkr_7diq.htm"><I>GetControllerInformation</I></A>. </DD>

<DT><I>ControllerSelectiveSuspend</I></DT>

<DD>Pointer to a routine that enables the selective suspend facility on the indicated bus. For more information on this routine, see <A HREF="usbinterkr_9hgy.htm"><I>ControllerSelectiveSuspend</I></A>. </DD>

<DT><I>GetExtendedHubInformation</I></DT>

<DD>Pointer to a routine that returns information for all of the ports on the indicated hub. For more information on this routine, see <A HREF="usbinterkr_3rxu.htm"><I>GetExtendedHubInformation</I></A>. </DD>

<DT><I>GetRootHubSymbolicName</I></DT>

<DD>Pointer to a routine that returns the symbolic name of the root hub device. For more information on this routine, see <A HREF="usbinterkr_5q9e.htm"><I>GetRootHubSymbolicName</I></A>. </DD>

<DT><I>GetDeviceBusContext</I></DT>

<DD>Pointer to a routine that returns the bus context. This is an opaque entity that the bus driver must provide every time it calls a USB routine. For more information on this routine, see <A HREF="usbinterkr_4ks2.htm"><I>GetDeviceBusContext</I></A> </DD>

<DT><I>Initialize20Hub</I></DT>

<DD>Pointer to a routine that initializes a USB&nbsp;2.0 hub. For more information on this routine, see <A HREF="usbinterkr_09bm.htm"><I>Initialize20Hub</I></A>. </DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>usbbusif.h</I>. Include <I>usbbusif.h</I>. </P>

<H4>Comments</H4>

<P>The bus driver can obtain this interface by sending an <A HREF="JavaScript:hhobj_1.Click()">IRP_MN_QUERY_INTERFACE</A> request to the port driver, with <B>Parameters.QueryInterface.InterfaceType</B> set to USB_BUS_INTERFACE_HUB_GUID and with <B>Parameters.QueryInterface.Version</B> set to USB_BUSIF_HUB_VERSION_2. For more information on how to obtain a USB interface, see <A HREF="usbinterkr_7k4y.htm">USB Interfaces</A>.</P>

<P>Callers of the routines in this structure can be running at any IRQL. </P>

<H4>See Also</H4>

<P><A HREF="usbinterkr_7k4y.htm">USB Interfaces</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: USB_BUS_INTERFACE_HUB_V2"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
