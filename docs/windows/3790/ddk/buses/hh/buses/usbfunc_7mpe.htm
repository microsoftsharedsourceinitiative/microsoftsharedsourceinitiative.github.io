<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>USBD_ParseDescriptors</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="USBD_ParseDescriptors">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>System&nbsp;Support&nbsp;for&nbsp;Buses:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_usbd_parsedescriptors_kr"></A>USBD_ParseDescriptors</H1>

<P><B>USBD_ParseDescriptors </B>searches a given configuration descriptor and returns a pointer to the first descriptor that matches the search criteria.</P>

<PRE class=syntax><B>PUSB_COMMON_DESCRIPTOR
</B>  <B>USBD_ParseDescriptors(</B>
    <B>IN PVOID  </B><I>DescriptorBuffer</I><B>,</B>
    <B>IN ULONG  </B><I>TotalLength</I><B>,</B>
    <B>IN PVOID  </B><I>StartPosition</I><B>,</B>
    <B>IN LONG  </B><I>DescriptorType</I>
    <B>);</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>DescriptorBuffer</I></DT>

<DD>Pointer to a configuration descriptor that contains the descriptor for which to search.</DD>

<DT><I>TotalLength</I></DT>

<DD>Specifies the size, in bytes, of the buffer pointed to by <I>DescriptorBuffer</I>.</DD>

<DT><I>StartPosition</I></DT>

<DD>Pointer to the address within the configuration descriptor, provided at <I>DescriptorBuffer,</I> to begin searching from. To search from the beginning of the configuration descriptor, the parameters <I>DescriptorBuffer </I>and <I>StartPosition</I> must be the same address.</DD>

<DT><I>DescriptorType</I></DT>

<DD>Specifies the descriptor type code as assigned by USB. The following values are valid for USB-defined descriptor types:

<DL>
<DT>USB_STRING_DESCRIPTOR_TYPE</DT>

<DD>Specifies that the descriptor being searched for is a string descriptor.</DD>

<DT>USB_INTERFACE_DESCRIPTOR_TYPE</DT>

<DD>Specifies that the descriptor being searched for is an interface descriptor.</DD>

<DT>USB_ENDPOINT_DESCRIPTOR_TYPE</DT>

<DD>Specifies that the descriptor being searched for is an endpoint descriptor.
</DD>
</DL>
</DD>
</DL>

<H4>Return Value</H4>

<P><B>USBD_ParseDescriptors </B>returns a pointer to a <A HREF="usbstrct_8cvm.htm">USB_COMMON_DESCRIPTOR</A> structure that is the head of the first descriptor that matches the given search criteria, or NULL is returned if no match is found:</P>

<H4>Headers</H4>

<P>Declared in <I>usbdlib.h</I>. Include <I>usbdlib.h</I>.</P>

<H4>Comments</H4>

<P>This structure is used to hold a portion of a descriptor, so that the caller of <B>USBD_ParseDescriptors</B> can determine the correct structure to use to access the remaining data in the descriptor. Every descriptor type has these fields at the beginning of the data and callers can use the <B>bLength </B>and <B>bDescriptorType</B> members to correctly identify the type of this descriptor.</P>

<P>When this routine parses the configuration descriptor looking for the descriptor that matches the search criteria, it returns the first match, terminating the search.</P>

<P>Callers of this routine must be running at IRQL &lt; DISPATCH_LEVEL.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: USBD_ParseDescriptors"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
