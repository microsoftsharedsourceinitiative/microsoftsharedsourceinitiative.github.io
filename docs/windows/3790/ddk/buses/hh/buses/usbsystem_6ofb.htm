<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>USB Driver Stack for Windows 2000</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="USB Driver Stack for Windows 2000">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>System&nbsp;Support&nbsp;for&nbsp;Buses:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_usb_driver_stack_for_windows_2000_kg"></A>USB Driver Stack for Windows 2000</H2>

<P>The following figure illustrates the WDM driver stack that is created in Microsoft® Windows®&nbsp;2000 for a USB device with a single interface. </P>

<P><IMG SRC="images/usbstk2k.gif" ALT="" BORDER=0></P>

<P><B>USB Driver Stack for Windows&nbsp;2000</B></P>

<P>Starting from the bottom of the figure, the following describes each driver in the stack: 

<OL>
	<LI>The host controller driver is at the bottom of the Windows&nbsp;2000 USB driver stack. It consists of a class/miniclass driver pair. The host controller class driver, <I>usbd.sys</I>, is paired either with the <I>openhci.sys </I>(Open Host Controller Interface) minidriver or with the <I>uhcd.sys </I>(Universal Host Controller Driver) minidriver, depending on which USB protocol the system is configured to use. The host controller class driver handles those aspects of the port driver's duties that are independent of the specific protocol.</LI>

	<LI>Immediately above the host controller class driver is the USB bus driver, <I>usbhub.sys</I>, also known as the <I>hub driver</I>. This is the device driver for each hub on the system.</LI>

	<LI>Above the hub driver sits the client device driver. This might be a vendor-supplied device driver or it might be a system-supplied driver or driver stack. For a definition and example of a client driver, see <A HREF="usbvendor_1orr.htm">Vendor-Supplied USB Client Drivers</A>. In the case of composite devices, the hub driver not only drives the hub, but also provides a generic parent facility between the hub and the various interfaces of the device. For an example of the device stack for a composite device in Windows&nbsp;2000, see <A HREF="usbsystem_1lpj.htm">USB Device Stack for Windows 2000</A>. </LI>
</OL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: USB%20Driver%20Stack%20for%20Windows%202000"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
