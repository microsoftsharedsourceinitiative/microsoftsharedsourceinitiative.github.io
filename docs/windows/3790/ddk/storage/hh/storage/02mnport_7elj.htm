<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>SCSI Miniport Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="SCSI Miniport Drivers">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Storage&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_scsi_miniport_drivers_kg"></A>SCSI Miniport Drivers</H1>

<P>This section contains the following information:</P>

<P class=indent1><A HREF="02mnport_861z.htm">Supporting Plug and Play in a SCSI Miniport Driver</A> </P>

<P class=indent2><A HREF="02mnport_0ihz.htm">Registry Entries for Plug and Play SCSI Miniport Drivers</A> </P>

<P class=indent2><A HREF="02mnport_06jr.htm">SCSI Miniport Initialization Under Plug and Play</A> </P>

<P class=indent2><A HREF="02mnport_1yg7.htm">Converting a Windows NT 4.0 SCSI Miniport for Plug and Play</A> </P>

<P class=indent1><A HREF="02mnport_8gfb.htm">Required and Optional SCSI Miniport Routines</A> </P>

<P class=indent1><A HREF="02mnport_4vxj.htm">SCSI Miniport Driver’s DriverEntry Routine</A> </P>

<P class=indent2><A HREF="02mnport_465j.htm">Calling ScsiPortInitialize</A> </P>

<P class=indent2><A HREF="02mnport_0nqf.htm">Storage Driver's Return from DriverEntry</A> </P>

<P class=indent1><A HREF="02mnport_9huv.htm">SCSI Miniport Driver’s HwScsiFindAdapter Routine</A> </P>

<P class=indent2><A HREF="02mnport_2hwn.htm">Calling ScsiPort<I>Xxx</I>  from HwScsiFindAdapter</A> </P>

<P class=indent2><A HREF="02mnport_37dz.htm">Port-Driver-Supplied ConfigInfo for HwScsiFindAdapter</A> </P>

<P class=indent2><A HREF="02mnport_0ffr.htm">Setting up ConfigInfo in HwScsiFindAdapter</A> </P>

<P class=indent2><A HREF="02mnport_1vhj.htm">Setting Again and Returning from HwScsiFindAdapter</A> </P>

<P class=indent2><A HREF="02mnport_14x3.htm">Returning Control from HwScsiFindAdapter</A> </P>

<P class=indent1><A HREF="02mnport_6qsn.htm">SCSI Miniport Driver’s HwScsiInitialize Routine</A> </P>

<P class=indent1><A HREF="02mnport_5ovb.htm">SCSI Miniport Driver’s HwScsiStartIo Routine</A> </P>

<P class=indent2><A HREF="02mnport_43on.htm">Modifying SRBs</A> </P>

<P class=indent2><A HREF="02mnport_92xz.htm">Handling SRB_FUNCTION_EXECUTE_SCSI</A> </P>

<P class=indent2><A HREF="02mnport_8tnr.htm">Handling SRB_FUNCTION_ABORT_COMMAND</A> </P>

<P class=indent2><A HREF="02mnport_35bb.htm">Handling SRB_FUNCTION_RESET_BUS</A> </P>

<P class=indent2><A HREF="02mnport_9uhz.htm">Handling SRB_FUNCTION_RESET_DEVICE</A> </P>

<P class=indent2><A HREF="02mnport_7cx3.htm">Handling SRB_FUNCTION_FLUSH and SRB_FUNCTION_SHUTDOWN</A> </P>

<P class=indent2><A HREF="02mnport_65rb.htm">Handling SRB_FUNCTION_IO_CONTROL</A> </P>

<P class=indent2><A HREF="02mnport_7inb.htm">Handling SRB_FUNCTION_WMI</A> </P>

<P class=indent2><A HREF="02mnport_5rtz.htm">Handling Unsupported SRB_FUNCTION_<I>XXX</I></A> </P>

<P class=indent2><A HREF="02mnport_8qw7.htm">Return from HwScsiStartIo</A> </P>

<P class=indent2><A HREF="02mnport_6ysn.htm">Other SRB_FUNCTION_<I>XXX</I>  Requests</A> </P>

<P class=indent1><A HREF="02mnport_16sn.htm">SCSI Miniport Driver’s HwScsiDmaStarted Routine</A> </P>

<P class=indent1><A HREF="02mnport_67qf.htm">SCSI Miniport Driver’s HwScsiResetBus Routine</A> </P>

<P class=indent1><A HREF="02mnport_2s9z.htm">SCSI Miniport Driver’s HwScsiInterrupt Routine</A> </P>

<P class=indent2><A HREF="02mnport_54fb.htm">Deferring Interrupt-Driven I/O from HwScsiInterrupt</A> </P>

<P class=indent2><A HREF="02mnport_35t3.htm">SCSI Miniport Driver’s HwScsiEnableInterruptsCallback Routine</A> </P>

<P class=indent2><A HREF="02mnport_0z6v.htm">SCSI Miniport Driver’s HwScsiDisableInterruptsCallback Routine</A> </P>

<P class=indent1><A HREF="02mnport_9ew7.htm">SCSI Miniport Driver’s HwScsiTimer Routine</A> </P>

<P class=indent1><A HREF="02mnport_85yf.htm">SCSI Miniport Driver’s HwScsiAdapterState Routine</A> </P>

<P class=indent1><A HREF="02mnport_8hwn.htm">SCSI Miniport Driver’s HwScsiAdapterControl Routine</A> </P>

<P class=indent1><A HREF="02mnport_916a.htm">Restrictions on SCSI Miniport Drivers that Manage the Boot Drive</A></P>

<P class=indent1><A HREF="02mnport_0svb.htm">Error Handling in SCSI Miniport Drivers</A> </P>

<P>SCSI miniport drivers for NT-based operating systems are HBA-specific but operating system-independent. That is, each miniport driver links itself with the system-supplied SCSI port driver, which is a dynamic-link library (DLL), and calls only the port driver’s <B>ScsiPort</B><I>Xxx</I> routines to communicate with the system and its HBA. Such SCSI miniport drivers run on other Microsoft operating systems that support Win32® applications and also export the <B>ScsiPort</B><I>Xxx </I>routines. </P>

<P>Note that any SCSI miniport driver that calls routines other than the <B>ScsiPort</B><I>Xxx</I> cannot run in both Microsoft® operating system environments. To remain portable across Microsoft Windows systems, including NT-based operating systems, SCSI miniport drivers must call only the system-supplied <B>ScsiPort</B><I>Xxx</I>. </P>

<P>A SCSI miniport can be a Plug and Play driver, or it can run as a legacy driver that does not participate in Plug and Play operations such as resource redistribution or power management. The primary differences between a Plug and Play and a legacy miniport driver are the order in which initialization routines are called and enforcement of certain restrictions that were applied to miniports in Windows NT 4.0 but not enforced. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: SCSI%20Miniport%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
