<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DISK_PERFORMANCE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DISK_PERFORMANCE">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_kequerysystemtime_kr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Storage&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_disk_performance_kr"></A>DISK_PERFORMANCE</H1>

<P>The DISK_PERFORMANCE structure is used in conjunction with the <A HREF="k307_6cs2.htm">IOCTL_DISK_PERFORMANCE</A> request to collect summary disk statistics for purposes of measuring disk performance. </P>

<PRE class=syntax>typedef struct _DISK_PERFORMANCE {
  LARGE_INTEGER  BytesRead;
  LARGE_INTEGER  BytesWritten;
  LARGE_INTEGER  ReadTime;
  LARGE_INTEGER  WriteTime;
  LARGE_INTEGER  IdleTime;
  ULONG  ReadCount;
  ULONG  WriteCount;
  ULONG  QueueDepth;
  ULONG  SplitCount;
  LARGE_INTEGER  QueryTime;
  ULONG  StorageDeviceNumber;
  WCHAR  StorageManagerName[8];
} DISK_PERFORMANCE, *PDISK_PERFORMANCE;</PRE>

<H4>Members</H4>

<DL>
<DT><B>BytesRead</B></DT>

<DD>Contains a cumulative count of bytes read from the disk since the performance counters were enabled. </DD>

<DT><B>BytesWritten</B></DT>

<DD>Contains a cumulative count of bytes written to the disk since the performance counters were enabled.</DD>

<DT><B>ReadTime</B></DT>

<DD>Contains a cumulative time, expressed in increments of 100 nanoseconds, spent on disk reads since the performance counters were enabled. </DD>

<DT><B>WriteTime</B></DT>

<DD>Contains a cumulative time, expressed in increments of 100 nanoseconds, spent on disk reads since the performance counters were enabled. </DD>

<DT><B>IdleTime</B></DT>

<DD>Contains a cumulative time, expressed in increments of 100 nanoseconds, since the performance counters were enabled in which there was no disk activity. </DD>

<DT><B>ReadCount</B></DT>

<DD>Contains the number of disk accesses for reads since the performance counters were enabled. </DD>

<DT><B>WriteCount</B></DT>

<DD>Contains the number of disk accesses for writes since the performance counters were enabled.</DD>

<DT><B>QueueDepth</B></DT>

<DD>Contains a snapshot of the number of queued disk I/O requests at the time that the query for performance statistics was performed. </DD>

<DT><B>SplitCount</B></DT>

<DD>Contains the number of disk accesses by means of an associated IRP since the performance counters were enabled. </DD>

<DT><B>QueryTime</B></DT>

<DD>Contains a timestamp indicating the system time at the moment that the query took place. System time is a count of 100-nanosecond intervals since January 1, 1601. System time is typically updated approximately every ten milliseconds. For more information on system time, see <A HREF="JavaScript:hhobj_1.Click()"><B>KeQuerySystemTime</B></A>.</DD>

<DT><B>StorageDeviceNumber</B></DT>

<DD>Contains a unique number assigned to every disk or volume across a particular storage type. The storage types are <I>disk.sys</I>, <I>ftdisk.sys</I>, and <I>dmio.sys</I>. </DD>

<DT><B>StorageManagerName</B></DT>

<DD>Contains an 8-character string that indicates which device driver provided the performance statistics. In Windows®&nbsp;2000, this can be either "LogiDisk" for the driver <I>logidisk.sys</I> or "PhysDisk" for the driver <I>physdisk.sys</I>. These drivers collect performance statistics for devices and physical disks respectively. In Windows&nbsp;XP and later operating systems, this can be any of the following three strings: "FTDISK" for the driver <I>ftdisk.sys</I>, "DMIO" for the driver <I>dmio.sys</I>, or PARTMGR" for the driver <I>partmgr.sys</I>. These three drivers collect performance statistics for basic disk volumes, dynamic disk volumes, and physical disks respectively. Note that these strings are 8-character case-sensitive strings with blank fill. For example, in the case of the string "FTDISK", the <B>StorageManagerName</B> character array should contain two trailing blanks ("FTDISK&lt;b&gt;&lt;b&gt;"), and in the case of the string "DMIO", the array should contain four trailing blanks ("DMIO&lt;b&gt;&lt;b&gt;&lt;b&gt;&lt;b&gt;").
</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>ntdddisk.h</I>. Include <I>ntdddisk.h</I>. </P>

<H4>Comments</H4>

<P>Counting halts whenever the performance counters are disabled, but the counters are not reset, so the cumulative values assigned to the structure members might potentially reflect disk activity across several enablings and disablings of the counters. </P>

<H4>See Also</H4>

<P><A HREF="k307_6cs2.htm">IOCTL_DISK_PERFORMANCE</A>, <A HREF="k307_3r8y.htm">IOCTL_DISK_PERFORMANCE_OFF</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DISK_PERFORMANCE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
