<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Tracelog Utility</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Tracelog Utility">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_tracelog_utility_tools"></A>Tracelog Utility</H3>

<P>The Tracelog command-line utility controls the operation of a WPP software trace.</P>

<H4>Usage</H4>

<P>The following command is the minimum required to start a software trace:</P>

<PRE>tracelog –start <I>LoggerName</I> –guid <I>ControlFileName</I> –f <I>LogFileName</I> -flags <I>EnableFlags</I>
</PRE>

<P>The following command is the minimum required to stop a software trace:</P>

<PRE>tracelog –stop <I>LoggerName</I>
</PRE>

<P>The commonly used options that a trace consumer can specify are described in the following table.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Option</TH>
<TH align=left width=52%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=48%><B>-?</B>, <B>-h</B>, <B>-help</B>, </TD>
<TD width=52%>Prints a list of options to standard output.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B>–</B><B>f </B><I>LogFileName</I></TD>
<TD width=52%>Logs the unformatted messages in the file named <I>LogFileName</I>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B>–</B><B>flags</B> <I>EnableFlags</I></TD>
<TD width=52%>Sets the trace flags to (ULONG)<I>EnableFlags.</I> Values greater than or equal to 0x8000000 are reserved.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B><I>–</I></B><B>guid</B><I> ControlFileName</I> </TD>
<TD width=52%>Uses the control file named C<I>ontrolFileName</I>. The control file specifies the control GUIDs that a driver-provider registers with WMI.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B>–</B><B>query</B> <I>LoggerName</I></TD>
<TD width=52%>Returns the current status of a software trace named <I>LoggerName</I> to standard output.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B><I>–</I></B><B>start</B> <I>LoggerName</I></TD>
<TD width=52%>Starts a software trace named <I>LoggerName</I>. The name must uniquely identify a software trace.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%><B>–</B><B>stop</B> <I>LoggerName</I> </TD>
<TD width=52%>Stops the software trace named <I>LoggerName</I>.</TD>
</TR>
</TABLE><BR>

<P class=note><B>Note</B>&nbsp;&nbsp;There are many other options available, including options to configure a logger's trace buffer and to control system loggers.</P>

<H4>Location</H4>

<P>The Tracelog utility is located in the <I>tools\tracing</I> directory of the Windows DDK.</P>

<H4>Comments</H4>

<P>The Tracelog utility uses the <B>StartTrace</B> and <B>EnableTrace</B> functions (described in the Platform SDK documentation) to start and enable a software trace.</P>

<P>Each trace flag name specified in the driver's <A HREF="st_6p6b.htm">WPP_CONTROL_GUIDS</A> macro has a corresponding bit in <I>EnableFlags</I>. The flag names are assigned consecutively to the bits of the <I>EnableFlags</I> parameter, starting with bit 1 (the least significant bit), in the lexical order in which the flag names are defined. To enable a flag, set the corresponding bit to 1. More than one flag can be enabled at the same time. For example, to enable the flag named <I>NameOfTraceFlagOne</I>, set <I>EnableFlags </I>to 0x1, and to enable all possible flags, set <I>EnableFlags</I> to 0x7FFFFFFF.</P>

<P>Before a trace consumer can use the Tracelog utility, the consumer must create a control file that specifies one or more control GUIDs (the control GUID that a driver-provider registers with WMI for software tracing). The messages generated by a driver provider are handled by the logger specified by the <B>-start </B><I>LoggerName</I> option.</P>

<P>The control file is a text file that contains one or more lines, where each line specifies a control GUID and a friendly name for the GUID in the following format:</P>

<PRE><I>GUIDValue</I> <I>GUIDFriendlyName</I>
</PRE>

<TABLE>

<TR VALIGN="top">
<TH align=left width=28%>Control File Entry</TH>
<TH align=left width=72%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=28%><I>GUIDValue</I></TD>
<TD width=72%>Specifies the value of the GUID in the following format, which consists of five hyphen-separated fields that contain a total of 32 hexadecimal digits: "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX". The first field is 8 hexadecimal digits, followed by three fields, each with 4 hexadecimal digits, and the last field is 12 hexadecimal digits.</TD>
</TR>

<TR VALIGN="top">
<TD width=28%><I>GUIDFriendlyName</I></TD>
<TD width=72%>Specifies a name that identifies the control GUID. The friendly name is added, by default, to the formatted trace messages generated by the <A HREF="st_2ynn.htm">Tracefmt utility</A>.</TD>
</TR>
</TABLE><BR>

<P>Normally, a driver only needs to define one control GUID.</P>

<P>For an example of a control file entry, see <A HREF="st_1vg3.htm#ddk_running_a_software_tracing_session_for_the_tracedrv_sample_tools">Running a Software Tracing Session for the <I>tracedrv</I> Sample</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Tracelog%20Utility"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
