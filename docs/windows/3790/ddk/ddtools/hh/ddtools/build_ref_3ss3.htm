<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DLLDEF</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DLLDEF build macro">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_dlldef_tools"></A>DLLDEF</H1>

<P>Use the DLLDEF macro to specify the name of the <I>.def</I> file that the Build utility will pass to the librarian when building the export and import files.</P>

<P>If you do not set this value, the Build utility will assume it is the same name as the image you are building (in other words, equal to <B>$(TARGETNAME).def</B>).</P>

<P>The most common usage is:</P>

<PRE>DLLDEF=mydll.def
</PRE>

<P>Additionally, there is a standard inference rule that will run the C preprocessor over the <I>.def</I> or <I>.src</I> file in the current directory to create build-specific <I>.def</I> files in the object subdirectory. The same compiler define directives that you key off of in your source code can be used in the root <I>.def</I> or <I>.src</I> file to create the export list. To enable it, use something like:</P>

<PRE>DLLDEF=$O\mydll.def
</PRE>

<P>Here is an example of what <I>mydll.src</I> might look like:</P>

<PRE>; mydll.src
LIBRARY mydll
EXPORTS
#if defined(_X86_)
X86Routine
#elseif defined(_IA64_)
IA64Routine
#else
#error Unknown platform
#endif
// Grab some other exports from another file
#include "master.src"
</PRE>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DLLDEF"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
