<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KdPrint</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KdPrint">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_kdprint_tools"></A>KdPrint</H1>

<P><B>KdPrint</B> sends a string to the kernel debugger.</P>

<PRE class=syntax><B>ULONG
</B>  <B>KdPrint ( (</B>
    <B>IN PCHAR</B>  <I>Format</I><B>,
</B>    <B>. . . .</B>  [<I>arguments</I>]<B> 
</B>    <B>) ) ;</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>Format</I></DT>

<DD>Specifies a pointer to the format string to print, as in <B>printf</B>. The <I>Format</I> string supports the <B>printf</B>-style formatting codes. However, the Unicode format codes (<B>%C</B>, <B>%S</B>, <B>%lc</B>, <B>%ls</B>, <B>%wc</B>, <B>%ws</B>, <B>%wZ</B>) can only be used at IRQL PASSIVE_LEVEL.</DD>

<DT><I>arguments</I></DT>

<DD>Specifies arguments for the format string, as in <B>printf</B>.
</DD>
</DL>

<H4>Return Value</H4>

<P>If successful, <B>KdPrint</B> returns the NTSTATUS code STATUS_SUCCESS; otherwise it returns the appropriate error code.</P>

<H4>Headers</H4>

<P>This routine is defined in <I>ntddk.h</I>, <I>wdm.h</I>, and <I>ndis.h</I>. Include <I>ntddk.h</I>, <I>wdm.h</I>, or <I>ndis.h</I>.</P>

<H4>Comments</H4>

<P>This routine can only be used in Windows&nbsp;2000 and later.</P>

<P>The <B>KdPrint</B> routine is identical to <B>DbgPrint</B> in code that is compiled in a <A HREF="build_use_327n.htm">checked build environment</A>. This routine has no effect if compiled in a free build environment. Only kernel-mode drivers can call the <B>KdPrint</B> routine.</P>

<P>A call to this macro requires double parentheses.</P>

<P>Unless it is absolutely necessary, you should not obtain a string from user input or another process and pass it to <B>KdPrint</B>. If you <I>do</I> use a string that you did not create, you must verify that this is a valid format string, and that the format codes match the argument list in type and quantity. The best coding practice is for all <I>Format</I> strings to be static and defined at compile time.</P>

<P>The formatted string is sent to the <I>DbgPrint Buffer</I>. The contents of this buffer are displayed immediately in the Debugger Command window, unless this display has been disabled by using the Global Flags Editor (<I>gflags.exe</I>).</P>

<P>If this display has been disabled, the contents of the DbgPrint Buffer can only be viewed by using the <B>!dbgprint</B> extension command. For information on debugger extensions, see <A HREF="dbgblurb_25bn.htm">Debugging Tools for NT-Based Operating Systems</A>.</P>

<P>There is no upper limit to the size of the <I>Format</I> string or the number of arguments. However, the DbgPrint buffer can only hold 512 bytes of information. Any output longer than this will be lost.</P>

<H4>See Also</H4>

<P><A HREF="debugfns_9ecz.htm"><B>DbgPrint</B></A>, <A HREF="debugfns_6x9v.htm"><B>DbgPrintEx</B></A>, <A HREF="debugfns_1ier.htm"><B>KdPrintEx</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KdPrint"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
