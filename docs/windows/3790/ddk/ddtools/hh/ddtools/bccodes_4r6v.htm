<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Bug Check 0x85:  SETUP_FAILURE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="bug check 0x85">
<META NAME="MS-HKWD" CONTENT="SETUP_FAILURE">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_bug_check_0x85_bug"></A>Bug Check 0x85: SETUP_FAILURE</H1>

<P>The SETUP_FAILURE bug check has a value of 0x00000085. This indicates that a fatal error occurred during setup.</P>

<H4>Parameters</H4>

<P>The following parameters are displayed on the blue screen. Parameter&nbsp;1 indicates the type of violation. Parameter&nbsp;4 is not used. The meaning of the other parameters depends on the value of Parameter&nbsp;1.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=11%>Parameter 1</TH>
<TH align=left width=30%>Parameter 2</TH>
<TH align=left width=22%>Parameter 3</TH>
<TH align=left width=37%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=11%>0x0</TD>
<TD width=30%>0 </TD>
<TD width=22%>0 </TD>
<TD width=37%>The OEM HAL font is not a valid <I>.fon</I> format file, and so setup is unable to display text. 
<P>This indicates that <I>vgaxxx.fon</I> on the boot floppy or CD-ROM is damaged. </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x1</TD>
<TD width=30%>The precise video initialization failure:
<P><B>0:</B> <B>NtCreateFile</B> of \device\video0 </P>

<P><B>1:</B> IOCTL_VIDEO_QUERY_NUM_AVAIL_MODES </P>

<P><B>2:</B> IOCTL_VIDEO_QUERY_AVAIL_MODES </P>

<P><B>3:</B> The desired video mode is not supported. This is indicative of an internal setup error. </P>

<P><B>4:</B> IOCTL_VIDEO_SET_CURRENT_MODE (unable to set video mode) </P>

<P><B>5:</B> IOCTL_VIDEO_MAP_VIDEO_MEMORY </P>

<P><B>6:</B> IOCTL_VIDEO_LOAD_AND_SET_FONT </P>
</TD>
<TD width=22%>The status code from the NT API call, if appropriate </TD>
<TD width=37%>Video initialization failed.
<P>This may indicate that the disk containing <I>vga.sys</I> (or other video driver appropriate to the machine) is damaged, or that machine has video hardware that Windows cannot communicate with.    </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x2</TD>
<TD width=30%>0 </TD>
<TD width=22%>0 </TD>
<TD width=37%>Out of memory.   </TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x3</TD>
<TD width=30%>The precise keyboard initialization failure:
<P><B>0:</B> <B>NtCreateFile</B> of \device\KeyboardClass0 failed. (Setup did not find a keyboard connected to the computer.)</P>

<P><B>1:</B> Unable to load keyboard layout DLL. (Setup could not load the keyboard layout file This indicates that the CD or floppy is missing a file — <I>kbdus.dll</I> for the U.S. release, or another layout DLL for localized releases.) </P>
</TD>
<TD width=22%>0 </TD>
<TD width=37%>Keyboard initialization failed.
<P>This may indicate that the disk containing the keyboard driver (<I>i8042prt.sys</I> or <I>kbdclass.sys</I>) is damaged, or that the machine has keyboard hardware that Windows cannot communicate with. It may also mean that the keyboard layout DLL could not be loaded.    </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x4</TD>
<TD width=30%>0 </TD>
<TD width=22%>0 </TD>
<TD width=37%>Setup was unable to resolve the ARC device pathname of the device from which setup was started.
<P>This is an internal setup error. </P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=11%>0x5</TD>
<TD width=30%>Reserved</TD>
<TD width=22%>Reserved</TD>
<TD width=37%>Partitioning sanity check failed.
<P>This indicates a bug in a disk driver.    </P>
</TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Bug%20Check%200x85:%20%20SETUP_FAILURE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
