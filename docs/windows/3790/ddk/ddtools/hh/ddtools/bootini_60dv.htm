<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Identifying Backup Files for Existing Boot Entries</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Identifying Backup Files for Existing Boot Entries">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_identifying_backup_files_for_existing_boot_entries_tools"></A>Identifying Backup Files for Existing Boot Entries</H4>

<P>It is prudent to find the backup files for boot entries before you need them urgently. Then, when you need them, you know where they are. </P>

<P>To search for the Boot<I>xxxx</I> backup file for a boot entry by name, you need the entry's NVRAM boot entry ID. However, neither Bootcfg nor Nvrboot display this ID.</P>

<P>Instead, you can use either Bootcfg or Nvrboot to find the directory for the installation on the EFI partition. The directory appears in the path to the boot loader file for the operating system installation. The boot entry backup file for the installation is stored in the same directory.</P>

<P>Use the <B>nvrboot&nbsp;d</B> (display) command or the <B>bootcfg&nbsp;query</B> command to display the path to the directory in which the boot loader for the operating system is stored.</P>

<P class=note><B>Note</B>&nbsp;&nbsp;The <B>Boot entry ID</B> field in Bootcfg and the boot entry number in Nvrboot do <I>not</I> display the value of the NVRAM boot entry ID. The Bootcfg and Nvrboot IDs are line numbers that represent the order of the boot entry in the <B>Boot Entries</B> section and change when the entries are reordered.</P>

<P>As shown in the following Bootcfg sample, the path to the boot loader file appears in the <B>BootFilePath</B> field. </P>

<P>Bootcfg displays the file location as a partition object name followed by the file system path to the boot loader file.</P>

<PRE>Boot Entries
------------
Boot entry ID:    1
OS Friendly Name: Windows Server 2003, Enterprise
OsLoadOptions:     /debug /debugport=COM1 /baudrate=115200
<B>BootFilePath:     \Device\HarddiskVolume1\EFI\Microsoft\WINNT50\ia64ldr.efi</B>
OsFilePath:       \Device\HarddiskVolume3\WINDOWS
</PRE>

<P>In the following sample of a Nvrboot display, the path to the boot loader file for an operating system installation appears in the <B>EFIOSLoaderFilePath</B> field.</P>

<P>Nvrboot displays the file location as a partition GUID followed by the path to the boot loader file.</P>

<PRE>1. Load identifier = Windows Server 2003, Enterprise
2. OsLoadOptions = /debug /debugport=COM1 /baudrate=115209
<B>3. EFIOSLoaderFilePath = 006F0073-0066-0074-5C00-570049004E00  ::  \EFI\Microsoft\WINNT50\ia64ldr.efi</B>
4. OSLoaderFilePath = 04000004-5D18-3F27-0000-0000205C273F  :: \Windows
</PRE>

<P>In both cases, the boot loader file (and the Boot<I>xxxx</I> boot entry backup file) for the operating system are in the WINNT50 directory of the EFI system partition (EFI\Microsoft\WINNT50).</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Identifying%20Backup%20Files%20for%20Existing%20Boot%20Entries"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
