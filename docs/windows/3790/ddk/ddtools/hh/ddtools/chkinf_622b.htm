<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>ChkINF</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="ChkINF">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_chkinf_tools"></A>ChkINF</H1>

<P>The <B>INF File Syntax Checker</B>, or <B>ChkINF</B>, is a Perl script that checks the structure and syntax of Microsoft® Windows®&nbsp;2000 and Windows&nbsp;XP driver <I>.inf</I> files. Results are presented in HTML format, and include a list of the errors and warnings detected in each <I>.inf</I> file, with each error and warning shown next to the errant <I>.inf</I> file entry. Note that ChkINF does not support Windows&nbsp;98 or Windows&nbsp;Me <I>.inf</I> files.</P>

<P>The ChkINF tool includes support for all <I>.inf</I> sections and directives that apply to all classes of devices.</P>

<P>In addition, ChkINF has device-class-specific support for many device classes. It also can check <I>.inf</I> files used for installing many classes of file system drivers. For a complete list of these classes, see the <I>chkinf.htm</I> file that is located in the <I>Tools\chkinf</I> subdirectory of the DDK.</P>

<P>ChkINF has not been extensively tested. Review your results carefully. </P>

<H2>Running the Tool</H2>

<P>Because ChkINF is a Perl script, in order to use the tool you will need to obtain a Perl interpreter. ChkINF requires a Perl interpreter that is Version 5.003_07 or greater. ChkINF should work with any version of Perl 5.0 or greater, but has not been tested with any versions previous to 5.003_07.</P>

<P>ChkINF has been tested with the following Perl interpreters: 

<UL>
	<LI>GNU Perl 5.005_02 compiled for Win32® </LI>

	<LI>GNU Perl 5.6.0 compiled for Win32</LI>

	<LI>Perl for Win32 5.003_07 from ActiveWare Internet Corp. </LI>

	<LI>ActivePerl 5.6.1.631 from ActiveState (see the <A HREF="http://go.microsoft.com/fwlink/?linkid=10003&clcid=0x409" TARGET="_blank">ActiveState</A> Web site)</LI>
</UL>

<P>Microsoft neither endorses nor recommends any specific Perl interpreters.</P>

<P>ChkINF is located in the <I>%DDKRoot%\Tools\Chkinf</I> subdirectory, and should be executed from an MS-DOS® Command prompt.</P>

<P>A batch file, <I>ChkINF.bat</I>, is provided for smooth execution. This batch file can be executed by using the following syntax:</P>

<PRE class=syntax><B>chkinf</B> <I>FileList</I> [<B>/L</B> <I>LogFile</I>] [<B>/B</B>] [<B>/LO</B>] [<B>/DC</B> <I>Options</I>] 
</PRE>

<H4>Parameters</H4>

<DL>
<DT><I>FileList</I></DT>

<DD>Specifies the files to be used. This can be the name of a single <I>.inf</I> file or a directory name. If a directory is specified, ChkINF will look for all <I>.inf</I> files in this directory. Wildcards may be used (for example, <B>net*.inf</B>). ChkINF will first expand all wildcards, and then process all applicable <I>.inf</I> files.</DD>

<DT><B>/L </B><I>LogFile</I></DT>

<DD>Specifies the name of the log file to be created.</DD>

<DT><B>/B</B></DT>

<DD>Causes the default browser to be launched. ChkINF results will be displayed in this browser.</DD>

<DT><B>/LO</B></DT>

<DD>Causes ChkINF to compare all copied files (CopyFiles) with <I>Layout.inf</I>.</DD>

<DT><B>/DC</B><I> Options</I></DT>

<DD>Specifies the device class-specific options that ChkINF should use when checking <I>.inf</I> files. At present, the only supported option is <B>NOFAX</B>, which instructs ChkINF not to check any Fax keys present in modem <I>.inf</I> files.


</DD>
</DL>

<H2>Output</H2>

<P>ChkINF produces three types of files at the end of the checking process.

<UL>
	<LI><I>Summary.htm</I>. This is a single HTML file that lists all of the <I>.inf</I> files that were checked, along with the number of errors and warnings detected in each one. The name of each <I>.inf</I> file is linked to the respective <I>.htm</I> file described in the <B>File Manifest</B> section.</LI>

	<LI>Individual <I>.htm</I> results files. For each checked <I>.inf</I> file, a file with the same name and an <I>.htm</I> extension is created. This includes a log of the results for that <I>.inf</I> file.</LI>

	<LI>A log file. This will be created if the <B>/L</B> option is used on the ChkINF command line.</LI>
</UL>

<P>The individual <I>.htm</I> results files include the following sections:

<DL>
<DT><B>Errors</B> </DT>

<DD>A list of the errors found in the <I>.inf</I> file, along with the error message and the line in the <I>.inf</I> file where it was detected. Each error includes a link to its location in the <B>Annotated INF</B> section.</DD>

<DT><B>Warnings</B> </DT>

<DD>A list of the warnings detected in the <I>.inf</I> file, along with the warning message and the line in the <I>.inf</I> file where it was detected. Each warning includes a link to its location in the <B>Annotated INF</B> section.</DD>

<DT><B>Sections included from other infs</B> </DT>

<DD>A list of the sections included from other <I>.inf</I> files. Each section listed includes a link to its location in the <B>Sections included from other infs</B> section. This item is omitted if the <I>.inf</I> being checked did not include any sections from other <I>.inf</I> files.</DD>

<DT><B>Annotated INF</B> </DT>

<DD>The complete source for the <I>.inf</I> file, with the warning and error messages displayed adjacent to the line where the warning or error was detected.</DD>

<DT><B>Sections included from other infs</B> </DT>

<DD>The complete source for the included sections, with warning and error messages displayed adjacent to the line where the warning or error was detected. This section is omitted if the <I>.inf</I> file being checked did not include any sections from other <I>.inf</I> files. 
</DD>
</DL>

<P>These files are saved into the subdirectory <I>htm</I>, located off the directory from which ChkINF is invoked. </P>

<H2>Limitations</H2>

<P>ChkINF does not support Windows&nbsp;98 or Windows&nbsp;Me <I>.inf</I> files. ChkINF will not accurately check <I>.inf</I> structure and syntax that is specific to Windows&nbsp;98/Me <I>.inf</I> files. </P>

<P>The tool does not perform device-class-specific testing, with the exception of the device classes listed in the <I>chkinf.htm</I> file (located in the <I>Tools\chkinf</I> subdirectory of the DDK.)</P>

<P>ChkINF has been tested with the following Perl interpreters: 

<UL>
	<LI>GNU Perl 5.005_02 compiled for Win32® </LI>

	<LI>GNU Perl 5.6.0 compiled for Win32</LI>

	<LI>Perl for Win32 5.003_07 from ActiveWare Internet Corp. </LI>

	<LI>ActivePerl 5.6.1.631 from ActiveState (see the <A HREF="http://go.microsoft.com/fwlink/?linkid=10003&clcid=0x409" TARGET="_blank">ActiveState</A> Web site)</LI>
</UL>

<P>ChkINF now includes limited support for <I>.inf</I> files saved in Unicode format (including Unicode Big Endian and UTF8), but there are some existing problems with the support for extended characters. If problems are encountered with <I>.inf</I> files in Unicode format, save the file as an ASCII text file and then run the tool. </P>

<P>ChkINF must be executed on the target platform in order to accurately check sections included from other <I>.inf</I> files via <B>Include</B> and <B>Needs</B> directives. </P>

<P>ChkINF issues warnings for any sections that are not referenced by a directive elsewhere in the <I>.inf</I> file. This is a change from previous versions of the tool, which reported errors for un-referenced sections. </P>

<P>ChkINF does not check for all relevant Registry keys set by an <I>.inf</I> file. An <I>.inf</I> file that passes with no errors may not function correctly. </P>

<P>ChkINF incorrectly reports an error if a single named service uses different binary names on the x86 and IA-64 platforms. </P>

<H2>File Manifest</H2>

<P>Here is a description of the files used by ChkINF.

<DL>
<DT><I>ChkInf.bat </I></DT>

<DD>Batch file for smooth execution. (See <B>Running the Tool</B> for the syntax used.) </DD>

<DT><I>ChkInf.htm </I></DT>

<DD>ChkINF readme (identical to this documentation).</DD>

<DT><I>ChkInf.pm </I></DT>

<DD>Main module.</DD>

<DT><I>InfFile.pm </I></DT>

<DD>ChkINF internal support module.</DD>

<DT><I>Infrastructure.pm </I></DT>

<DD>ChkINF internal support module.</DD>

<DT><I>InfSection.pm </I></DT>

<DD>ChkINF internal support module.</DD>

<DT><I>SmartGlob.pm </I></DT>

<DD>ChkINF internal support module.</DD>

<DT><I>1394.pm </I></DT>

<DD>1394 Host Bus Controllers device class specific module. </DD>

<DT><I>61883.pm </I></DT>

<DD>1394 devices that support the 61883 protocol device class specific module. </DD>

<DT><I>AVC.pm </I></DT>

<DD>1394 devices that support the AVC protocol device class specific module. </DD>

<DT><I>Battery.pm </I></DT>

<DD>Battery device class specific module. </DD>

<DT><I>CDROM.pm </I></DT>

<DD>CD-ROM device class specific module. </DD>

<DT><I>DiskDrive.pm </I></DT>

<DD>Disk Drive device class specific module. </DD>

<DT><I>Display.pm </I></DT>

<DD>Display device class specific module. </DD>

<DT><I>Dot4.pm </I></DT>

<DD>Dot4 device class specific module. </DD>

<DT><I>Dot4Print.pm </I></DT>

<DD>Dot4 printer device class specific module. </DD>

<DT><I>FaxReg.pm </I></DT>

<DD>Modem device class specific sub-module.  </DD>

<DT><I>FDC.pm </I></DT>

<DD>Floppy Disk Controller device class specific module. </DD>

<DT><I>FloppyDisk.pm </I></DT>

<DD>Floppy Disk Drives device class specific module. </DD>

<DT><I>Generic.pm </I></DT>

<DD>"Generic" module for devices for which a device class specific module does not yet exist.  </DD>

<DT><I>HDC.pm </I></DT>

<DD>Hard Disk Controllers device class specific module. </DD>

<DT><I>HIDClass.pm </I></DT>

<DD>Human Interface Device device class specific module. </DD>

<DT><I>Image.pm </I></DT>

<DD>Image device class specific module.  </DD>

<DT><I>Infrared.pm </I></DT>

<DD>Infrared (IrDA) device class specific module. </DD>

<DT><I>Keyboard.pm </I></DT>

<DD>Keyboard device class specific module. </DD>

<DT><I>Media.pm </I></DT>

<DD>Multimedia device class specific module. </DD>

<DT><I>MediumChanger.pm </I></DT>

<DD>Medium Changers device class specific module. </DD>

<DT><I>Modem.pm </I></DT>

<DD>Modem device class specific module.  </DD>

<DT><I>Monitor.pm </I></DT>

<DD>Monitor device class specific module.  </DD>

<DT><I>Mouse.pm </I></DT>

<DD>Mouse device class specific module. </DD>

<DT><I>MTD.pm </I></DT>

<DD>Memory Technology Driver device class specific module. </DD>

<DT><I>Multifunction.pm </I></DT>

<DD>Multifunction Devices device class specific module. </DD>

<DT><I>MultiportSerial.pm </I></DT>

<DD>Multi-port Serial Adapter device class specific module. </DD>

<DT><I>Net.pm </I></DT>

<DD>Net (network adapter) device class specific module. </DD>

<DT><I>NetClient.pm </I></DT>

<DD>Network Client device class specific module. </DD>

<DT><I>NetService.pm </I></DT>

<DD>Network Service device class specific module. </DD>

<DT><I>NetTrans.pm </I></DT>

<DD>Network Transport device class specific module. </DD>

<DT><I>PCMCIA.pm </I></DT>

<DD>PCMCIA Adapter device class specific module. </DD>

<DT><I>PnPPrinters.pm </I></DT>

<DD>PnP Printers device class specific module. </DD>

<DT><I>Ports.pm </I></DT>

<DD>Ports device class specific module. </DD>

<DT><I>Printer.pm </I></DT>

<DD>Printer device class specific module.  </DD>

<DT><I>Processor.pm </I></DT>

<DD>Processor device class specific module.  </DD>

<DT><I>SBP2.pm </I></DT>

<DD>1394 devices that support the SBP2 protocol device class specific module. </DD>

<DT><I>SCSIAdapter.pm </I></DT>

<DD>SCSI and RAID Controllers device class specific module. </DD>

<DT><I>SmartCardReader.pm </I></DT>

<DD>Smart Card Readers device class specific module. </DD>

<DT><I>System.pm </I></DT>

<DD>System device class specific module. </DD>

<DT><I>TapeDrive.pm </I></DT>

<DD>Tape Drives device class specific module. </DD>

<DT><I>USB.pm </I></DT>

<DD>USB device class specific module. </DD>

<DT><I>Volume.pm </I></DT>

<DD>Storage Volumes device class specific module. </DD>

<DT><I>WCEUSBS.pm </I></DT>

<DD>Windows CE USB Active Sync device class specific module. </DD>

<DT><I>ActivityMonitor.pm </I></DT>

<DD>Activity Monitor file system filter module.  </DD>

<DT><I>AntiVirus.pm </I></DT>

<DD>Anti-Virus file system filter module.  </DD>

<DT><I>CFSMetaDataSErver.pm </I></DT>

<DD>CFS Meta Data Server file system filter module.  </DD>

<DT><I>Compression.pm </I></DT>

<DD>Compression file system filter module.  </DD>

<DT><I>ContentScreener.pm </I></DT>

<DD>Content Screener file system filter module.  </DD>

<DT><I>ContinuousBackup.pm </I></DT>

<DD>Continuous Backup file system filter module.  </DD>

<DT><I>CopyProtection.pm </I></DT>

<DD>Copy Protection file system filter module.  </DD>

<DT><I>Encryption.pm </I></DT>

<DD>Encryption file system filter module.  </DD>

<DT><I>FSFilterSystem.pm </I></DT>

<DD>File System Filters module.  </DD>

<DT><I>HSM.pm </I></DT>

<DD>HSM file system filter module.  </DD>

<DT><I>OpenFileBackup.pm </I></DT>

<DD>Open File Backup file system filter module.  </DD>

<DT><I>PhysicalQuotaManagement.pm </I></DT>

<DD>Physical Quota Management file system filter module.  </DD>

<DT><I>QuotaManagement.pm </I></DT>

<DD>Quota Management file system filter module.  </DD>

<DT><I>Replication.pm </I></DT>

<DD>Replication file system filter module.  </DD>

<DT><I>SecurityEnhancer.pm </I></DT>

<DD>Security Enhancer file system filter module.  </DD>

<DT><I>Undelete.pm </I></DT>

<DD>Undelete file system filter module.  




</DD>
</DL>

<P></P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: ChkINF"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
