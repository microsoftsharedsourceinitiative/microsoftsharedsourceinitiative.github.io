<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Bug Check 0x79:  MISMATCHED_HAL</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="bug check 0x79">
<META NAME="MS-HKWD" CONTENT="MISMATCHED_HAL">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_bug_check_0x79_bug"></A>Bug Check 0x79: MISMATCHED_HAL</H1>

<P>The MISMATCHED_HAL bug check has a value of 0x00000079. This indicates that the Hardware Abstraction Layer (HAL) revision level or configuration does not match that of the kernel or the machine.</P>

<H4>Parameters</H4>

<P>The following parameters are displayed on the blue screen. Parameter&nbsp;1 indicates the type of mismatch.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=18%>Parameter 1</TH>
<TH align=left width=29%>Parameter 2</TH>
<TH align=left width=29%>Parameter 3</TH>
<TH align=left width=24%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=18%>1</TD>
<TD width=29%>Major PRCB level of <I>ntoskrnl.exe</I></TD>
<TD width=29%>Major PRCB level of <I>hal.dll</I></TD>
<TD width=24%>PRCB release level mismatch</TD>
</TR>

<TR VALIGN="top">
<TD width=18%>2</TD>
<TD width=29%>Build type of <I>ntoskrnl.exe</I></TD>
<TD width=29%>Build type of <I>hal.dll</I></TD>
<TD width=24%>Build type mismatch</TD>
</TR>
</TABLE><BR>

<P>When Parameter&nbsp;1 equals two, the following build type codes are used:

<UL>
	<LI>0: Multiprocessor-enabled free build</LI>

	<LI>1: Multiprocessor-enabled checked build</LI>

	<LI>2: Single-processor free build</LI>
</UL>

<H4>Cause</H4>

<P>This error often results from the user manually updating either <I>ntoskrnl.exe </I>or <I>hal.dll</I>.</P>

<P>The error can also indicate that one of those two files is out of date. For example, the HAL might be designed for Microsoft Windows NT® 4.0 while the kernel is designed for Windows&nbsp;2000. Or the machine might erroneously have a multiprocessor HAL and a single-processor kernel installed, or vice versa.</P>

<P>The kernel file <I>ntoskrnl.exe</I> is for single-processor systems and <I>ntkrnlmp.exe </I>is for multiprocessor systems. However, these filenames correspond to the files on the installation media; after Windows has been installed, the file is renamed to <I>ntoskrnl.exe</I>, regardless of the source file used. The HAL file also uses the name<I> hal.dll</I> after installation, but there are several possible HAL files on the installation media. See <A HREF="checked_7njn.htm">Installing Just the Checked Operating System and HAL</A> for details.  </P>

<H4>Resolving the Problem</H4>

<P>Restart the computer using either the product CD or the Windows Setup disks. At the Welcome screen, press F10 to start the Recovery Console. Use the <B>Copy</B> command to copy either the correct HAL or kernel file from the original CD into the appropriate folder on the hard disk. The <B>Copy</B> command detects whether the file to be copied is in the Microsoft compressed file format. If so, it automatically expands the file copied on the target drive.  </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Bug%20Check%200x79:%20%20MISMATCHED_HAL"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
