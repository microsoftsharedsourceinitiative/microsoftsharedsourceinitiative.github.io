<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Customized Halftoning</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Customized Halftoning">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_gpd_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_customized_halftoning_gg"></A>Customized Halftoning</H3>

<P>Unidrv allows halftoning operations to be performed by GDI, by the printer device, or by customized driver code. This section explains how to perform halftoning operations in customized driver code.</P>

<P>Two types of customization are available:

<UL>
	<LI>Customized halftone patterns </LI>

	<LI>Customized halftoning methods </LI>
</UL>



<H4><A NAME="ddk_customized_halftone_patterns_gg"></A>Customized Halftone Patterns</H4>

<P>Halftone patterns can be specified in a resource DLL, or they can be generated by a rendering plug-in that implements the <A HREF="drvrfnc_2q7b.htm"><B>IPrintOemUni::HalftonePattern</B></A> method. <B>IPrintOemUni::HalftonePattern</B> should be implemented if either of the following is true:

<UL>
	<LI>Customized patterns are provided in a resource DLL, and the patterns are encrypted.</LI>

	<LI>Customized patterns are not provided in a resource DLL. Instead, they are generated by <A HREF="drvrfnc_2q7b.htm"><B>IPrintOemUni::HalftonePattern</B></A>.</LI>
</UL>

<P>The <B>IPrintOemUni::HalftonePattern</B> method's purpose is to return a usable halftone pattern to Unidrv, which in turn passes it to GDI. The method can either decode a pattern that is stored in a resource DLL in an encrypted form, or it can generate a pattern during execution.</P>

<P>If you implement the <A HREF="drvrfnc_2q7b.htm"><B>IPrintOemUni::HalftonePattern</B></A> method, your <A HREF="JavaScript:hhobj_1.Click()">generic printer description (GPD)</A> file must include an <A HREF="nt5gpd_1mhz.htm#ddk__htcallbackid_gg">*<B>HTCallbackID</B></A> attribute in each halftoning <A HREF="nt5gpd_78yv.htm#ddk__option_gg">*<B>Option</B></A> entry that specifies a halftoning method for which a customized pattern is used. For more information about this attribute, see <A HREF="nt5gpd_1mhz.htm">Option Attributes for the Halftone Feature</A>.</P>



<H4><A NAME="ddk_customized_halftoning_methods_gg"></A>Customized Halftoning Methods</H4>

<P>For a printer that uses Unidrv, providing code that implements customized halftoning methods requires the following steps:

<OL>
	<LI>Provide a rendering plug-in that implements the <A HREF="drvrfnc_5xgn.htm"><B>IPrintOemUni::ImageProcessing</B></A> method.</LI>

	<LI>Include a Halftone <A HREF="nt5gpd_6d5z.htm#ddk__feature_gg">*<B>Feature</B></A> entry in the printer's GPD file, with each contained <A HREF="nt5gpd_78yv.htm#ddk__option_gg">*<B>Option</B></A> entry representing a halftoning method. (Standard and customized halftoning methods can both be included.)</LI>
</OL>

<P>The <B>IPrintOemUni::ImageProcessing</B> method receives GDI bitmaps as input. The method must perform halftoning operations, based on the currently selected halftoning method, and return the resulting bitmap to Unidrv.</P>

<P>If a rendering plug-in implements <A HREF="drvrfnc_5xgn.htm"><B>IPrintOemUni::ImageProcessing</B></A>, it can also implement the <A HREF="drvrfnc_9btz.htm"><B>IPrintOemUni::MemoryUsage</B></A>.</P>

<P>For more information about halftoning, see <A HREF="nt5gpd_77s7.htm">Halftoning with Unidrv</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Customized%20Halftoning"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
