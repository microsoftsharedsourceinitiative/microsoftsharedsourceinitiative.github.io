<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Hardware Emulation Layer</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Hardware Emulation Layer">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_hardware_emulation_layer_gg"></A>Hardware Emulation Layer</H2>

<P>The DirectDraw hardware emulation layer (HEL) performs emulation for the DirectDraw driver. The HEL (written by Microsoft as part of DirectDraw) performs this emulation in user mode.</P>

<P>For example, if the DirectDraw driver has capability (<I>caps</I>) bits set for blts but not for transparent blts, the DirectDraw driver is called for blts and the HEL for transparent blts. In the case of a transparent blt, the HEL is passed a display memory pointer and it compares each byte from a backing surface to the color key. If the byte does not match the color key, the HEL copies it to the destination surface using the CPU. This emulation also occurs for other unsupported operations or if the card is out of display memory. </P>

<P>DirectDraw does not pass failed DirectDraw driver operations to the HEL. If either the HEL or the DirectDraw driver fails a particular operation, an error code is returned to the application. </P>

<P class=note><B>Note for Windows 98/Me</B>&nbsp;&nbsp;On a small number of low-end cards that do not have DirectDraw-capable drivers, DirectDraw can access the card by using the generic frame buffer (<I>Framebuf</I>) display driver. This driver can only lock, unlock, and flip. If there is no DirectDraw driver, and <I>Framebuf</I> does not work on the card, DirectDraw uses the HEL for everything, which is still much faster than running all operations through the GDI and the DIB engine. In the absence of DirectDraw support, the HEL also can use the display control interface (DCI) support in the driver to access the primary surface.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Hardware%20Emulation%20Layer"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
