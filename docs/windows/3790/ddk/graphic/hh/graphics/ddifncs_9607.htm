<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DrvDeriveSurface</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DrvDeriveSurface">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_drvderivesurface_gg"></A><I>DrvDeriveSurface</I></H1>

<P>The <I>DrvDeriveSurface</I> function derives a GDI surface from the specified DirectDraw surface.</P>

<PRE class=syntax><B>HBITMAP
  </B><I>DrvDeriveSurface</I><B>(</B>
    <B>DD_DIRECTDRAW_GLOBAL</B>  <I>*pDirectDraw</I><B>,
    DD_SURFACE_LOCAL  </B><I>*pSurface</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>pDirectDraw</I></DT>

<DD>Pointer to a <A HREF="ddstrcts_32nb.htm">DD_DIRECTDRAW_GLOBAL</A> structure that describes the DirectDraw object.</DD>

<DT><I>pSurface</I></DT>

<DD>Pointer to a <A HREF="ddstrcts_1vl4.htm">DD_SURFACE_LOCAL</A> structure that describes the DirectDraw surface around which to wrap a GDI surface.
</DD>
</DL>

<H4>Return Value</H4>

<P><I>DrvDeriveSurface</I> returns a handle to the derived GDI surface upon success. It returns NULL if the call fails or if the driver cannot accelerate GDI drawing to the specified DirectDraw surface.</P>

<H4>Headers</H4>

<P>Declared in <I>winddi.h</I>. Include <I>winddi.h</I>.</P>

<H4>Comments</H4>

<P><I>DrvDeriveSurface</I> allows the driver to create a GDI surface wrapped around a DirectDraw video memory or AGP surface object in order to allow accelerated GDI drawing to the surface. If the driver does not hook this call, all GDI drawing to DirectDraw surfaces is done in software using the DIB engine.</P>

<P>GDI calls <I>DrvDeriveSurface</I> with RGB surfaces only.</P>

<P>The driver should call <A HREF="ddifncs_5x5z.htm"><I>DrvCreateDeviceBitmap</I></A> to create a GDI surface of the same size and format as that of the DirectDraw surface. Space for the actual pixels need not be allocated since it already exists.</P>

<H4>See Also</H4>

<P><A HREF="gdifncs_7a1z.htm"><B>EngCreateDeviceBitmap</B></A>, <A HREF="ddifncs_5x5z.htm"><I>DrvCreateDeviceBitmap</I></A>, <A HREF="gdifncs_13c8.htm"><B>EngModifySurface</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DrvDeriveSurface"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
