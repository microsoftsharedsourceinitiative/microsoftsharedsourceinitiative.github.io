<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Clamping Fog Intensity Per Pixel</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Clamping Fog Intensity Per Pixel">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_clamping_fog_intensity_per_pixel_gg"></A>Clamping Fog Intensity Per Pixel</H3>

<P>A DirectX 9.0 version driver for a device that supports either pixel or vertex shader version 2.0 and later must indicate that its device supports clamping the fog intensity value on a per-pixel basis by setting the D3DPMISCCAPS_FOGINFVF capability bit. This informs users that the device does not save the fog factor in the specular alpha channel when using software vertex shaders. The device can pass the alpha channel of the specular color (computed in the fixed function vertex pipeline) to the pixel processing unit, instead of always overwriting the alpha channel with the per-vertex fog intensity value.</P>

<P>Because the driver clamps the fog intensity value on a per-pixel basis, the runtime for DirectX 9.0 and later no longer clamps the fog intensity value before  sending it to the driver.</P>

<P>The driver determines how to obtain the fog value by verifying if the D3DFVF_FOG bit in the flexible vertex format (FVF) is set. If D3DFVF_FOG is set, the driver obtains the separate fog value that is passed per vertex. If D3DFVF_FOG is not set and the driver must use fog, the driver obtains the fog value from the specular color's alpha channel.</P>

<P>When the driver sets D3DPMISCCAPS_FOGINFVF, the runtime in turn sets the D3DPMISCCAPS_FOGANDSPECULARALPHA capability bit in the <B>PrimitiveMiscCaps</B> member of the D3DCAPS9 structure. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Clamping%20Fog%20Intensity%20Per%20Pixel"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
