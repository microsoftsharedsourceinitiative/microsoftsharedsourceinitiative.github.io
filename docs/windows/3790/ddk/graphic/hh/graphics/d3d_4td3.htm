<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Imposing Requirements on the D3dDrawPrimitives2 DDI</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_imposing_requirements_on_the_d3ddrawprimitives2_ddi_gg"></A>Imposing Requirements on the D3dDrawPrimitives2 DDI</H4>

<P>The ability of a DirectX 9.0 version driver to handle asynchronous queries imposes two new requirements on the driver's <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A> function. These requirements, which are mentioned in the <A HREF="d3d_4uqv.htm">Handling Asynchronous Queries</A> topic, are summarized in the following list:

<UL>
	<LI>The driver's <I>D3dDrawPrimitives2</I> function must ensure that it can process empty command buffers because the runtime might submit them so that the driver can write more responses. The runtime submits empty command buffers in the incoming command stream if the driver previously returned the <A HREF="d3denum_0jon.htm#ddk_d3ddp2op_responsecontinue_gg">D3DDP2OP_RESPONSECONTINUE</A> operation code in the response buffer.</LI>

	<LI>On success of <I>D3dDrawPrimitives2</I> (<B>ddrval</B> of the <A HREF="d3dstrct_47fr.htm">D3DHAL_DRAWPRIMITIVES2DATA</A> structure set to D3D_OK), the driver must ensure that it only sets the <B>dwErrorOffset</B> member of D3DHAL_DRAWPRIMITIVES2DATA to nonzero when responses are available. If the driver does not respond to any queries and <B>ddrval</B> is D3D_OK, <B>dwErrorOffset</B> must be set to zero.</LI>
</UL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Imposing%20Requirements%20on%20the%20D3dDrawPrimitives2%20DDI"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
