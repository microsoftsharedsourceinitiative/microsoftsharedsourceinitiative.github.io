<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Communicating IOCTLs to the Video Miniport Driver</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Communicating IOCTLs to the Video Miniport Driver">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_defining_i_o_control_codes_kg">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_communicating_ioctls_to_the_video_miniport_driver_gg"></A>Communicating IOCTLs to the Video Miniport Driver</H2>

<P>The following figure shows how the display driver communicates with the video miniport driver using IOCTLs.</P>

<P><IMG SRC="images/dpy2.gif" ALT="" BORDER=0></P>

<P><B>Display Driver/Video Miniport Driver Communication</B></P>

<P>The display driver calls <A HREF="gdifncs_1607.htm"><B>EngDeviceIoControl</B></A> with an IOCTL to send a synchronous request to the video miniport driver. GDI uses a single buffer for both input and output to pass the request to the I/O subsystem. The I/O subsystem routes the request to the video port, which processes the request with the video miniport driver.</P>

<P>Some IOCTL requests require the miniport driver to access video registers, and others store or retrieve information from the miniport driver’s data structures. Generally, no requests require the video miniport driver to perform actual drawing operations.</P>

<P>In general, and unless modularity dictates otherwise, the display driver handles drawing and other time-critical operations. Sending an IOCTL to the miniport driver to perform a time-critical function can degrade system performance.</P>

<P>See <A HREF="virqs_2raf.htm">Video I/O Control Codes</A><I> </I>for descriptions of system-defined video IOCTLs. You can extend the interface between the display driver and the video miniport driver by adding a <I>private IOCTL</I>, which must be formatted as described in <A HREF="JavaScript:hhobj_1.Click()">Defining I/O Control Codes</A>. If you need to write a new IOCTL, you should first contact Microsoft Technical Support.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Communicating%20IOCTLs%20to%20the%20Video%20Miniport%20Driver"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
