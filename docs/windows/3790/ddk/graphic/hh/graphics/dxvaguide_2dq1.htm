<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Motion Vectors</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_b_picture_kg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_p_picture_kg_gly">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_obmc_kg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_motion_vectors_kg_gly"></A>Motion Vectors</H4>

<P>If the picture is not an intra picture (the <B>bPicIntra</B> member of the <A HREF="dxvaref_9oyv.htm">DXVA_PictureParameters</A> structure is zero), motion vectors are included in the macroblock control command structure. The number of motion vectors that are included in the structure depends upon the type of picture (for example, <A HREF="JavaScript:hhobj_1.Click()">B picture</A> or <A HREF="JavaScript:hhobj_2.Click()">P picture</A>). Additionally, if macroblock-based reference-picture selection (as defined in H.263 Annex U) is in use, then a reference-picture selection index for each motion vector is also included in the macroblock control-command structure. </P>

<P>The space reserved for motion vectors in each macroblock control command structure is generally the amount needed for four motion vectors. Each motion vector is specified using a <A HREF="dxvaref_6693.htm">DXVA_MVvalue</A> structure. These usual cases include the two preceding nonintra cases. The remaining cases (not explicitly defined in the <I>dxva.h</I> header file) are as follows: 

<UL>
	<LI>If <A HREF="JavaScript:hhobj_3.Click()">OBMC</A> is in use (the <B>bPicOBMC</B> member of the <A HREF="dxvaref_9oyv.htm">DXVA_PictureParameters</A> structure is 1) and the picture is not the B part of a PB picture (the <B>bPicBinPB</B> member of this structure is zero), space for 10 motion vectors, plus any additional space needed to align to a 16-byte boundary, is included.</LI>

	<LI>If OBMC is in use (the <B>bPicOBMC</B> member of the DXVA_PictureParameters structure is 1) and the picture is the B part of a PB picture (the <B>bPicBinPB</B> member of this structure is 1), space for 11 motion vectors, plus any additional space needed to align to a 16-byte boundary, is included.</LI>

	<LI>If OBMC is not in use (the <B>bPicOBMC</B> member of the DXVA_PictureParameters structure is zero), the picture is the B part of a PB picture (the <B>bPicBinPB</B> member of this structure is 1), and four motion vectors per macroblock are allowed (the <B>bPic4Mvallowed</B> member of this structure is 1), the space for five motion vectors, plus any additional space needed to align to a 16-byte boundary, is included.</LI>
</UL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Motion%20Vectors"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
