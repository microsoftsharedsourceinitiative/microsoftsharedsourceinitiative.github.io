<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>D3DHAL_DP2SETSTREAMSOURCE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="D3DHAL_DP2SETSTREAMSOURCE">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_d3dhal_dp2setstreamsource_gg"></A>D3DHAL_DP2SETSTREAMSOURCE</H1>

<P><B>DirectX 8.0 and later versions only.</B></P>

<P>The D3DHAL_DP2SETSTREAMSOURCE structure is used to bind a vertex stream source to a vertex buffer for <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A>.</P>

<PRE class=syntax>typedef struct _D3DHAL_DP2SETSTREAMSOURCE {
    DWORD dwStream;
    DWORD dwVBHandle;
    DWORD dwStride;
} D3DHAL_DP2SETSTREAMSOURCE, *LPD3DHAL_DP2SETSTREAMSOURCE;</PRE>

<H4>Member</H4>

<DL>
<DT><B>dwStream</B></DT>

<DD>Specifies the stream being bound. It has a value between zero and the maximum number of streams specified by the driver.</DD>

<DT><B>dwVBHandle</B></DT>

<DD>Specifies the vertex buffer handle. It is legal for the vertex buffer handle to be zero, in which case the stream is no longer bound to a vertex buffer.</DD>

<DT><B>dwStride</B></DT>

<DD>Specifies the vertex size in bytes.
</DD>
</DL>

<H4>Headers</H4>

<P>Defined in <I>d3dhal.h</I>. Include <I>d3dhal.h</I>.</P>

<H4>Comments</H4>

<P>A driver is notified of the binding of a vertex buffer to a particular stream through a new DP2 token, <A HREF="d3denum_0jon.htm#ddk_d3ddp2op_setstreamsource_gg">D3DDP2OP_SETSTREAMSOURCE</A>.</P>

<P>The debug runtime validates that <B>dwStream</B> is within the legal range but the retail version does not, so validation must be present in the driver. DirectX 8.0 does not define the behavior of the driver or hardware in the error case where the stream index given is larger than the maximum stream supported by the hardware (as reported through <B>MaxStreams</B> in D3DCAPS8) beyond requiring that the driver and hardware combination not fault or hang in this case and that, on restoration of correct state the driver and hardware combination should continue to operate normally. Debug versions of your display driver should display messages in the debug output stream indicating when this problem has been detected.</P>

<P>The runtime does not validate that the streams accessed by the current vertex shader are non-NULL. It is the responsibility of the driver writer to ensure the driver/hardware does not crash when this error case arises. Debug versions of your display driver should display messages in the debug output stream to indicate when this problem has been detected.</P>

<P>Only a single stream source is set by a <A HREF="d3dstrct_9w6f.htm">D3DHAL_DP2COMMAND</A> structure. That is, the <B>wStateCount</B> field of the D3DHAL_DP2COMMAND is always one when <B>bCommand</B> is D3DDP2OP_SETSTREAMSOURCE.</P>

<H4>See Also</H4>

<P><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_setstreamsource_gg">D3DDP2OP_SETSTREAMSOURCE</A>, <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A>, <A HREF="d3dstrct_9w6f.htm">D3DHAL_DP2COMMAND</A>, <A HREF="d3dstrct_3wyv.htm">D3DHAL_DP2SETSTREAMSOURCEUM</A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: D3DHAL_DP2SETSTREAMSOURCE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
