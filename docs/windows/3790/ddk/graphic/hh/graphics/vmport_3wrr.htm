<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Common-Buffer Bus-Master DMA</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Common-Buffer Bus-Master DMA">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_common_buffer_bus_master_dma_gg"></A>Common-Buffer Bus-Master DMA</H2>

<P>The miniport driver performs the following sequence of operations to use common-buffer DMA:

<OL>
	<LI>Get an adapter object.
<P>The miniport driver calls the video port driver's <A HREF="vpfncs_45d3.htm"><B>VideoPortGetDmaAdapter</B></A> function, usually within the miniport driver's <A HREF="vmpfncs_3e3r.htm"><I>HwVidFindAdapter</I></A> routine, to get a pointer to a <A HREF="vstrcts_15if.htm">VP_DMA_ADAPTER</A> structure. The miniport driver uses this pointer for subsequent DMA operations.
</LI>

	<LI>Allocate a common buffer.
<P>The miniport driver calls the video port driver's <A HREF="vpfncs_4tuv.htm"><B>VideoPortAllocateCommonBuffer</B></A> function, using the pointer obtained in the previous step.
</LI>

	<LI>Release the common buffer.
<P>When the miniport driver no longer requires the common buffer, it calls the video port driver's <A HREF="vpfncs_6ht3.htm"><B>VideoPortReleaseCommonBuffer</B></A> function.
</LI>

	<LI>Discard the adapter object.
<P><I>This step is optional</I>. If, for some reason, the miniport driver decides that there will be no further DMA operations for the rest of its lifetime, it should discard the DMA adapter object by calling the video port driver's <A HREF="vpfncs_8ppj.htm"><B>VideoPortPutDmaAdapter</B></A> function.
</LI>
</OL>

<P><B></B></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Common-Buffer%20Bus-Master%20DMA"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
