<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Losing and Restoring DirectDraw Surfaces</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Losing and Restoring DirectDraw Surfaces">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_losing_and_restoring_directdraw_surfaces_gg"></A>Losing and Restoring DirectDraw Surfaces</H3>

<P>Surface object lifetimes are longer for the runtime’s surface objects than they are for the driver’s surface objects. In a few situations, most notably mode changes, surfaces become <I>lost</I>. This means that the driver’s surface object is destroyed when <A HREF="ddfncs_1c4n.htm"><I>DdDestroySurface</I></A> is called, but the runtime’s surface object is placed into a suspended state. Later, the runtime object can be <I>restored</I>, which corresponds to a <A HREF="ddfncs_6bdz.htm"><I>DdCreateSurface</I></A> call at the driver level. </P>

<P>Normally, drivers do not have to be aware of this intermediate lost state. However, there are some cases where an understanding of this process will help the driver writer.</P>

<P>Driver writers can elect to handle complex surface restoration in one atomic call. At surface restoration time, the DirectDraw runtime examines the driver’s <A HREF="d3dfncs_0gtj.htm"><I>D3dCreateSurfaceEx</I></A> entry point. If this entry point is defined, then the DirectDraw runtime restores all complex surfaces in one call to <A HREF="ddfncs_6bdz.htm"><I>DdCreateSurface</I></A>. The driver probably will not be able to differentiate between the original creation and the creation caused by restoring a surface.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Losing%20and%20Restoring%20DirectDraw%20Surfaces"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
