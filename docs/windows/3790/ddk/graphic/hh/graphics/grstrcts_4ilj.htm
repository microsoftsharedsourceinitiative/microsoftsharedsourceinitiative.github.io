<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DEVINFO</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DEVINFO">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_pdev_gg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_mirror_driver_kg_gly">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_gamma_ramp_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_devinfo_gg"></A>DEVINFO</H1>

<P>The DEVINFO structure provides information about the driver and its private <A HREF="JavaScript:hhobj_1.Click()">PDEV</A> to the graphics engine. </P>

<PRE class=syntax>typedef struct tagDEVINFO {
  FLONG   flGraphicsCaps;
  LOGFONTW  lfDefaultFont;
  LOGFONTW  lfAnsiVarFont;
  LOGFONTW  lfAnsiFixFont;
  ULONG  cFonts;
  ULONG  iDitherFormat;
  USHORT  cxDither;
  USHORT  cyDither;
  HPALETTE  hpalDefault;
  FLONG  flGraphicsCaps2;
} DEVINFO, *PDEVINFO;</PRE>

<H4>Members</H4>

<DL>
<DT><B>flGraphicsCaps</B></DT>

<DD>Is a set of flags that describe graphics capabilities of the graphics driver and/or its hardware. These flags are defined as follows:

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Definition</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ALTERNATEFILL</TD>
<TD width=52%>Handles alternating fills.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ARBRUSHOPAQUE</TD>
<TD width=52%>Supports an arbitrary brush for text opaque rectangle (background color).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ARBRUSHTEXT</TD>
<TD width=52%>Supports an arbitrary brush for the text foreground color.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ASYNCCHANGE</TD>
<TD width=52%>This flag is obsolete. In legacy drivers, this flag indicates that the driver can change the pointer shape in hardware while other drawing is occurring on the device.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ASYNCMOVE</TD>
<TD width=52%>The driver can move the pointer in hardware while other drawing is occurring on the device.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_BEZIERS</TD>
<TD width=52%>Handles Bezier curves.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_CMYKCOLOR</TD>
<TD width=52%>The driver supports the CYMK color space.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_COLOR_DITHER</TD>
<TD width=52%>Handles color dithering to a PDEV-compatible surface.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_DIRECTDRAW</TD>
<TD width=52%>This flag is obsolete.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_DITHERONREALIZE</TD>
<TD width=52%>Specifies that GDI can call <A HREF="ddifncs_6krr.htm"><I>DrvRealizeBrush</I></A> with the RGB to be dithered directly.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_DONTJOURNAL</TD>
<TD width=52%>Disallows metafile printing to this printer driver. This is valid only for printer DCs and will generally result in slower return-to-application time when printing.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_FONT_RASTERIZER</TD>
<TD width=52%>Device hardware can rasterize TrueType fonts.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_FORCEDITHER</TD>
<TD width=52%>Allows dithering on all geometric pens.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_GEOMETRICWIDE</TD>
<TD width=52%>Handles geometric widening.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_GRAY16</TD>
<TD width=52%>Handles antialiased text natively.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_HALFTONE</TD>
<TD width=52%>Handles halftoning.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_HIGHRESTEXT</TD>
<TD width=52%>Indicates that the driver is requesting glyph positions as returned by the STROBJ in FIX point coordinates.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_HORIZSTRIKE</TD>
<TD width=52%>This flag is obsolete. In legacy drivers, this flag indicated that the driver handled horizontal strikeouts in <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_ICM</TD>
<TD width=52%>Indicates that color management operations can be performed by the driver or printer hardware.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_LAYERED</TD>
<TD width=52%>Indicates that this is a layer or <A HREF="JavaScript:hhobj_2.Click()">mirror driver</A> for remoting. Printer drivers cannot be layer drivers.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_MONO_DITHER</TD>
<TD width=52%>Handles monochrome dithering.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_NO64BITMEMACCESS</TD>
<TD width=52%>This flag is obsolete.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_NUP</TD>
<TD width=52%>Indicates that "N-up" printing is supported.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_OPAQUERECT</TD>
<TD width=52%>Handles opaque rectangles in <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_PALMANAGED</TD>
<TD width=52%>Supports palette management.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_PANNING</TD>
<TD width=52%>When GDI is simulating the pointer, it should call <A HREF="ddifncs_6fjb.htm"><I>DrvMovePointer</I></A> to notify the driver of the current cursor position. This allows the driver to handle panning virtual displays.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_SCREENPRECISION</TD>
<TD width=52%>The rasterizer (font engine) should choose a screen (soft) font over a device font when choosing a font for which there is no exact match.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_VECTORFONT</TD>
<TD width=52%>Handles stroking of vector fonts in <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_VERTSTRIKE</TD>
<TD width=52%>This flag is obsolete. In legacy drivers, this flag indicated that the driver handled vertical strikeouts in <I>DrvTextOut</I>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS_WINDINGFILL</TD>
<TD width=52%>Handles winding mode fills. See <A HREF="ddioview_96av.htm">Path Fill Modes</A> for more information.</TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>lfDefaultFont</B></DT>

<DD>Is an Extended Logical Font structure that specifies the default font for a device. For more information about this structure, see EXTLOGFONT in the Platform SDK Documentation.</DD>

<DT><B>lfAnsiVarFont</B></DT>

<DD>Is an Extended Logical Font structure that specifies the default variable-pitch font for a device. For more information about this structure, see EXTLOGFONT in the Platform SDK Documentation.</DD>

<DT><B>lfAnsiFixFont</B></DT>

<DD>Is an Extended Logical Font structure that specifies the default fixed-pitch (monospaced) font for a device. For more information about this structure, see EXTLOGFONT in the Platform SDK Documentation.</DD>

<DT><B>cFonts</B></DT>

<DD>Specifies the number of device fonts. GDI assumes that the device can draw text with this number of fonts on its own surfaces and that the driver can provide metrics information about the fonts. If the driver sets <B>cFonts</B> to -1, GDI will wait until fonts are needed to query the driver for the actual number of fonts it supports in a call to <A HREF="ddifncs_66uf.htm"><I>DrvQueryFont</I></A>.</DD>

<DT><B>iDitherFormat</B></DT>

<DD>Specifies the format of the bitmap. This parameter indicates how many bits of color information per pixel are requested, and must be one of the following values:

<TABLE>

<TR VALIGN="top">
<TH align=left width=32%>Value</TH>
<TH align=left width=68%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_1BPP</TD>
<TD width=68%>Monochrome</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_4BPP</TD>
<TD width=68%>4 bits per pixel</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_8BPP</TD>
<TD width=68%>8 bits per pixel</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_16BPP</TD>
<TD width=68%>16 bits per pixel</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_24BPP</TD>
<TD width=68%>24 bits per pixel</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_32BPP</TD>
<TD width=68%>32 bits per pixel</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_4RLE</TD>
<TD width=68%>4 bits per pixel, run length encoded</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_8RLE</TD>
<TD width=68%>8 bits per pixel, run length encoded</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_JPEG</TD>
<TD width=68%>JPEG compressed image</TD>
</TR>

<TR VALIGN="top">
<TD width=32%>BMF_PNG</TD>
<TD width=68%>PNG compressed image</TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>cxDither</B> and <B>cyDither</B></DT>

<DD>Specify the dimensions of a dithered brush. If these members are nonzero, then the device can create a dithered brush for a given RGB color.</DD>

<DT><B>hpalDefault</B></DT>

<DD>Handle to the default palette for the device. The driver should create the palette by calling <A HREF="gdifncs_4svb.htm"><B>EngCreatePalette</B></A>. The driver associates a palette with a device by returning this handle to GDI.</DD>

<DT><B>flGraphicsCaps2</B></DT>

<DD>Are flags that describe additional graphics capabilities of the device driver. These flags are defined as follows:

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Definition</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_ALPHACURSOR</TD>
<TD width=52%>Handles pointers with per-pixel alpha values.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_CHANGEGAMMARAMP</TD>
<TD width=52%>The display device has a loadable hardware <A HREF="JavaScript:hhobj_3.Click()">gamma ramp</A>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_ICD_MULTIMON</TD>
<TD width=52%>Informs GDI that the driver intends to handle <A HREF="ddifncs_2uuf.htm"><I>DrvSetPixelFormat</I></A>, <A HREF="ddifncs_30h3.htm"><I>DrvDescribePixelFormat</I></A>, and <A HREF="ddifncs_9huv.htm"><I>DrvSwapBuffers</I></A> calls in a multimon environment, even when the rectangle in the operation also intersects another device. Only one device is ever given the opportunity to handle those calls. If the capability is not specified and the region involved intersects more than one device, no driver is called.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_JPEGSRC</TD>
<TD width=52%>Device can accept JPEG compressed images (that is, images for which BMP_JPEG is set in the <A HREF="grstrcts_3rtz.htm">SURFOBJ</A> structure).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_MOUSETRAILS</TD>
<TD width=52%>Indicates that the driver supports mouse trails (a succession of cursor images showing the mouse's location during a short period of time). The driver is capable of handling the values GDI sends in the <I>fl</I> parameter of the <I>DrvSetPointerShape</I> function. The driver should use the SPS_LENGTHMASK and SPS_FREQMASK masks to obtain values for the length and frequency of the mouse trails. See <A HREF="ddifncs_799j.htm"><I>DrvSetPointerShape</I></A> for more information about these masks.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_PNGSRC</TD>
<TD width=52%>Device can accept PNG compressed images (that is, images for which BMP_PNG is set in the <A HREF="grstrcts_3rtz.htm">SURFOBJ</A> structure).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_SYNCFLUSH</TD>
<TD width=52%>The driver supports a programmatic-based flush mechanism for batched graphics DDI calls. <A HREF="ddifncs_4aav.htm"><I>DrvSynchronizeSurface</I></A> will be called whenever GDI must flush any drawing that is being batched by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>GCAPS2_SYNCTIMER</TD>
<TD width=52%>The driver supports a timer-based flush mechanism for batched graphics DDI calls. <I>DrvSynchronizeSurface</I> will be called periodically, based on a timer interval determined by GDI.</TD>
</TR>
</TABLE><BR>


</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>winddi.h</I>. Include <I>winddi.h</I>.</P>

<H4>Comments</H4>

<P>The driver's <A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A> function fills in a DEVINFO structure; the driver should set only the members that are relevant to it. This structure is zero-initialized by GDI before <I>DrvEnablePDEV</I> is called. Applications do not have direct access to this structure.</P>

<P>If a driver sets GCAPS2_JPEGSRC or GCAPS2_PNGSRC in <B>flGraphicsCaps2</B>, the following rules apply:

<UL>
	<LI>The driver must provide a <A HREF="ddifncs_6g87.htm"><I>DrvQueryDeviceSupport</I></A> function.</LI>

	<LI>Every driver-defined graphics DDI function that receives a <A HREF="grstrcts_3rtz.htm">SURFOBJ</A> structure as input must be able to either support the compressed format or return an error code.</LI>

	<LI>The driver must be able to handle complex clip regions for images that use the compressed format.</LI>

	<LI>For driver-defined graphics DDI functions that receive a ROP4 input argument, only 0xCCCC is used with JPEG and PNG formats.</LI>
</UL>

<H4>See Also</H4>

<P><A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A>, <A HREF="ddifncs_66uf.htm"><I>DrvQueryFont</I></A>, <A HREF="ddifncs_6krr.htm"><I>DrvRealizeBrush</I></A>, <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DEVINFO"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
