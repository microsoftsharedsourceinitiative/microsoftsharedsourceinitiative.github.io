<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Marking Formats for Gamma and Linear Conversion</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Marking Formats for Gamma and Linear Conversion">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_marking_formats_for_gamma_and_linear_conversion_gg"></A>Marking Formats for Gamma and Linear Conversion</H4>

<P>A DirectX 9.0 version driver marks texture formats for linear or gamma conversion so that it can determine whether to convert textures of those formats in order to accurately process or render them. </P>

<P>Texture content is typically stored in sRGB format, which is gamma corrected. However, for the pixel pipeline to perform accurate blending operations on sRGB-formatted textures, the driver must convert those textures to a linear format before reading from them. When the pixel pipeline is ready to write those textures out to the render target, the driver must convert those textures back to sRGB format. In this way, the pixel pipeline performs all operations in linear space. </P>

<P>The driver specifies the following flags in the <B>dwOperations</B> member of the <A HREF="ddstrcts_6wtj.htm">DDPIXELFORMAT</A> structure for a texture surface's format to mark the format for conversion:

<UL>
	<LI>D3DFORMAT_OP_SRGBREAD to indicate whether a texture is gamma 2.2 corrected or not (sRGB or not), and if it must be converted to a linear format by the driver either for blending operations or for the sampler at lookup time.</LI>

	<LI>D3DFORMAT_OP_SRGBWRITE to indicate whether the pixel pipeline should gamma correct back to sRGB space when writing out to the render target.</LI>
</UL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Marking%20Formats%20for%20Gamma%20and%20Linear%20Conversion"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
