<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DrvGetModes</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DrvGetModes">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_drvgetmodes_gg"></A><I>DrvGetModes</I></H1>

<P>The <I>DrvGetModes</I> function lists the modes supported by a given device.</P>

<PRE class=syntax><B>ULONG
  </B><I>DrvGetModes</I><B>(</B>
    <B>IN HANDLE</B>  <I>hDriver</I><B>,</B>
    <B>IN ULONG</B>  <I>cjSize</I><B>,</B>
    <B>OUT DEVMODEW</B>  <I>*pdm</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>hDriver</I></DT>

<DD>Handle to the driver for which the modes must be enumerated. This is the handle passed in the <I>hDriver</I> parameter of the <A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A> function.</DD>

<DT><I>cjSize</I></DT>

<DD>Specifies the size in bytes of the buffer pointed to by <I>pdm</I>.</DD>

<DT><I>pdm</I></DT>

<DD>Pointer to the buffer containing <A HREF="grstrcts_6v8n.htm">DEVMODEW</A> structure(s) for the driver to fill in, or NULL.
</DD>
</DL>

<H4>Return Value</H4>

<P>The driver should return the number of bytes written to the buffer if <I>pdm</I> is not NULL. If <I>pdm </I>is NULL, the driver should return the number of bytes required to hold all mode data. The driver should return zero if an error occurs.</P>

<H4>Headers</H4>

<P>Declared in <I>winddi.h</I>. Include <I>winddi.h</I>.</P>

<H4>Comments</H4>

<P>This function must be implemented in all display drivers.</P>

<P>The Window Manager dynamically loads all display drivers associated with a miniport driver (based on the <B>InstalledDisplayDrivers</B> key in the registry). Each display driver is called to retrieve the list of modes supported by that combination of loaded drivers. For example, the VGA64K display driver only returns the 64K color modes that were returned in the list of modes obtained from the miniport driver.</P>

<P><I>DrvGetModes</I> can be called before there is an active PDEV.</P>

<P>Refer to the <I>permedia</I> samples to see a working implementation of <I>DrvGetModes</I>.</P>

<H4>See Also</H4>

<P><A HREF="grstrcts_6v8n.htm">DEVMODEW</A>, <A HREF="ddifncs_00pz.htm"><I>DrvAssertMode</I></A>, <A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A>, <A HREF="gdifncs_1607.htm"><B>EngDeviceIoControl</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DrvGetModes"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
