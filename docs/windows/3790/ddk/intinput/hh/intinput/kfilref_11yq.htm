<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KbFilter_ServiceCallback</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KbFilter_ServiceCallback">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Interactive&nbsp;Input&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_kbfilter_servicecallback_kr"></A>KbFilter_ServiceCallback</H1>

<P>The<B> KbFilter_ServiceCallback</B> routine is a template for a filter service callback routine that supplements the operation of <A HREF="kref_0drm.htm"><B>KeyboardClassServiceCallback</B></A>.</P>

<PRE class=syntax><B>VOID
  KbFilter_ServiceCallback(
    IN PDEVICE_OBJECT  </B><I>DeviceObject</I><B>,</B>
<B>    IN PKEYBOARD_INPUT_DATA  </B><I>InputDataStart</I><B>,</B>
<B>    IN PKEYBOARD_INPUT_DATA  </B><I>InputDataEnd</I><B>,</B>
<B>    IN OUT PULONG  </B><I>InputDataConsumed</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>DeviceObject</I></DT>

<DD>Pointer to the class device object.</DD>

<DT><I>InputDataStart</I></DT>

<DD>Pointer to the first keyboard input data packet in the input data buffer of the port device.</DD>

<DT><I>InputDataEnd</I></DT>

<DD>Pointer to the keyboard input data packet that immediately follows the last data packet in the input data buffer of the port device.</DD>

<DT><I>InputDataConsumed</I></DT>

<DD>Pointer to the number of keyboard input data packets that are transferred by the routine.
</DD>
</DL>

<H4>Return Value</H4>

<P>None</P>

<H4>Headers</H4>

<P>Declared in<I> kbfiltr.h</I>. Include <I>kbfiltr.h.</I></P>

<H4>Comments</H4>

<P>The ISR dispatch completion routine of the function driver calls <B>KbFilter_ServiceCallback</B>, which then calls <A HREF="kref_0drm.htm"><B>KeyboardClassServiceCallback</B></A>. A vendor can implement a filter service callback to modify the input data that is transferred from the device's input buffer to the class data queue. For example, the callback can delete, transform, or insert data. </P>

<P>For more information about customizing the keyboard class service callback, see <A HREF="km-ovr_4i7b.htm">Connect a Class Service Callback and a Filter Service Callback to a Device</A>.</P>

<P><B>KbFilter_ServiceCallback</B> runs in kernel mode at IRQL DISPATCH_LEVEL.</P>

<H4>See Also</H4>

<P><A HREF="kref_0drm.htm"><B>KeyboardClassServiceCallback</B></A>, <A HREF="kref_04oi.htm">KEYBOARD_INPUT_DATA</A></P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KbFilter_ServiceCallback"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
