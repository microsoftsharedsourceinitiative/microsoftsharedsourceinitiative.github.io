<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>IRP_MJ_CREATE (Kbdclass)</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="IRP_MJ_CREATE (Kbdclass)">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mj_create_kr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Interactive&nbsp;Input&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_irp_mj_create_kbdclass__kr"></A>IRP_MJ_CREATE (Kbdclass)</H1>

<H4>When Sent</H4>

<P>The Microsoft Win32 subsystem opens all keyboard devices for its exclusive use.</P>

<H4>Input Parameters</H4>

<P>None.</P>

<H4>Output Parameters</H4>

<P>None.</P>

<H4>I/O Status Block</H4>

<DL>
<DT><B>Plug and Play Operation  </B></DT>

<DD>The <B>Information</B> member of the IRP is set to zero. 

<P>The <B>Status</B> member is set to one of the following values:


<DL>
<DT>STATUS_SUCCESS</DT>

<DD>The request completed successfully.</DD>

<DT>STATUS_UNSUCCESFUL</DT>

<DD>The device is not started.</DD>

<DT>STATUS_<I>Xxx</I> </DT>

<DD>A lower-level driver returns an error status.
</DD>
</DL>
</DD>

<DT><B>Legacy Operation</B></DT>

<DD>The <B>Information</B> member is set to zero.

<P>The <B>Status</B> member is set to STATUS_SUCCESS or to the status returned by the port driver for an IOCTL_INTERNAL_KEYBOARD_ENABLE request.

</DD>
</DL>

<H4>Headers</H4>

<P>Defined in <I>ntddk.h</I> and <I>wdm.h</I>. Include <I>ntddk.h</I> or <I>wdm.h</I>.</P>

<H4>Operation</H4>

<P>The IRP_MJ_CREATE request opens a file on a keyboard device.

<DL>
<DT><B>Plug and Play Operation</B></DT>

<DD>If the device has been started, Kbdclass sends the IRP_MJ_CREATE request down the driver stack. If the device is not started, Kbdclass completes the request without sending the request down the driver stack. Kbdclass sets the trusted file that is permitted read access to the device. If there is a grandmaster device, Kbdclass sends a create request to all the keyboard devices that are associated with the subordinate class device objects. 

<P>For information about grandmaster devices, see <A HREF="km-ovr_6muf.htm">Configuration of Device Objects for more than one Device</A>.
</DD>

<DT><B>Legacy Operation</B></DT>

<DD>Kbdclass sends a synchronous IOCTL_INTERNAL_KEYBOARD_ENABLE request down the device stack.
</DD>
</DL>

<H4>See Also</H4>

<P><A HREF="JavaScript:hhobj_1.Click()">IRP_MJ_CREATE</A>, <A HREF="kref_3d82.htm">IRP_MJ_CLOSE (Kbdclass)</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: IRP_MJ_CREATE%20(Kbdclass)"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
