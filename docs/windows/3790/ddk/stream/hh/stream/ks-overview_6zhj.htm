<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KS Filters</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KS Filters">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_ks_filters_ksg"></A>KS Filters</H3>

<P>A filter is a group of nodes that encapsulates a processing task to be performed on the data stream. <A HREF="ks-overview_3lif.htm">Pins</A> serve as input and output conduits on a filter.</P>

<P>A simple filter could contain one data sink pin and one data source pin. The filter receives incoming data on the data sink pin, processes it internally, and writes to the data source pin. In the following figure, the pins are shown as heavy line segments. Internally, the filter connects the data sink pin to an internal processing unit, a <I>node</I>, which in turn is connected to the data source pin.</P>

<P><IMG SRC="images/ks01.gif" ALT="" BORDER=0></P>

<P><B>Diagram of a Simple KS Filter</B></P>

<P>Another device might combine or split data flows between pins. For example, an audio mixer supports several data sink pins. The mixer combines them into a single stream, and writes that stream to a data source pin. The following illustration shows the data flow.</P>

<P><IMG SRC="images/ks02.gif" ALT="" BORDER=0></P>

<P><B>Diagram of a Mixer</B></P>

<P>The graph describes the internal relationship between the filter's pins. A more complicated filter might encapsulate several nodes that transform data flowing through the filter.</P>

<P>Filters specify internal connections between pins and internal nodes by using the <A HREF="ks-prop_4xwz.htm">KSPROPSETID_Topology</A> property set.</P>

<P>The <A HREF="ks-prop_6ucz.htm">KSPROPERTY_TOPOLOGY_CONNECTIONS</A> property queries all connections between nodes of a KS filter. This property returns an array of <A HREF="ks-struct_3fhv.htm">KSTOPOLOGY_CONNECTION</A>. Each KSTOPOLOGY_CONNECTION structure represents a single data-path connection inside a filter. In the mixer diagram above, the sequence of KSTOPOLOGY_CONNECTION structures could be as follows:</P>

<PRE>//    FromNode,       FromNodePin,     ToNode,        ToNodePin,
{
 {  KSFILTER_NODE,        0,            0,               0     },
 {       0,               1,       KSFILTER_NODE,        1     }
}</PRE>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KS%20Filters"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
