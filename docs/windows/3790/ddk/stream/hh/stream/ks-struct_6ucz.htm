<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KSQUERYBUFFER</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KSQUERYBUFFER">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ksquerybuffer_ks"></A>KSQUERYBUFFER</H1>

<P>The KSQUERYBUFFER structure is used when querying for outstanding buffers available on an event with KSEVENT_TYPE_QUERYBUFFER<B>.</B></P>

<PRE class=syntax>typedef struct {
    KSEVENT         Event;
    PKSEVENTDATA    EventData;
    PVOID           Reserved;
} KSQUERYBUFFER, *PKSQUERYBUFFER;</PRE>

<H4>Members</H4>

<DL>
<DT><B>Event</B></DT>

<DD>Specifies the description of the original event, with the KSEVENT_TYPE_QUERYBUFFER flag set instead of the KSEVENT_TYPE_ENABLEBUFFERED flag.</DD>

<DT><B>EventData</B></DT>

<DD>Specifies the original pointer to the event data passed when the event was enabled. This pointer is used as the unique identifier in locating the event, just as it is used when disabling the event.</DD>

<DT><B>Reserved</B></DT>

<DD>Not used, and set to zero.</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>ks.h</I>. Include <I>ks.h</I>.</P>

<H4>Comments</H4>

<P>If KSEVENT_TYPE_ENABLEBUFFERED was used to enable an event that also buffers data, then the data produced by the event can be queried using this method. The description of the event being queried is provided as the first parameter, and any buffer is provided as the second parameter to the query.</P>

<P>The buffer length needed can be queried by providing a zero length output buffer. The size of buffer is returned in the <B>BytesReturned</B> parameter, with a warning status of STATUS_BUFFER_OVERFLOW.</P>

<P>Alternatively, the query returns one of the following status values:</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=42%>Return Value</TH>
<TH align=left width=58%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=42%>STATUS_NOT_FOUND</TD>
<TD width=58%>event was not found</TD>
</TR>

<TR VALIGN="top">
<TD width=42%>STATUS_INVALID_PARAMETER</TD>
<TD width=58%>it was not being buffered</TD>
</TR>

<TR VALIGN="top">
<TD width=42%>STATUS_NO_MORE_ENTRIES</TD>
<TD width=58%>no buffers were available</TD>
</TR>

<TR VALIGN="top">
<TD width=42%>STATUS_BUFFER_TOO_SMALL</TD>
<TD width=58%>buffer size was insufficient.</TD>
</TR>

<TR VALIGN="top">
<TD width=42%>STATUS_SUCCESS</TD>
<TD width=58%>life is good.</TD>
</TR>
</TABLE><BR>

<H4>See Also</H4>

<P><A HREF="ks-struct_5lmb.htm">KSEVENT</A>, <A HREF="ks-struct_7p9v.htm">KSBUFFER_ITEM</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KSQUERYBUFFER"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
