<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Building BDA Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Building BDA Drivers">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_using_the_build_utility_tools">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_build_utility_reference_tools">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_targetname_tools">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_targetpath_tools">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_targettype_tools">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_targetlibs_tools">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_includes_tools">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_sources_tools">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_drivertype_tools">
</OBJECT>
<OBJECT ID="hhobj_10" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_use_mapsym_tools">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_building_bda_drivers_ksg"></A>Building BDA Drivers</H1>

<P>You can use the DDK to build your Broadcast Driver Architecture (BDA) driver. To build a BDA driver, open a DDK command window, change to the appropriate BDA driver's source code subdirectory of the DDK's main source directory, and use the DDK's <B>build</B> command. The <B>build</B> command gets instructions on how to build the BDA driver from the <I>Sources</I> file that resides in the BDA driver's source code subdirectory. </P>

<P>For more information on the Build utility, the DDK's build environments, the macros and environment variables which control the Build utility, and the files that are required to build your BDA driver, see <A HREF="JavaScript:hhobj_1.Click()">Using the Build Utility</A> and <A HREF="JavaScript:hhobj_2.Click()">Build Utility Reference</A>.</P>

<P>The following list contains the macro names to use in a BDA <I>Sources</I> file and discusses how to use them to build your BDA driver: 

<DL>
<DT><A HREF="JavaScript:hhobj_3.Click()">TARGETNAME</A> </DT>

<DD>Set to the BDA driver's name so that when the DDK builds the driver it is built with this name. The following code provides an example:

<PRE>TARGETNAME=BDAsampl  # DDK builds the driver as BDAsampl.sys
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_4.Click()">TARGETPATH</A> </DT>

<DD>Set the destination directory for the built driver. Note that depending on whether your build environment is "free" or "checked", you can use the BUILD_ALT_DIR variable to append "fre" or "chk" to the \obj subdirectory that the build command creates under the directory containing the <I>Sources</I> file. The following code provides an example:

<PRE>TARGETPATH=obj$(BUILD_ALT_DIR) # built driver in \objfre or \objchk
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_5.Click()">TARGETTYPE</A> </DT>

<DD>Set the type of file to build as a driver (as opposed to, for example, a program or DLL) as shown in the following code:

<PRE>TARGETTYPE=DRIVER  # DDK builds the driver as *.sys
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_6.Click()">TARGETLIBS</A> </DT>

<DD>Point to the library files to which the BDA driver's sample source must link. A BDA driver must at least link to the libraries shown in the following code example:

<PRE>TARGETLIBS=..\..\..\..\lib\ks.lib \
           ..\..\..\..\lib\ksguid.lib \
           ..\..\..\..\lib\BdaSup.lib
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_7.Click()">INCLUDES</A> </DT>

<DD>Point to a list of paths to search for the header files that the BDA driver's sample source requires in order to compile. The following code provides an example:

<PRE>INCLUDES=..\..\..\..\inc; \
    $(DDK_INC_PATH)\wdm; 
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_8.Click()">SOURCES</A> </DT>

<DD>Point to a list of source files that must be compiled to build the driver. The files must reside in the directory in which the <I>Sources</I> file resides. The following code provides an example:

<PRE>SOURCES= \
    ObjDesc.cpp     \
    inpin.cpp     \
    outpin.cpp    \
    Filter.cpp      \
    Device.cpp      \
    bdaguid.c       \
    BDAsampl.rc
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_9.Click()">DRIVERTYPE</A> </DT>

<DD>Set type of driver to WDM as shown in the following code:

<PRE>DRIVERTYPE=WDM
</PRE>
</DD>

<DT><A HREF="JavaScript:hhobj_10.Click()">USE_MAPSYM</A> </DT>

<DD>Generate <I>.sym</I> symbol files, in addition to the <I>.pdb</I> symbol files. These files map names to addresses. Setting this macro is required to debug on Windows 98/Me platforms. Set this macro as shown in the following example:

<PRE>USE_MAPSYM=1
</PRE>
</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Building%20BDA%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
