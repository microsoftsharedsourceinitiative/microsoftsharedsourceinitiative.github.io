<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KSDEVICE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KSDEVICE">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_object_kr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_object_kr">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_object_kr">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ioattachdevicetodevicestack_kr">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_start_device_dr">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_stop_device_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ksdevice_ks"></A>KSDEVICE</H1>

<P>The KSDEVICE structure describes a WDM functional device that is managed by AVStream.</P>

<PRE class=syntax>typedef struct {
  const KSDEVICE_DESCRIPTOR*  Descriptor;
  KSOBJECT_BAG  Bag;
  PVOID  Context;
  PDEVICE_OBJECT  FunctionalDeviceObject;
  PDEVICE_OBJECT  PhysicalDeviceObject;
  PDEVICE_OBJECT  NextDeviceObject;
  BOOLEAN  Started;
  SYSTEM_POWER_STATE  SystemPowerState;
  DEVICE_POWER_STATE  DevicePowerState;
} KSDEVICE, *PKSDEVICE;</PRE>

<H4>Members</H4>

<DL>
<DT><B>Descriptor</B></DT>

<DD>Pointer to a <A HREF="avstruct_1ayb.htm">KSDEVICE_DESCRIPTOR</A> structure that describes the characteristics of the device and the static filters supported by it.</DD>

<DT><B>Bag</B></DT>

<DD>Specifies the KSOBJECT_BAG (equivalent to type PVOID) associated with the device. See <A HREF="avconcep_68pz.htm">Object Bags</A>.</DD>

<DT><B>Context</B></DT>

<DD>Pointer to a memory location that contains context information for the device. AVStream stores a pointer to a device extension in this member for minidrivers that allocate a device extension in <A HREF="avstclbk_32gj.htm"><I>AVStrMiniDeviceStart</I></A>. Memory allocated for context should be placed in the object bag using <A HREF="avfunc_4zoz.htm"><B>KsAddItemToObjectBag</B></A>. <B>Context</B> is initialized to NULL at create time.</DD>

<DT><B>FunctionalDeviceObject</B></DT>

<DD>Pointer to a <A HREF="JavaScript:hhobj_1.Click()">DEVICE_OBJECT</A> structure that is the WDM functional device object for the device being described.</DD>

<DT><B>PhysicalDeviceObject</B></DT>

<DD>Pointer to a <A HREF="JavaScript:hhobj_2.Click()">DEVICE_OBJECT</A> structure that is the WDM physical device object for the device being described.</DD>

<DT><B>NextDeviceObject</B></DT>

<DD>Pointer to a <A HREF="JavaScript:hhobj_3.Click()">DEVICE_OBJECT</A> structure that is the next device in the driver stack as determined by <A HREF="JavaScript:hhobj_4.Click()"><B>IoAttachDeviceToDeviceStack</B></A>.</DD>

<DT><B>Started</B></DT>

<DD>Indicates whether this particular device has been started or not. If TRUE, the device has been started. If FALSE, the device has not been started. This flag is set during the processing of the <A HREF="JavaScript:hhobj_5.Click()">IRP_MN_START_DEVICE</A> and is reset during the processing of the <A HREF="JavaScript:hhobj_6.Click()">IRP_MN_STOP_DEVICE</A>. A device that is not started returns STATUS_DEVICE_NOT_READY in response to all requests to create a filter.</DD>

<DT><B>SystemPowerState</B></DT>

<DD>Specifies the current power state of the system. Possible values are enumerators of the type SYSTEM_POWER_STATE.</DD>

<DT><B>DevicePowerState</B></DT>

<DD>Specifies the current power state of the device. Possible values are enumerators of the type DEVICE_POWER_STATE.
</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>ks.h</I>. Include <I>ks.h</I>.</P>

<H4>Comments</H4>

<P>This structure is available in Windows XP and later operating systems and in DirectX 8.0 and later versions.</P>

<P>Clients typically use this structure if they must implement specific PnP or Power Management behavior that is not provided by AVStream. A pointer to a KSDEVICE structure is the first parameter to all dispatch routines specified in <A HREF="avstruct_8shf.htm">KSDEVICE_DISPATCH</A>, and the client is free to use the context information to attach its own context for these routines. In addition, clients may obtain a pointer to the KSDEVICE structure from a WDM device object pointer by calling <A HREF="avfunc_73ub.htm"><B>KsGetDeviceForDeviceObject</B></A>.</P>

<P>As mentioned above, <B>Context</B> is initialized to NULL at create time. However, descendants of this KSDEVICE structure have their corresponding <B>Context</B> members set to the value of the parent object's <B>Context</B> member. This happens when the new object is created. For more information, see <A HREF="avconcep_2fmv.htm">AVStream Object Hierarchy</A> and <A HREF="avconcep_68pz.htm">Object Bags</A>. Also see the reference pages for the possible AVStream descendant objects: <A HREF="avstruct_1bn7.htm">KSFILTERFACTORY</A>, <A HREF="avstruct_1yk3.htm">KSFILTER</A> and <A HREF="avstruct_5s4z.htm">KSPIN</A>.</P>

<H4>See Also</H4>

<P><A HREF="avstruct_1ayb.htm">KSDEVICE_DESCRIPTOR</A>, <A HREF="avstruct_8shf.htm">KSDEVICE_DISPATCH</A>, <A HREF="avstruct_1bn7.htm">KSFILTERFACTORY</A>, <A HREF="avstruct_1yk3.htm">KSFILTER</A>, <A HREF="avstruct_5s4z.htm">KSPIN</A>, <A HREF="avfunc_4zoz.htm"><B>KsAddItemToObjectBag</B></A>, <A HREF="avfunc_73ub.htm"><B>KsGetDeviceForDeviceObject</B></A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KSDEVICE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
