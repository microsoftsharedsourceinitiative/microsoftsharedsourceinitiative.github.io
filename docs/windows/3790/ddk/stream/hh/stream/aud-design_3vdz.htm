<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Sample Audio Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Sample Audio Drivers">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_sample_audio_drivers_ksg"></A>Sample Audio Drivers</H3>

<P>The Windows DDK includes a number of audio driver samples that illustrate the principles and features of the WDM audio architecture. These are working implementations with source code that can serve as a starting point for writing a proprietary driver.</P>

<P>The DDK contains the following audio driver samples:

<UL>
	<LI><I>ac97</I>
<P>A sample audio driver that runs on an Intel motherboard with an integrated AC97 controller. This sample shows how to write a WDM audio adapter driver that implements WavePci support for a PCI add-in card with scatter/gather DMA capabilities. Included with this sample driver are additional subdirectories containing sample code that works in conjunction with the driver. The subdirectories are named as follows:

<UL>
	<LI><I>cpl</I>
<P>This sample shows how to write a control panel application. It requires that both the <I>proppage</I> sample DLL and the <I>ac97</I> sample driver be installed.
</LI>

	<LI><I>driver</I>
<P>This is the sample audio driver for the AC97 controller.
</LI>

	<LI><I>INFViewer</I>
<P>This subdirectory contains an HTML version of the driver's INF file with hot-linked references to INF sections and keyword definitions in order to facilitate easy exploration.
</LI>

	<LI><I>proppage</I>
<P>This sample shows how to write a property-page DLL that gets loaded by the device manager when a user elects to display the properties of your device. In addition to displaying the default property sheets, the device manager also displays the property sheet that is defined in the sample. This sample DLL requires that the <I>ac97</I> sample driver be installed.
</LI>
</UL>
</LI>

	<LI><I>ddksynth</I>
<P>Kernel-mode DLS synthesizer. This sample can be adapted for a MIDI <I>output</I> device as well. The implementation of the <I>ddksynth</I> sample is similar to that of the kernel-mode DirectMusic® synthesizer, except that the reverb code has been removed from <I>ddksynth</I> due to licensing restrictions.
</LI>

	<LI><I>dmusuart</I>
<P>MPU-401 miniport driver for processing DirectMusic and MIDI input and output streams. This is the source code for the built-in DMusUART miniport driver in <I>portcls.sys</I>. Hardware vendors can adapt this sample to write their own custom miniport drivers.
</LI>

	<LI><I>fmsynth</I>
<P>FM-synth miniport driver for MIDI. This sample driver provides an interface to a device that implements OPL3-style synthesis. This is the source code for the built-in FMSynth miniport driver in <I>portcls.sys</I>. Hardware vendors can adapt this sample to write their own custom miniport drivers.
</LI>

	<LI><I>GFX</I>
<P>The two GFX samples appear in the DDK for Windows&nbsp;XP&nbsp;SP1, Windows&nbsp;Server 2003, and later. These samples implement support for a simple GFX (global effects) filter:

<UL>
	<LI><I>driver</I>
<P>This sample GFX driver performs a simple data transformation on a stereo audio stream that is played through a pair of USB speakers.
</LI>

	<LI><I>GFXProp</I>
<P>This sample implements a property page that the user accesses through the Windows Multimedia control panel in order to configure the GFX filter.
</LI>
</UL>
</LI>

	<LI><I>mpu401</I>
<P>Stand-alone sample adapter driver. This adapter driver implements standard functionality for an MPU-401 MIDI interface device. The source code for this sample is quite small because it uses only the system-supplied miniport drivers that are implemented in <I>portcls.sys</I>.
</LI>

	<LI><I>msvad</I>
<P>Microsoft Virtual Audio Device. This is a collection of samples that all use the same "virtual audio device" in lieu of an actual hardware-based adapter driver. Each of these samples highlights a different facet of the WDM audio driver architecture:

<UL>
	<LI><I>ac3</I>
<P>Demonstrates support for a non-PCM audio data format.
</LI>

	<LI><I>drmmult</I>
<P>Demonstrates support for multiple-stream audio with SAP-protected content. For information about SAP (secure audio path), see the Platform SDK documentation.
</LI>

	<LI><I>drmsimp</I>
<P>Demonstrates support for a single audio stream with SAP-protected content.
</LI>

	<LI><I>ds2dhw</I>
<P>Demonstrates support for hardware-accelerated two-dimensional mixing for DirectSound.
</LI>

	<LI><I>multstr</I>
<P>Demonstrates support for playback of multiple streams of PCM audio data.
</LI>

	<LI><I>pcmex</I>
<P>Demonstrates support for a PCM audio format that is defined by the <A HREF="aud-prop_7wz7.htm">WAVEFORMATEXTENSIBLE</A> structure.
</LI>

	<LI><I>simple</I>
<P>A skeleton reference implementation of an audio adapter driver upon which the other <I>msvad</I> sample drivers are built.
</LI>
</UL>
</LI>

	<LI><I>sb16</I>
<P>Sound Blaster 16 sample. This sample implements an audio adapter driver for an SB-compatible adapter card on an ISA bus.
</LI>

	<LI><I>stdunk</I>
<P>Standard <B>IUnknown</B> sample. Skeleton implementation of a standard <B>IUnknown</B> interface that conforms to the port class model for using COM in the kernel.
</LI>
</UL>

<P>For details, see the readme documentation that accompanies each of these samples in the DDK. </P>

<P>To install the portion of the Windows DDK that contains the WDM audio driver samples, follow these instructions:

<UL>
	<LI>Run the Windows DDK setup application.</LI>

	<LI>From the list of component groups that the setup application displays, first select "WDM Samples" under "Windows DDK"; then select "Audio Samples".</LI>
</UL>

<P>When setup completes, you will find the audio driver samples in the <I>src\wdm\audio </I>subdirectory under the main directory of your DDK installation.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Sample%20Audio%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
