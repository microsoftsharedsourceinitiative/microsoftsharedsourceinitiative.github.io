<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KSNODETYPE_ACOUSTIC_ECHO_CANCEL</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KSNODETYPE_ACOUSTIC_ECHO_CANCEL">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ksnodetype_acoustic_echo_cancel_ks"></A>KSNODETYPE_ACOUSTIC_ECHO_CANCEL</H1>

<P>The KSNODETYPE_ACOUSTIC_ECHO_CANCEL node represents an AEC (acoustic echo cancellation) control. An AEC node has connections for two input streams and two output streams. One input/output pair is used for the capture stream, and the other input/output pair is used for the render stream. The capture-output and render-input streams have the same format. The capture-input and render-output streams can have a different number of channels and different sample rates. However, in a typical implementation, the two streams either have the same sample rate or a combination, such as 16 and 48 kHz or 11 and 44 kHz, in which one sample rate is an integer multiple of the other.</P>

<P>An AEC node should number its logical pins with the pin IDs from header file <I>ksmedia.h</I>, which are shown in the following table.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=50%>Pin ID Parameter</TH>
<TH align=left width=50%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=50%>KSNODEPIN_AEC_RENDER_IN</TD>
<TD width=50%>Sink pin (node input) for render stream.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>KSNODEPIN_AEC_RENDER_OUT</TD>
<TD width=50%>Source pin (node output) for render stream.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>KSNODEPIN_AEC_CAPTURE_IN</TD>
<TD width=50%>Sink pin (node input) for capture stream.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>KSNODEPIN_AEC_CAPTURE_OUT</TD>
<TD width=50%>Source pin (node output) for capture stream.</TD>
</TR>
</TABLE><BR>

<P>Note that the <I>pins </I>in the preceding table are logical pins on the node, which are used solely to specify connections internal to the filter, rather than external pins on the filter, which are used to connect to other filters. For more information, see <A HREF="audpc-struct_6yb7.htm">PCCONNECTION_DESCRIPTOR</A>.</P>

<P>For information on how a filter containing an AEC node can provide support for full-duplex DirectSound applications, see <A HREF="pcdesign_4xbb.htm">DirectSound Capture Effects</A>.</P>

<P>When a filter containing an AEC node is created or the node is reset, the node is initially configured to operate in pass-through mode.</P>

<P>A KSNODETYPE_ACOUSTIC_ECHO_CANCEL node should support the following properties in order to enable hardware acceleration:</P>

<P class=indent1><A HREF="aud-prop_6ek3.htm">KSPROPERTY_AUDIO_CPU_RESOURCES</A> </P>

<P class=indent1><A HREF="aud-prop_4wtv.htm">KSPROPERTY_AUDIO_ALGORITHM_INSTANCE</A> </P>

<P class=indent1><A HREF="aud-prop_6sab.htm">KSPROPERTY_TOPOLOGYNODE_ENABLE</A> </P>

<P class=indent1><A HREF="aud-prop_3r5f.htm">KSPROPERTY_TOPOLOGYNODE_RESET</A> </P>

<P>The KSPROPERTY_TOPOLOGYNODE_ENABLE property is used to enable and disable an AEC node. When disabled, the node operates in pass-through mode; that is, it allows the render and capture streams to pass through the node without modification.</P>

<P>A KSNODETYPE_ACOUSTIC_ECHO_CANCEL node can also support the following optional properties in order to provide additional control and monitoring capabilities:</P>

<P class=indent1><A HREF="aud-prop_25rn.htm">KSPROPERTY_AEC_MODE</A> </P>

<P class=indent1><A HREF="aud-prop_9ctv.htm">KSPROPERTY_AEC_NOISE_FILL_ENABLE</A> </P>

<P class=indent1><A HREF="aud-prop_4skz.htm">KSPROPERTY_AEC_STATUS</A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KSNODETYPE_ACOUSTIC_ECHO_CANCEL"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
