<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KSPIN_DISPATCH</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KSPIN_DISPATCH">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_kspin_dispatch_ks"></A>KSPIN_DISPATCH</H1>

<P>The KSPIN_DISPATCH structure describes the callbacks for which clients can register in order to receive notification of pin events.</P>

<PRE class=syntax>typedef struct {
  PFNKSPINIRP  Create;
  PFNKSPINIRP  Close;
  PFNKSPIN  Process;
  PFNKSPINVOID  Reset;
  PFNKSPINSETDATAFORMAT  SetDataFormat;
  PFNKSPINSETDEVICESTATE  SetDeviceState;
  PFNKSPIN  Connect;
  PFNKSPINVOID  Disconnect;
  const KSCLOCK_DISPATCH*  Clock;
  const KSALLOCATOR_DISPATCH*  Allocator;
} KSPIN_DISPATCH, *PKSPIN_DISPATCH;</PRE>

<H4>Members</H4>

<DL>
<DT><B>Create</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_2f8z.htm"><B>AVStrMiniPinCreate</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Close</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_1nhv.htm"><B>AVStrMiniPinClose</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Process</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_9xo3.htm"><B>AVStrMiniPinProcess</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Reset</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_2boz.htm"><B>AVStrMiniPinReset</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>SetDataFormat</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_5epf.htm"><B>AVStrMiniPinSetDataFormat</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>SetDeviceState</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_6v8z.htm"><B>AVStrMiniPinSetDeviceState</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Connect</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_7x2r.htm"><B>AVStrMiniPinConnect</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Disconnect</B></DT>

<DD>Pointer to a minidriver-supplied <A HREF="avstclbk_34fn.htm"><B>AVStrMiniPinDisconnect</B></A> callback routine. Optional. Can be NULL.</DD>

<DT><B>Clock</B></DT>

<DD>Pointer to a <A HREF="avstruct_7rjn.htm">KSCLOCK_DISPATCH</A> structure. Specify this member for a pin that exposes a clock. Optional. Can be NULL.</DD>

<DT><B>Allocator</B></DT>

<DD>Pointer to a <A HREF="avstruct_0g8j.htm">KSALLOCATOR_DISPATCH</A> structure. Specify this member for a pin that is capable of performing kernel-level allocation. Optional. Can be NULL.</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>ks.h</I>. Include <I>ks.h</I>.</P>

<H4>Comments</H4>

<P>This structure is available in Windows XP and later operating systems and in DirectX 8.0 and later versions.</P>

<P>Any of the callback pointers can be NULL, indicating that the minidriver does not require to receive notification for this particular dispatch.</P>

<P>If the minidriver needs to determine whether or not it has been signaled to go to a specific state (for example KSSTATE_RUN), comparing the value of the <B>DeviceState</B> member of <A HREF="avstruct_5s4z.htm">KSPIN</A> to KSSTATE_RUN is not a reliable method of doing this. <B>DeviceState</B> refers to the state to which the pin has been signaled to go, not the pipe. To perform the above reliably, instead create a variable in the <B>SetDeviceState</B> callback of this structure and then check this variable to make the determination.</P>

<H4>See Also</H4>

<P><A HREF="avstruct_7rjn.htm">KSCLOCK_DISPATCH</A>, <A HREF="avstruct_0g8j.htm">KSALLOCATOR_DISPATCH</A>, <A HREF="avfunc_6cdv.htm"><B>KsCompletePendingRequest</B></A>, <A HREF="avstruct_5s4z.htm">KSPIN</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KSPIN_DISPATCH"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
