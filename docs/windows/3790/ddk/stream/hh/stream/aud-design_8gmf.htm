<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Output Buffer Size</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Output Buffer Size">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_output_buffer_size_ksg"></A>Output Buffer Size</H3>

<P>The miniport driver's <A HREF="audmp-routines_06r7.htm"><B>IMiniport::DataRangeIntersection</B></A> method copies the structure that specifies the negotiated data format into a buffer that is allocated by the caller. The method's <I>OutputBufferLength</I> parameter specifies the buffer's size in bytes. Note that the size of the format structure varies with the selected format. In order to avoid writing past the end of the buffer, the <B>DataRangeIntersection</B> method should first verify that the allocated buffer is big enough to contain the format.</P>

<P>For a mono or stereo format, the minimum size for the output buffer is either <B>sizeof</B>(<A HREF="aud-prop_7v77.htm">KSDATAFORMAT_WAVEFORMATEX</A>) or <B>sizeof</B>(<A HREF="aud-prop_5d83.htm">KSDATAFORMAT_DSOUND</A>), depending on whether a WAVEFORMATEX or DSound format has been selected.</P>

<P>If the wave format supports more than two channels, the <A HREF="aud-prop_5s4z.htm">WAVEFORMATEX</A> structure that is embedded at the end of the KSDATAFORMAT_WAVEFORMATEX structure expands to occupy an additional number of bytes that is equal to the difference </P>

<P class=indent1><B>sizeof</B>(<A HREF="aud-prop_7wz7.htm">WAVEFORMATEXTENSIBLE</A>)&nbsp;-&nbsp;<B>sizeof</B>(WAVEFORMATEX)</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Output%20Buffer%20Size"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
