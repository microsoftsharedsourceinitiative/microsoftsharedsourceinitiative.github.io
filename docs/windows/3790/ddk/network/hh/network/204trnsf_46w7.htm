<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Packet Out-of-Band Data</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Packet Out-of-Band Data">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_packet_out_of_band_data_ng"></A>Packet Out-of-Band Data</H1>

<P>Every NDIS_PACKET-type descriptor has an associated out-of-band (OOB) data block in which media-specific and priority information is passed. This substructure is defined as:</P>

<PRE>typedef struct _NDIS_PACKET_OOB_DATA {
    Union {
        ULONGLONG   TimeToSend;
        ULONGLONG   TimeSent
         }
    ULONGLONG       TimeReceived;
    UINT            HeaderSize;
    UINT            SizeMediaSpecificInformation;
    PVOID           MediaSpecificInformation;
    NDIS_STATUS     Status;
    }; NDIS_PACKET_OOB_DATA, *PNDIS_PACKET_OOB_DATA </PRE>

<P>A miniport driver that has support for OOB data should use the NDIS macros provided for accessing such data. It should never attempt to calculate offsets or otherwise take actions that depend on knowing  the exact structure of a packet's OOB data.</P>

<P>The NDIS macros for OOB data include the following:

<DL>
<DT><A HREF="103ndisx_43qq.htm">NDIS_OOB_DATA_FROM_PACKET</A>( Packet )</DT>

<DD>Returns a pointer to the NDIS_PACKET_OOB_DATA substructure. This pointer can be used to access members of NDIS_PACKET_OOB_DATA by member name.</DD>

<DT><A HREF="103ndisx_6twy.htm">NDIS_SET_PACKET_STATUS</A>( <I>Packet</I>, <I>Status</I> )</DT>

<DD>Sets the <B>Status</B> member.</DD>

<DT><A HREF="103ndisx_9fg2.htm">NDIS_SET_PACKET_TIME_TO_SEND</A>( <I>Packet</I>, <I>TimeToSend</I> )</DT>

<DD>Sets the <B>TimeToSend</B> member.</DD>

<DT><A HREF="103ndisx_2u42.htm">NDIS_SET_PACKET_TIME_SENT</A>( <I>Packet</I>, <I>TimeSent</I> )</DT>

<DD>Sets the <B>TimeSent</B> member.</DD>

<DT><A HREF="103ndisx_3nxu.htm">NDIS_SET_PACKET_TIME_RECEIVED</A>( <I>Packet</I>, <I>TimeReceived</I> )</DT>

<DD>Sets the <B>TimeReceived</B> member.</DD>

<DT><A HREF="103ndisx_5w8j.htm">NDIS_SET_PACKET_HEADER_SIZE</A>( <I>Packet</I>, <I>HeaderSize</I> )</DT>

<DD>Sets the <B>HeaderSize</B> member.</DD>

<DT><A HREF="103ndisx_6rxu.htm">NDIS_SET_PACKET_MEDIA_SPECIFIC_INFO</A>( <I>Packet</I>, <I>MediaSpecificInfo</I>, <I>SizeMediaSpecificInfo</I> )</DT>

<DD>Sets the <B>MediaSpecificInformation</B> and <B>SizeMediaSpecificInformation</B> members)</DD>

<DT><A HREF="103ndisx_05bm.htm">NDIS_GET_PACKET_STATUS</A>( <I>Packet</I> )</DT>

<DD>Returns the <B>Status</B> member.</DD>

<DT><A HREF="103ndisx_0iuq.htm">NDIS_GET_PACKET_TIME_TO_SEND</A>( <I>Packet</I> )</DT>

<DD>Returns the <B>TimeToSend</B> member.</DD>

<DT><A HREF="103ndisx_11iq.htm">NDIS_GET_PACKET_TIME_SENT</A>( <I>Packet</I> )</DT>

<DD>Returns the <B>TimeSent</B> member.</DD>

<DT><A HREF="103ndisx_3q0i.htm">NDIS_GET_PACKET_TIME_RECEIVED</A>( <I>Packet</I> )</DT>

<DD>Returns the <B>TimeReceived</B> member.</DD>

<DT><A HREF="103ndisx_6oz6.htm">NDIS_GET_PACKET_HEADER_SIZE</A>( <I>Packet</I> )</DT>

<DD>Returns the <B>HeaderSize</B> member.</DD>

<DT><A HREF="103ndisx_4m0i.htm">NDIS_GET_PACKET_MEDIA_SPECIFIC_INFO</A>( <I>Packet</I>, <I>pMediaSpecificInfo</I>, <I>pSizeMediaSpecificInfo</I> )</DT>

<DD>Returns media-specific information in a buffer whose address is provided by the caller. Returns the size in bytes of that information stored in a caller-supplied variable.
</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Packet%20Out-of-Band%20Data"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
