<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Enabling Task-Offload Capabilities</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Enabling Task-Offload Capabilities">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_enabling_task_offload_capabilities_ng"></A>Enabling Task-Offload Capabilities</H1>

<P>The TCP/IP transport enables a NIC's task-offload capabilities by setting <A HREF="216offload_0acy.htm">OID_TCP_TASK_OFFLOAD</A>. In this set operation, the TCP/IP transport passes, in the <I>InformationBuffer</I>, an <A HREF="105nstru_7c36.htm">NDIS_TASK_OFFLOAD_HEADER</A> structure that is followed immediately by an <A HREF="105nstru_3f5e.htm">NDIS_TASK_OFFLOAD</A> structure for each offload task that it is enabling.</P>

<P>The miniport driver must examine each NDIS_TASK_OFFLOAD structure in the <I>InformationBuffer</I> to determine which offload tasks (checksum, IPSec, and/or large packet segmentation) are being enabled. The miniport driver must also examine the task-specific structure (NDIS_TASK_TCP_IP_CHECKSUM, NDIS_TASK_IPSEC, or NDIS_TASK_TCP_LARGE_SEND) in the <B>TaskBuffer</B> of each NDIS_TASK_OFFLOAD structure to determine which specific capabilities for a particular offload task are being enabled.</P>

<P>The TCP/IP transport enables all offload capabilities for a NIC with a single set of OID_TCP_TASK_OFFLOAD. The miniport driver must fail any subsequent attempts to set OID_TCP_TASK_OFFLOAD.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Enabling%20Task-Offload%20Capabilities"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
