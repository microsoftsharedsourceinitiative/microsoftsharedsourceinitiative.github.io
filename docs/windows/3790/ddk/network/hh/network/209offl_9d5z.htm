<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Reporting a NIC's TCP-Packet-Segmentation Capabilities</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Reporting a NIC's TCP-Packet-Segmentation Capabilities">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_reporting_a_nic_s_tcp_packet_segmentation_capabilities_ng"></A>Reporting a NIC's TCP-Packet-Segmentation Capabilities</H2>

<P>The miniport driver specifies its NIC's packet-segmentation capabilities in an <A HREF="105nstru_9ng2.htm">NDIS_TASK_TCP_LARGE_SEND</A> structure. In response to a query of <A HREF="216offload_0acy.htm">OID_TCP_TASK_OFFLOAD</A>, the miniport driver overlays this structure onto the <B>TaskBuffer</B> of an <A HREF="105nstru_3f5e.htm">NDIS_TASK_OFFLOAD</A> structure that the miniport driver returns in the <I>InformationBuffer</I>.</P>

<P>The NDIS_TASK_TCP_LARGE_SEND structure is defined as:</P>

<PRE>typedef struct _NDIS_TASK_TCP_LARGE_SEND
{
    ULONG      Version;
    ULONG      MaxOffLoadSize;
    ULONG      MinSegmentCount;
    BOOLEAN    TcpOptions;
    BOOLEAN    IpOptions;
} NDIS_TASK_TCP_LARGE_SEND, *PNDIS_TASK_TCP_LARGE_SEND;
</PRE>

<P>The miniport driver must specify the following in the NDIS_TASK_TCP_LARGE_SEND structure:

<UL>
	<LI>The <B>MaxOffLoadSize</B>, which is the maximum bytes of user data that the TCP/IP transport can pass to the miniport driver in a large TCP packet.</LI>

	<LI>The <B>MinSegmentCount</B>, which is the minimum number of segments by which a large TCP packet must be divisible before the TCP/IP transport can offload it to the miniport driver's NIC for segmentation.</LI>

	<LI>Whether its NIC can segment a large TCP packet that contains TCP options.</LI>

	<LI>Whether its NIC can segment a large TCP packet that contains IP options.</LI>
</UL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Reporting%20a%20NIC's%20TCP-Packet-Segmentation%20Capabilities"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
