<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DbgCon</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DbgCon">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_dbgcon_ng"></A>DbgCon</H2>

<P>The tool DbgCon (<I>Dbgcon.exe</I>) can be used to debug IrDA miniport drivers in addition to or in place of using the kernel debugger. DbgCon gathers debug data from a checked version of the IrDA protocol driver, <I>irda.sys</I>. Pressing the ESC key suspends DbgCon from outputting data so you can select options that modify the behavior of DbgCon; pressing the Q key quits DbgCon. DbgCon displays various types of debug data depending on the options that you select. When DbgCon starts, its default behavior is to just display IrDA errors to the console on which Dbgcon runs. You must select specific options to display any other debug data and to also direct debug data to the kernel debugger. Thereafter, each time you select a particular option, you toggle the behavior for that option either on or off. </P>

<P>The following options are available: </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=21%>Option</TH>
<TH align=left width=15%>Start Default</TH>
<TH align=left width=64%>Behavior</TH>
</TR>

<TR VALIGN="top">
<TD width=21%>? or H</TD>
<TD width=15%>None</TD>
<TD width=64%>Lists available options.</TD>
</TR>

<TR VALIGN="top">
<TD width=21%>Console</TD>
<TD width=15%>ON</TD>
<TD width=64%>IrDA directs its debug output to the console on which Dbgcon runs. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>Debugger</TD>
<TD width=15%>OFF</TD>
<TD width=64%>IrDA directs its debug output to the kernel debugger. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>ERROR</TD>
<TD width=15%>ON</TD>
<TD width=64%>Displays severe IrDA errors. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LAP</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays IrLAP information (limited output). </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LAPLOG</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays a log of events and actions from IrLAP. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LMP</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays full IrLMP debugging. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LMP_CONN</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays connection information for Link Manager Protocol Data Unit (LM-PDU). </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LMP_CREDIT</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays TinyTP credit information. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>LMP_IAS</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays IrLMP IAS information. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>MAC</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Not used. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>NDIS</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays lower-edge activity of <I>irda.sys</I>. This option is limited in usefulness. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>RXFRAME</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays the IrLAP header of frames received from the IrDA miniport driver. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>TDI</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays upper-edge activity of <I>irda.sys</I>. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>TDI_IRP</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays IRP requests from a TDI client. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>TXFRAME</TD>
<TD width=15%>OFF</TD>
<TD width=64%>Displays the IrLAP header of frames to be transmitted to the IrDA miniport driver. </TD>
</TR>

<TR VALIGN="top">
<TD width=21%>WARN</TD>
<TD width=15%>ON</TD>
<TD width=64%>Displays minor IrDA errors. </TD>
</TR>
</TABLE><BR>

<P>The following code shows how to use Dbgcon:</P>

<PRE>// At the command prompt type Dbgcon.
// Dbgcon starts and the promt changes to "Dbgcom&gt;".
// To make each of the following changes, 
// first press the ESC key to halt Dbgcon.
Dbgcom&gt; Debugger // Directs output to the kernel debugger.
Dbgcom&gt; TDI_IRP // Displays IRP requests from a TDI client. 
Dbgcom&gt; TDI_IRP // Stops displaying IRP requests from a TDI client. 
Dbgcom&gt; q // Quits Dbgcon and returns to the command prompt.</PRE>

<P class=note><B>Note</B>&nbsp;&nbsp;To debug IrDA miniport drivers, a checked version of <I>irda.sys</I> is required on the target computer. However, instead of installing an entire checked-build operating system, copying the checked version of <I>irda.sys</I> onto an otherwise free-build operating system is adequate. Before you copy the checked version of <I>irda.sys</I> to the target computer, you must disable Windows File Protection (WFP). To ensure that WFP is disabled, start the operating system in safe mode. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DbgCon"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
