<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Registering a WDM Smart Card Reader Driver</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Registering a WDM Smart Card Reader Driver">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Smart&nbsp;Card&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_ntovr_registering_a_wdm_smart_card_reader_driver"></A>Registering a WDM Smart Card Reader Driver</H2>

<P>To make a smart card reader driver visible to the device manager, you must put the indicated registry values under the following key:</P>

<P><B>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\<I>SmartCardDriver</I></B></P>

<P>The required values are listed in the following table.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=17%>Registry Value Name</TH>
<TH align=left width=27%>Contents of the Registry Value</TH>
<TH align=left width=56%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=17%><I>Start</I></TD>
<TD width=27%><B>DWORD:0x0000002</B></TD>
<TD width=56%>A value of 2 makes the driver start automatically. During development, you should use a <I>Start</I> value of 3, which makes the driver start manually.</TD>
</TR>

<TR VALIGN="top">
<TD width=17%><I>Type</I></TD>
<TD width=27%><B>DWORD:0x0000001</B></TD>
<TD width=56%>A value of 1 identifies the driver as a kernel-mode driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=17%><I>Group</I></TD>
<TD width=27%><B>SmartCardReader</B></TD>
<TD width=56%>Every driver has to be a member of the setup class <B>SmartCardReader</B>, since the smart card resource manager waits for this class to start.</TD>
</TR>

<TR VALIGN="top">
<TD width=17%><I>ErrorControl</I></TD>
<TD width=27%><B>DWORD:0x0000001</B></TD>
<TD width=56%>A value of 1 lets the system continue to boot even if the driver fails, but it shows an error message if the driver fails to load.</TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Registering%20a%20WDM%20Smart%20Card%20Reader%20Driver"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
