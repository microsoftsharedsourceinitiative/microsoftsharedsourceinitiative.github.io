<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DIOCPARAMETERS</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DIOCPARAMETERS">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Smart&nbsp;Card&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_ntstruct_diocparameters"></A>DIOCPARAMETERS</H1>

<P>The DIOCPARAMETERS structure contains information that an application has passed to the virtual device driver (VxD) by calling the <B>DeviceIoControl</B> function. </P>

<PRE class=syntax>typedef struct DIOCParams   {
  DWORD  Internal1;
  DWORD  VMHandle;
  DWORD  Internal2;
  DWORD  dwIoControlCode;
  DWORD  lpvInBuffer;
  DWORD  cbInBuffer;
  DWORD  lpvOutBuffer;
  DWORD  cbOutBuffer;
  DWORD  lpcbBytesReturned;
  DWORD  lpoOverlapped;
  DWORD  hDevice;
  DWORD  tagProcess;
} DIOCPARAMETERS;
</PRE>

<H4>Members</H4>

<DL>
<DT><B>Internal1</B></DT>

<DD>Reserved for system use. </DD>

<DT><B>VMHandle</B></DT>

<DD>Contains a handle to a virtual machine. </DD>

<DT><B>Internal2</B></DT>

<DD>Reserved for system use. </DD>

<DT><B>dwIoControlCode</B></DT>

<DD>Contains the control code to process. This member can be a developer-defined value or one of these system-defined values. 

<TABLE>

<TR VALIGN="top">
<TH align=left width=38%>Value</TH>
<TH align=left width=62%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=38%>DIOC_CLOSEHANDLE</TD>
<TD width=62%>Notifies a VxD that an application has closed its device handle for the VxD. The VxD should perform cleanup operations and release any structures associated with the application.</TD>
</TR>

<TR VALIGN="top">
<TD width=38%>DIOC_GETVERSION</TD>
<TD width=62%>Queries the VxD to determine if it supports the device IOCTL interface. If the VxD supports the interface, it must clear the EAX register. Otherwise, it must place a nonzero value in EAX. If <B>cbOutBuffer</B> is nonzero and the VxD supports the interface, the VxD should copy version information to the <B>lpvOutBuffer</B>.</TD>
</TR>
</TABLE>
</DD>

<DT></DT>

<DT><B>lpvInBuffer</B></DT>

<DD>Pointer to a buffer that contains data needed to process the control code. </DD>

<DT><B>cbInBuffer</B></DT>

<DD>Contains the size, in bytes, of the buffer pointed to by <B>lpvInBuffer</B>. </DD>

<DT><B>lpvOutBuffer</B></DT>

<DD>Pointer to a buffer that receives the results of processing the control code. </DD>

<DT><B>cbOutBuffer</B></DT>

<DD>Contains the size, in bytes, of the buffer pointed to by <B>lpvOutBuffer</B>. </DD>

<DT><B>lpcbBytesReturned</B></DT>

<DD>Contains the number of bytes copied to the buffer pointed to by <B>lpvOutBuffer</B>. </DD>

<DT><B>lpoOverlapped</B></DT>

<DD>Pointer to an OVERLAPPED structure that contains information used to complete the command asynchronously. If the command is to be completed synchronously, this member is NULL. For a description of the OVERLAPPED structure, see the Windows 2000 Platform SDK documentation.</DD>

<DT><B>hDevice</B></DT>

<DD>Handle to the device. </DD>

<DT><B>tagProcess</B></DT>

<DD>Contains information that the VxD can use to tag the current request along with <B>hDevice</B>. When the VxD receives a DIOC_CLOSEHANDLE control code for <B>hDevice</B> and <B>tagProcess</B>, it should perform appropriate cleanup operations. </DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>vwin32.h</I>. Include <I>vwin32.h</I>.</P>

<H4>See Also</H4>

<P><A HREF="scstruct_91t9.htm">OS_DEP_DATA (WDM)</A>, <A HREF="scstruct_8zms.htm">OS_DEP_DATA (VxD)</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DIOCPARAMETERS"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
