<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Differences in WDM Versions</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Differences in WDM Versions">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_cross_platform_issues_for_wdm_drivers_si">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_differences_in_wdm_versions_kg"></A>Differences in WDM Versions</H2>

<P>The simplest way to ensure cross-system compatibility is to write a driver that uses only features that are supported by the lowest-numbered version of WDM. However, this is not always possible. Sometimes, drivers require additional code to take advantage of the features that are available in later versions of WDM, or to compensate for differences between Windows operating systems. </P>

<H4>WDM Differences in Driver Support Routines</H4>

<P>The DDK reference page for each <A HREF="drisupport_6mr6.htm">driver support routine</A> indicates if the routine is restricted to specific versions of WDM, or if its behavior is different on different operating system versions. Before using any driver support routine in a cross-system driver, be sure to understand any version-specific restrictions or behaviors.</P>

<H4>WDM Differences in Plug and Play</H4>

<P>The following Plug and Play I/O request packet (IRP) is supported only in Windows 2000 and later versions of the NT-based operating system (WDM version 1.10 and later):</P>

<P class=indent1><A HREF="pnp-irps_8e42.htm">IRP_MN_SURPRISE_REMOVAL</A></P>

<P>In addition, the following IRPs work differently on Windows 98/Me from how they work on the NT-based operating system:</P>

<P class=indent1><A HREF="pnp-irps_3n5e.htm">IRP_MN_STOP_DEVICE</A> and <A HREF="pnp-irps_4noy.htm">IRP_MN_REMOVE_DEVICE</A> </P>

<P class=indent1><A HREF="pnp-irps_22k2.htm">IRP_MN_QUERY_REMOVE_DEVICE</A>  </P>

<H4>WDM Differences in Power Management</H4>

<P>The following power management functions and I/O requests differ in operation between the Windows 98/Me operating system and the NT-based operating system:</P>

<P class=indent1><A HREF="portn_5saa.htm"><B>PoSetPowerState</B></A></P>

<P class=indent1><A HREF="portn_55gy.htm"><B>PoRequestPowerIrp</B></A></P>

<P class=indent1><A HREF="portn_14he.htm"><B>PoRegisterDeviceForIdleDetection</B></A></P>

<P class=indent1><A HREF="poirp_9e9e.htm"><B>IRP_MN_QUERY_POWER</B></A></P>

<P class=indent1><A HREF="poirp_6hde.htm"><B>IRP_MN_SET_POWER</B></A></P>

<P>When completing power IRPs, drivers on Windows 98/Me must complete power IRPs at IRQL = PASSIVE_LEVEL, while drivers on the NT-based operating system can complete such IRPs at IRQL = PASSIVE_LEVEL or IRQL = DISPATCH_LEVEL. </P>

<P>The DO_POWER_PAGABLE flag in the <A HREF="k112_32cy.htm">DEVICE_OBJECT</A> structure is used differently on the Windows 98/Me operating system than on the NT-based operating system.</P>

<H4>WDM Differences in Kernel-Mode Driver Operation</H4>

<P>Kernel-mode WDM drivers for Windows 98/Me must follow certain guidelines for using floating-point operations, MMX, 3DNOW!, or Intel's SSE extensions. For more information, see <A HREF="other_7iqv.htm">Using Floating Point or MMX in a WDM Driver</A>.</P>

<P>Windows 98/Me provides a fixed number of worker threads that might not be adequate for some drivers. For more information about this and other Windows 98/Me-specific WDM issues, see <A HREF="JavaScript:hhobj_1.Click()">Cross-Platform Issues for WDM Drivers</A>. </P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Differences%20in%20WDM%20Versions"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
