<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>IO_ALLOCATION_ACTION</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="IO_ALLOCATION_ACTION">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_io_allocation_action_kr"></A>IO_ALLOCATION_ACTION</H1>

<P>The IO_ALLOCATION_ACTION enumerated type is used to specify return values for <A HREF="drvrrtns_7vea.htm"><I>AdapterControl</I></A> and <A HREF="drvrrtns_2ype.htm"><I>ControllerControl</I></A> routines.</P>

<PRE class=syntax>typedef enum _IO_ALLOCATION_ACTION {
    KeepObject = 1,
    DeallocateObject,
    DeallocateObjectKeepRegisters
} IO_ALLOCATION_ACTION, *PIO_ALLOCATION_ACTION;</PRE>

<H4>Enumerators</H4>

<DL>
<DT><B>KeepObject</B></DT>

<DD>Indicates that you want the driver to retain ownership of the adapter or controller object.</DD>

<DT><B>DeallocateObject</B></DT>

<DD>Indicates that you do not want the driver to retain ownership of the adapter or controller object.</DD>

<DT><B>DeallocateObjectKeepRegisters</B></DT>

<DD><I>For adapter objects only</I>. Indicates that you do not want the driver to retain ownership of the adapter object, but you do want the driver to retain ownership of the allocated map registers.</DD>
</DL>

<H4>Comments</H4>

<P>If an <I>AdapterControl</I> or <I>ControllerControl</I> routine completes an IRP, or if it can set up an operation (such as a disk seek) for a target device object that could be overlapped with an operation for another device object, it should return <B>DeallocateObject</B>.</P>

<P>If a driver uses packet-based bus-master DMA, its <I>AdapterControl</I> routine should return <B>DeallocateObjectKeepRegisters</B>.</P>

<P>Otherwise, the driver should return <B>KeepObject</B>.</P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: IO_ALLOCATION_ACTION"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
