<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DriverEntry Return Values</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DriverEntry Return Values">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_driverentry_return_values_kg"></A>DriverEntry Return Values</H2>

<P>A <A HREF="drvrrtns_6r76.htm"><B>DriverEntry</B></A> routine returns an NTSTATUS value, either STATUS_SUCCESS or an appropriate error status. </P>

<P>The <B>DriverEntry</B> routine should postpone any call to <A HREF="k104_1df6.htm"><B>IoRegisterDriverReinitialization</B></A> until just before it returns STATUS_SUCCESS. It must not make this call unless it will return STATUS_SUCCESS.</P>

<P>If a <B>DriverEntry</B> routine returns something other than STATUS_SUCCESS, that driver does not remain loaded.</P>

<P>A <B>DriverEntry</B> routine that will fail initialization must free any system objects, system resources, and registry resources it has already set up before it returns control. It should reset the driver’s dispatch entry points in the driver object for <A HREF="k113_4a0i.htm">IRP_MJ_FLUSH_BUFFERS</A> and <A HREF="k113_1wz6.htm">IRP_MJ_SHUTDOWN</A> to NULL if the driver supports these requests. </P>

<P>If a driver will fail initialization, the <B>DriverEntry</B> routine also should log an error <I>before</I> returning control. See <A HREF="other_92jr.htm">Logging Errors</A>.</P>

<P>Note that a driver's <A HREF="drvrrtns_7d82.htm"><I>Unload</I></A> routine is <I>not</I> called if a driver's <A HREF="drvrrtns_6r76.htm"><B>DriverEntry</B></A> routine returns a failure status.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DriverEntry%20Return%20Values"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
