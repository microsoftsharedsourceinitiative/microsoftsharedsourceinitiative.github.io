<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Specifying Device Characteristics</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Specifying Device Characteristics">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_specifying_device_characteristics_kg"></A>Specifying Device Characteristics</H2>

<P>Each device object can have one or more device characteristics.  Device characteristics are stored as flags in the <B>Characteristics</B> member of the device object's DEVICE_OBJECT structure.</P>

<P>Most drivers specify only the FILE_DEVICE_SECURE_OPEN characteristic.  This ensures that the same security settings are applied to any open request into the device's namespace.  For more information, see <A HREF="devobjts_7mav.htm">Controlling Device Namespace Access</A>.</P>

<P>The FILE_PNP_AUTOGENERATED_DEVICE_NAME is only used for PDOs.  The FILE_FLOPPY_DISKETTE, FILE_REMOVABLE_MEDIA, and FILE_WRITE_ONCE_MEDIA characteristics are specific to storage devices.  For a description of the possible device characteristic flags, see the <B>Characteristics</B> member of <A HREF="k112_32cy.htm">DEVICE_OBJECT</A>.</P>

<P>Certain device characteristics, such as FILE_PNP_AUTOGENERATED_DEVICE_NAME, only apply to individual device objects. Drivers can specify a setting for the device characteristics for individual device objects when they create the device object by calling <B>IoCreateDevice</B> or <B>IoCreateDeviceSecure</B>.</P>

<P>The following characteristics apply to the entire device stack:</P>

<P class=indent1>FILE_DEVICE_SECURE_OPEN</P>

<P class=indent1>FILE_FLOPPY_DISKETTE</P>

<P class=indent1>FILE_READ_ONLY_DEVICE</P>

<P class=indent1>FILE_REMOVABLE_MEDIA</P>

<P class=indent1>FILE_WRITE_ONCE_MEDIA</P>

<P>Drivers can set device characteristics that apply to the entire device stack by calling <B>IoCreateDevice</B> or <B>IoCreateDeviceSecure</B>. Alternatively, device characteristics that apply to the entire device stack can be set in the registry, for either the device or for the device's setup class.  (For more information, see <A HREF="devobjts_3bxj.htm">Setting Device Object Properties in the Registry</A>.)</P>

<P>The PnP Manager determines the registry setting for device characteristics as follows.

<UL>
	<LI>If a value is specified for the individual device, the PnP Manager uses that value;</LI>

	<LI>Otherwise if a value is specified for the device setup class, the PnP Manager uses that value;</LI>

	<LI>Otherwise the PnP Manager uses a value of zero as the registry setting.</LI>
</UL>

<P>If a device characteristic that applies to the entire device stack is set in the registry, or if it is set for any FDO or filter DO in the stack, then the PnP Manager sets it for every device object in the stack.  (If the device is raw-mode capable, and thus does not have an FDO, then the PnP Manager uses the PDO instead.)</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Specifying%20Device%20Characteristics"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
