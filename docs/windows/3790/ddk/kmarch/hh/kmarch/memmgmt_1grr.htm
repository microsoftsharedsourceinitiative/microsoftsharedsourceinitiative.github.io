<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>File-backed and Page-file-backed Sections</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="File-backed and Page-file-backed Sections">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_file_backed_and_page_file_backed_sections_kg"></A>File-backed and Page-file-backed Sections</H2>

<P>All memory sections are supported ("backed") by disk files that can contain, either temporarily or permanently, the data to be shared. When you create a section, you can identify a specific data file to which the section will be backed. Such sections are called <I>file-backed</I> sections. If you do not identify a backing file, the section is backed by the system's paging file and the section is called a <I>page-file-backed</I> section. The data in file-backed sections can be permanently written to disk. Data in page-file-backed sections is never permanently written to disk.</P>

<P>A <I>file-backed</I> section reflects the contents of an actual file on disk; in other words, it is a memory-mapped file. Any access to memory locations within a given file-backed section corresponds to accesses to locations in the associated file. If a process maps the view as read-only, any data that is read from the view is transparently read from the file. Likewise if the process maps the view as read-write, any data that is read from the view or written to the view is transparently read from or written to the file. In either case, the view's virtual memory does not take up any space in the page files. A file-backed section can also be mapped as copy-on-write. In that case, the view's data is read from the file, but any data written to the view is <I>not</I> written to the file; instead it is discarded once the final view is unmapped and the last handle to the section is closed.</P>

<P>A page-file-backed section is backed by the page files rather than by any explicit file on the disk. Any changes made to a page-file-backed section are automatically discarded once the section object is destroyed. Page-file-backed sections can be used as shared memory segments between two processes. </P>

<P>Any section, file-backed or not, can be shared between two processes. The same physical memory address range is mapped to a virtual memory address range within each process (though not necessarily to the same virtual address).</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: File-backed%20and%20Page-file-backed%20Sections"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
