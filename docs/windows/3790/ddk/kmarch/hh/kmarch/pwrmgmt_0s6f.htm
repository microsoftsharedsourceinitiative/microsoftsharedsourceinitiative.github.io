<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Sending a Wait/Wake IRP</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Sending a Wait/Wake IRP">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_sending_a_wait_wake_irp_kg"></A>Sending a Wait/Wake IRP</H2>

<P>The minor power IRP code <A HREF="poirp_44fm.htm">IRP_MN_WAIT_WAKE</A> provides for waking a device or waking the system. Drivers of devices that can wake themselves or the system send IRP_MN_WAIT_WAKE requests. The system sends IRP_MN_WAIT_WAKE requests only to devices that always wake the system, such as the power-on switch.</P>

<P>A driver sends an IRP_MN_WAIT_WAKE request for one of two reasons:

<OL>
	<LI>Its device must be able to return to the working state from a sleep state in response to an external wake-up signal. 
<P>For example, a modem's driver might send it a wait/wake IRP before setting it in power state D1 to conserve energy. The wait/wake IRP enables the modem to respond to an incoming call.
</LI>

	<LI>Its device must be able to wake the system in response to a wake-up signal. 
<P>When the system goes to sleep, the modem might remain in state D1 with an IRP_MN_WAIT_WAKE pending. In this case, an incoming call would wake the system as well as the modem.
</LI>
</OL>

<P>Whether a device is prepared to wake itself or the system, the actions its drivers must take are the same. The primary difference lies in how the device and system hardware respond to the initial wake-up signal. Driver behavior is the same in either case.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Sending%20a%20Wait%2FWake%20IRP"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
