<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Copying INFs</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Copying INFs">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_copying_infs_dg"></A>Copying INFs</H2>

<P>It is sometimes necessary to copy INF files during device installation, so that Setup can find them without repetitively displaying user prompts. For example, the base INF file for a multifunction device might copy the INF files for the device's individual functions, so that Setup can find these INF files without prompting the user each time it installs one of the device's functions.</P>

<P>To copy INF files, you can use either of the following techniques:

<UL>
	<LI>A co-installer or setup application can call <B>SetupCopyOEMInf</B> (described in Platform SDK documentation). This DDK includes source code for a co-installer, <I>cocpyinf.dll</I>, which uses this technique. The source code resides under the DDK's /<I>src</I> directory.</LI>

	<LI>(<I>Windows XP and later.</I>) An INF file can include the <A HREF="inf-format_9f1u.htm">INF <B>CopyINF</B> directive</A>. 
<P>(Note that this DDK also includes a redistributable, compiled version of <I>cocpyinf.dll</I>. If you use this co-installer for your device, the <B>CopyINF</B> directive can then be used on Windows 2000. The redistributable version of <I>copyinf.dll</I> resides under the DDK's \<I>tools</I> directory.)
</LI>
</UL>

<P>Both of these methods will:

<UL>
	<LI>Install the appropriate catalog file, if it exists, along with the INF file.</LI>

	<LI>Give the INF file a unique name so that it does not overwrite any other INF files, and will not be overwritten by other INF files.</LI>

	<LI>Retain the path to the source medium from which device files are to be copied.</LI>

	<LI>Ensure compatibility with future versions of Windows.</LI>
</UL>

<P>On Windows 2000 and later, installation software must never copy INF files directly into a system's <I>%windir%/inf</I> directory. <I>Copying INF files by using techniques not described in this section will invalidate a driver's digital signature.</I></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Copying%20INFs"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
