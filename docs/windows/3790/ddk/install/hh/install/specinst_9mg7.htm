<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Installing a Boot Driver</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Installing a Boot Driver">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_installing_a_boot_driver_dg"></A>Installing a Boot Driver</H1>

<P>During the text-mode setup phase of Windows installation, the Setup program installs drivers for devices that are required to boot the machine. Most of these drivers are included with the operating system.</P>

<P>A user can install an additional third-party driver during text-mode setup by pressing the appropriate key and inserting a floppy disk from the third-party vendor. A third-party vendor provides a <I>txtsetup.oem</I> file on a floppy disk to enable a user to install such a driver during text-mode setup.</P>

<P>To install a device that is required to boot the machine, a user installs the device hardware, turns on the machine, and installs the device's driver (if it is not included with the operating system), in the following manner: 

<UL>
	<LI>During the beginning of the text-mode setup phase of booting, the system displays a message indicating that the user can press a key to install custom drivers. </LI>

	<LI>At this point, the user presses an <B>F</B><I>n</I> key to install a driver for a third-party device, then inserts the vendor's floppy disk. </LI>
</UL>

<P>Certain error messages displayed when a machine fails to boot can indicate that a boot driver is missing. For example:

<UL>
	<LI>If a machine fails to boot and displays the message "Inaccessible boot device," it might be because the boot disk is a third-party mass-storage device that requires a driver not included with the operating system. </LI>

	<LI>If a machine fails to boot and displays the message "Setup could not determine your machine type," it could be because a new HAL driver is required. This error does not occur on most machines, but it might occur on a high-end server.</LI>
</UL>

<P>Note that this procedure is for installing a driver that is not included "in-the-box" with the operating system. Do not use this procedure to replace or update a driver included with the operating system. Instead, wait until the system boots and use the Device Manager to perform an "update driver" operation on the device. </P>

<P>If a vendor distributes a driver for a device required during boot and intends for the user to install it during text-mode setup, the following rules apply:

<UL>
	<LI>Driver file names must not exceed eight characters, and extensions must not exceed three characters.</LI>

	<LI>The vendor's distribution disk must include a file named <I>txtsetup.oem</I> in addition to the other driver files. </LI>
</UL>

<P>A <I>txtsetup.oem</I> file is a text file that contains a list of hardware components, a list of files to be copied, and a list of registry keys and vaules to be created. For details about the contents of a <I>txtsetup.oem</I> file, see <A HREF="txtsetup_1wmq.htm">The <I>txtsetup.oem</I> File Format</A>.</P>

<P>A single distribution disk with a single <I>txtsetup.oem</I> file can support multiple hardware devices. Such a file would contain a single <B>Defaults</B> section with an entry specifying the default choice for each hardware type. The file would also contain a <I>HwComponent</I> entry for each hardware type and the appropriate associated <B>Files.</B><I>HwComponent.ID</I> and <B>Config.</B><I>DriverKey</I> sections.</P>

<P>A sample <I>txtsetup.oem</I> file is provided with this DDK, under the installed DDK's \<I>src</I> directory.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Installing%20a%20Boot%20Driver"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
