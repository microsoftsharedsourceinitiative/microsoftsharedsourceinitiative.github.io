<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>SP_DRVINSTALL_PARAMS</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="SP_DRVINSTALL_PARAMS">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_sp_drvinstall_params_dr"></A>SP_DRVINSTALL_PARAMS</H1>

<P>An SP_DRVINSTALL_PARAMS structure contains driver installation parameters associated with a particular driver information element.</P>

<PRE class=syntax>typedef struct _SP_DRVINSTALL_PARAMS {
  DWORD  cbSize;
  DWORD  Rank;
  DWORD  Flags;
  DWORD_PTR  PrivateData;
  DWORD  Reserved;
} SP_DRVINSTALL_PARAMS, *PSP_DRVINSTALL_PARAMS;</PRE>

<H4>Members</H4>

<DL>
<DT><B>cbSize</B></DT>

<DD>The size, in bytes, of the SP_DRVINSTALL_PARAMS structure.</DD>

<DT><B>Rank</B></DT>

<DD>The rank match of this driver. Ranges from 0 to <I>n</I>, where 0 is the most compatible.</DD>

<DT><B>Flags</B></DT>

<DD>Flags that control functions operating on this driver. Can be a combination of the following:

<DL>
<DT>DNF_BAD_DRIVER</DT>

<DD>Do not use this driver. Installers can read and write this flag.

<P>If this flag is set, <A HREF="di-rtns_2gvm.htm"><B>SetupDiSelectBestCompatDrv</B></A> and <A HREF="di-rtns_6fle.htm"><B>SetupDiSelectDevice</B></A> ignore this driver.


<P>A class installer or co-installer can set this flag to prevent Setup from listing the driver in the Select Driver dialog box. An installer might set this flag when handling a <A HREF="dif-codes_822a.htm">DIF_SELECTDEVICE</A> or <A HREF="dif-codes_908i.htm">DIF_SELECTBESTCOMPATDRV</A> request, for example. 
</DD>

<DT>DNF_BASIC_DRIVER</DT>

<DD>(Windows XP and later) Reserved.</DD>

<DT>DNF_CLASS_DRIVER</DT>

<DD>This driver is a class driver. This flag is READ ONLY to installers.</DD>

<DT>DNF_COMPATIBLE_DRIVER</DT>

<DD>This driver is a compatible driver. This flag is READ ONLY to installers.</DD>

<DT>DNF_DUPDESC</DT>

<DD>There are other providers supplying drivers that have the same description as this driver. This flag is READ ONLY to installers.</DD>

<DT>DNF_DUPDRIVERVER</DT>

<DD>(Windows XP and later) There are other providers supplying drivers that have the same description and date as this driver. This flag is READ ONLY to installers.</DD>

<DT>DNF_DUPPROVIDER</DT>

<DD>There are other providers supplying drivers that have the same description as this driver. The only difference between this driver and its match is the driver date. This flag is READ ONLY to installers.

<P>If this flag is set, Setup displays the driver date and driver version next to the driver so the user can distinguish it from its match. 
</DD>

<DT>DNF_EXCLUDEFROMLIST</DT>

<DD>Do not display this driver in any driver-select dialogs.</DD>

<DT>DNF_INDEXED_DRIVER</DT>

<DD>Reserved.</DD>

<DT>DNF_INET_DRIVER</DT>

<DD>This driver came from the Internet or from Windows Update. This flag is READ ONLY to installers. 

<P>If you call SetupCopyOEMInf you must specify the SPOST_URL flag so that when Setup copies this INF into the %<I>windir</I>%\<I>inf</I> directory Setup will mark it as an Internet INF. If you omit this step then Setup will attempt to use this device to install other devices. The resulting problem is that Setup does not have the source files any more and will end up prompting the user with an invalid path.
</DD>

<DT>DNF_INF_IS_SIGNED</DT>

<DD>(Windows XP and later) The driver's INF file is digitally signed. This flag is READ ONLY to installers. </DD>

<DT>DNF_LEGACYINF</DT>

<DD>This driver comes from a legacy INF file. This flag is valid only for the NT-based operating system. This flag is READ ONLY to installers.</DD>

<DT>DNF_NODRIVER</DT>

<DD>Set if no physical driver is to be installed for this logical driver.</DD>

<DT>DNF_OEM_F6_INF</DT>

<DD>(Windows XP and later) Reserved.</DD>

<DT>DNF_OLD_INET_DRIVER</DT>

<DD>This driver came from the Internet, but Setup does not currently have access to its source files. This flag is READ ONLY to installers.

<P>The system will not install a driver marked with this flag because Setup does not have the source files and would end up prompting the user with an invalid path. The INF for such a driver can be used for everything except for installing devices.
</DD>

<DT>DNF_OLDDRIVER</DT>

<DD>This driver presently/previously controlled the associated device. This flag is READ ONLY to installers.</DD>
</DL>
</DD>

<DT><B>PrivateData</B></DT>

<DD>A field a class installer can use to store private data. Co-installers should not use this field.</DD>

<DT><B>Reserved</B></DT>

<DD>Reserved. For internal use only.
</DD>
</DL>

<H4>See Also</H4>

<P><A HREF="di-rtns_2goi.htm"><B>SetupDiGetDriverInstallParams</B></A>, <A HREF="di-rtns_1nxu.htm"><B>SetupDiSetDriverInstallParams</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: SP_DRVINSTALL_PARAMS"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
