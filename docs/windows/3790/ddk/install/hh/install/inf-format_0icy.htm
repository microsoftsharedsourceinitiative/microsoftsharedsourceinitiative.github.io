<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>INF SourceDisksNames Section</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="INF SourceDisksNames Section">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_tag_file_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_cabinet_file_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_installation_root_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_installation_root_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_tag_file_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_installation_root_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_tag_file_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_cabinet_file_dg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_inf_sourcedisksnames_section_dr"></A>INF SourceDisksNames Section</H1>

<P><B>[SourceDisksNames]</B> | <BR>
<B>[SourceDisksNames.x86]</B> | <B><BR>
[SourceDisksNames.ia64]</B> <B><BR>
&nbsp;</B><BR>
<I>diskid</I> <B>=</B> <I>disk-description</I>[<B>,</B>[<I>tag-or-cab-file</I>]<B>,</B>[<I>unused</I><B>,</B><I>path</I>][<B>,</B><I>flags</I>]] |<BR>
<I>diskid</I> <B>=</B> <I>disk-description</I>[<B>,</B>[<I>tag-or-cab-file</I>]<B>,</B>[<I>unused</I><B>,</B><I>path</I>]<B>,</B>[<I>flags</I>][<B>,</B><I>tag-file</I>]]&nbsp;&nbsp;&nbsp;&nbsp;<B><I>Windows XP and later</I></B><BR>
 ... <BR>
<B>&nbsp;</B><BR>
<B>&nbsp;</B><BR>
</P>

<P>A <B>SourceDisksNames</B> section identifies the distribution disks or CD-ROM discs that contain the source files to be transferred to the target machine during installation. </P>

<H4>Entry Values</H4>

<DL>
<DT><I>diskid</I></DT>

<DD>Specifies a nonnegative integer that identifies a source disk. This value can be expressed in decimal or in hexadecimal notation, but it cannot require more than four bytes of storage. If there is more than one source disk for the distribution, each <I>diskid</I> entry in this section must have a unique value, such as <B>1</B>, <B>2</B>, <B>3</B>,... or <B>0x0</B>, <B>0x1</B>, <B>0x2</B>,... and so forth. </DD>

<DT><I>disk-description</I></DT>

<DD>Specifies a <B>%</B><I>strkey</I><B>%</B> token or a <B>"</B><I>quoted string</I><B>"</B> that describes the contents and/or purpose of the disk identified by <I>diskid</I>. The installer can display the value of this string to the end user during installation, for example, to identify a source disk to be inserted into a drive at a particular stage of the installation process. 

<P>Every <B>%</B><I>strkey</I><B>%</B> specification in this section must be defined in the INF's <B>Strings</B> section. Any <I>disk-description</I> that is not a <B>%</B><I>strkey</I><B>%</B> token is a user-visible string that must be delimited by double quotation marks characters (<B>"</B>) if it has any leading or trailing spaces. 
</DD>

<DT><I>tag-or-cab-file</I></DT>

<DD>This optional value specifies the name of a <A HREF="JavaScript:hhobj_1.Click()">tag file</A> or <A HREF="JavaScript:hhobj_2.Click()">cabinet file</A> supplied on the distribution disk, either in the <A HREF="JavaScript:hhobj_3.Click()">installation root</A> or in the subdirectory specified by <I>path</I>, if any. The value should specify only the file name and extension, not any directory or subdirectory.

<P>Setup uses a tag file to verify that the user inserted the correct installation disk. Tag files are required for removable media, and are optional for fixed media. 


<P>If Setup cannot find installation files by name on the installation medium, and if <I>tag-or-cab-file</I> has the extension <B>.</B><I>cab</I>, Setup uses it as the name of a cabinet file containing the installation files.


<P>If a .<I>cab</I> extension is specified, Setup treats the file as both a tag file and a cabinet file, as explained in the following Comments section.


<P>For Windows XP and later, also see the <I>flags</I> and <I>tag-file</I> entry values.
</DD>

<DT><I>unused</I></DT>

<DD>This is not used for Windows&nbsp;2000 and later. This value is only used in Windows 9x/Me. See the Windows Me DDK documentation for further information.</DD>

<DT><I>path</I></DT>

<DD>This optional value specifies the path to the directory on the distribution disk containing source files. The <I>path</I> is relative to the <A HREF="JavaScript:hhobj_4.Click()">installation root</A> and is expressed as <B>\</B><I>dirname1</I><B>\</B><I>dirname2</I>... and so forth. If this value is omitted from an entry, files are assumed to be in the installation root of the distribution disk. 

<P>You can use an <A HREF="inf-format_4836.htm">INF <B>SourceDisksFiles</B> section</A> to specify subdirectories, relative to a given path directory, that contain source files. However, tag files and cabinet files must reside either in the given path directory or in the installation root.
</DD>

<DT><I>flags</I></DT>

<DD>For Windows XP and later, setting this to <B>0x10</B> forces Setup to use <I>tag-or-cab-file</I> as a cabinet file name, and to use <I>tag-file</I> as a tag file name. Otherwise, <I>flags</I> is for internal use only.</DD>

<DT><I>tag-file</I></DT>

<DD>For Windows XP and later, if <I>flags</I> is set to <B>0x10</B>, this optional value specifies the name of a <A HREF="JavaScript:hhobj_5.Click()">tag file</A> supplied on the distribution medium, either in the <A HREF="JavaScript:hhobj_6.Click()">installation root</A> or in the subdirectory specified by <I>path</I>. The value should specify the file name and extension without path information. For more information, see the Comments section.
</DD>
</DL>

<H4>Comments</H4>

<P>A <B>SourceDisksNames</B> section can have any number of entries, one for each distribution disk. Any INF with a <B>SourceDisksNames</B> section also must have an <A HREF="inf-format_4836.htm">INF <B>SourceDisksFiles</B> section</A>. (By convention, <B>SourceDisksNames</B> and <B>SourceDisksFiles</B> sections follow the <A HREF="inf-format_2fzm.htm">INF <B>Version</B> section</A>.)</P>

<P>These sections never appear in system-supplied INF files. Instead, system-supplied INF files specify <B>LayoutFile</B> entries in their <B>Version</B> sections. </P>

<P>Entries in a <B>SourceDisksNames</B> section can have either of two formats, one of which is supported only on Windows XP and later operating system versions.</P>

<P>In the first format, the <I>tag-or-cab-file</I> parameter can specify either a <A HREF="JavaScript:hhobj_7.Click()">tag file</A> or a <A HREF="JavaScript:hhobj_8.Click()">cabinet file</A>. When encountering this format, Setup uses the following algorithm:

<OL>
	<LI>Treat the <I>tag-or-cab-file</I> value as a tag file name and look for the file on the installation medium. If the medium is removable and the tag file is not found, prompt the user for the correct medium. If the medium is fixed and neither the tag file nor the first file to be installed can be found, prompt the user for the correct medium.</LI>

	<LI>Attempt to copy installation files directly from the medium.</LI>

	<LI>Treat the <I>tag-or-cab-file</I> value as a .<I>cab</I> file and look for the file.</LI>

	<LI>Attempt to copy installation files from the .<I>cab</I> file.</LI>

	<LI>Prompt the user for files not found.</LI>
</OL>

<P>In the second format, which is supported on Windows XP and later, you can use the <I>tag-or-cab-file</I>, <I>flags</I>, and <I>tag-file</I> entries to specify both a .<I>cab</I> file and a tag file. When encountering this format, Setup uses the following algorithm:

<OL>
	<LI>If the installation medium is removable, look for a tag file that matches the file name specified by <I>tag-file</I>. If the file is not found, prompt the user for the correct medium. If the medium is fixed, look for either the tag file or the cabinet file. If neither file is found, prompt the user for the correct medium.</LI>

	<LI>Attempt to copy installation files from the .<I>cab</I> file specified by <I>tag-or-cab-file</I>.</LI>

	<LI>Prompt the user for files not found.</LI>
</OL>

<P>For either format, you must provide a different tag file, with a different file name, for each version of the driver files.</P>

<P>To support distribution of driver files on multiple system architectures, you can construct architecture-specific <B>SourceDisksNames</B> sections. During installation, SetupAPI functions look for architecture-specific <B>SourceDisksNames</B> sections before using the generic section. For example, if, during installation on an x86-based platform, an INF file references disk "2", Setup functions will look for an entry for disk "2" in <B>SourceDisksNames.x86</B> before looking in <B>SourceDisksNames</B>.</P>

<P>SetupAPI functions use the <B>SourceDisksNames</B> and <B>SourceDisksNames.</B><I>architecture</I> sections that are in the same INF file as the relevant <A HREF="inf-format_4836.htm">INF <B>SourceDisksFiles</B> section</A>.</P>

<H4>Examples</H4>

<P>In the following example, the <I>write.exe</I> file is the same for all Windows platforms and is located in the <B>\</B><I>common</I> subdirectory, under the installation root, on a CD-ROM distribution disc. The <I>cmd.exe</I> file is a platform-specific file that is only used on x86-based platforms. </P>

<PRE>[SourceDisksNames]
1 = "Windows NT CD-ROM",file.tag,,\common
 
[SourceDisksNames.x86]
2 = "Windows NT CD-ROM",file.tag,,\x86
 
[SourceDisksFiles]
write.exe = 1
cmd.exe = 2
 </PRE>

<P>This next example again shows the <B>SourceDisksNames</B> section from the example in the reference for the <A HREF="inf-format_2fzm.htm">INF <B>Version</B> section</A>. </P>

<PRE>[SourceDisksNames]
;
; diskid = description[, [tagfile] [, &lt;unused&gt;, subdir]]
;
1 = %Floppy_Description%,,,\Win98
2 = %Floppy_Description%,,,\WinNT
<B> </B></PRE>

<P>The following example uses entries that contain separate specifications for .<I>tag</I> files and .<I>cab</I> files.</P>

<PRE>[Version]
signature = "$Windows NT$"
Provider = %Msft%

[SourceDisksNames]
1 = "Dajava","Dajava.cab",,,0x10,"Dajava.tag"
2 = "Osc","Osc.cab",,,0x10,"OSC.tag"
3 = "Win","Win.cab",,,0x10,"Win.tag"
4 = "XMLDSO","XMLDSO.cab",,,0x10,"XMLDSO.tag"

[SourceDisksFiles]
ArrayBvr.class=1
BvrCallback.class=1
BvrsToRun.class=1
choice.osc=2
custom.osc=2
login.osc=2
mwcload.exe=3
mwcloadw.exe=3
mwclw32.dll=3
Atom.class=4
DTD.class=4
Entity.class=4
Entry.class=4

[DestinationDirs]
Test = 16430,InfTest    ; %windir%\system32

[DefaultInstall]
CopyFiles = Test

[Test]
ArrayBvr.class
mwcloadw.exe
Entity.class
custom.osc
BvrCallback.class
BvrsToRun.class
choice.osc
login.osc
mwcload.exe
mwclw32.dll
Atom.class
DTD.class
Entry.class

[Strings]
Msft = "Microsoft"
</PRE>

<H4>See Also</H4>

<P><A HREF="inf-format_8kfm.htm"><B>DestinationDirs</B></A>, <A HREF="inf-format_4836.htm"><B>SourceDisksFiles</B></A>, <A HREF="inf-format_2fzm.htm"><B>Version</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: INF%20SourceDisksNames%20Section"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
