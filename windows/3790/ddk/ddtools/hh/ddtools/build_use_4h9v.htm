<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Using Macros and Environment Variables</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Using Macros and Environment Variables">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_using_macros_and_environment_variables_tools"></A>Using Macros and Environment Variables</H4>

<P>The Build utility uses numerous environment variables and macros:

<UL>
	<LI><I>Environment variables</I> are set by the <I>setenv.bat </I>batch file when you open a DDK build environment window.</LI>

	<LI><I>Macros</I> are specified in the <I>sources</I> files. These files must exist in each source code subdirectory. Each <I>sources</I> file contains a series of macro definitions in the following format:
<PRE>MACRONAME<B>=</B>MacroValue</PRE>
</LI>
</UL>

<P>Here, <I>MacroValue</I> represents a text string that the Build utility uses to replace <I>MACRONAME</I> in its internal scripts. To specify a <I>MacroValue</I> string that is longer than one line, end each line except the last with a backslash (<B>\</B>) character.</P>

<P>The distinction between environment variables and macros is weak, because some environment variables can be referenced or changed within <A HREF="build_ref_3egj.htm"><I>sources</I> files</A>, and some macros can be defined as environment variables in the build environment window. However, it is recommended that you not attempt to interchange environment variables and build macros in this manner.</P>

<H4>Controlling Environment Variables and Macros</H4>

<P>To see the value of all Build utility environment variables, type <B>set</B> in a build environment command window. The <B>set</B> command can also be used to change a variable's value.</P>

<P>To reference an environment variable or macro in a <I>sources</I> file, use the following syntax:</P>

<PRE><B>$(</B><I>VariableName</I><B>)</B>
</PRE>

<P>where <I>VariableName</I> is the name of the environment variable or macro. An example is as follows:</P>

<PRE>TARGETLIBS=$(SDK_LIB_PATH)\kernel32.lib \
           $(SDK_LIB_PATH)\advapi32.lib \
           $(SDK_LIB_PATH)\user32.lib   \
           $(SDK_LIB_PATH)\spoolss.lib
</PRE>

<P>For a complete list of the required and optional environment variables and macros, see <A HREF="build_ref_0kqb.htm">Build Utility Environment Variables</A> and <A HREF="build_ref_6sfn.htm">Build Utility Macros</A>.</P>

<P class=note><B>Note</B>&nbsp;&nbsp;Except for the DIRS and OPTIONAL_DIRS macros, which are used by the Build utility, these macros are all used by NMAKE. All that the Build utility does is open all the files, figure out the dependencies, and then call NMAKE. The other macros used in the build process are all used by NMAKE. For information on the DIRS and OPTIONAL_DIRS macros, see <A HREF="build_ref_6vzn.htm">the <I>dirs</I> file</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Using%20Macros%20and%20Environment%20Variables"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
