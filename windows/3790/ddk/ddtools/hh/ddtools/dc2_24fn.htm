<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Active Control Test</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Active Control Test">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_active_control_test_tools"></A>Active Control Test</H3>

<P><B>Command-line parameter</B>: <B>/ac </B><I>ControlCodeFile</I></P>

<P>The <I>Active Control Test</I> is a customized test that Device Path Exerciser generates for the driver based on the I/O control codes in an input file. This test is designed to exercise the I/O requests that the driver actually supports in practical use. The Active Control Test is available on Microsoft® Windows®&nbsp;XP and later versions of Windows.</P>

<P>The Active Control Test includes the I/O control codes (no FSCTLs) in the input file, along with numerous variations of those I/O control codes, including randomly generated function codes and function codes numerically higher, lower, and in between those in the file.</P>

<P>Device Path Exerciser sends the device an extremely high volume of customized calls in rapid succession with varying buffer lengths, addresses, and content, varying access requirements, and varying function codes and device types. </P>

<P>To generate an input file of the control codes that the driver supports, you can use the <A HREF="dv_8p9v.htm">IRP logging</A> feature in Driver Verifier, which records the I/O control codes that the driver uses during a Driver Verifier test, or you can type the input file in Notepad and customize it for testing or troubleshooting.</P>

<H4>Creating an Input File</H4>

<P>The input file for the Active Control Test is a formatted text file. You can use several different methods to generate this file:

<UL>
	<LI>Use the <A HREF="dv_8p9v.htm">IRP logging</A> feature in Driver Verifier and DC2WMIParser (<I>dc2wmiparser.exe</I>), a tool  included in the DDK. IRP Logging is supported only on Windows Server&nbsp;2003 and later versions of Windows.
<P>The IRP logging feature uses WMI software tracing to record incoming and outgoing IRPs that the driver uses during a standard Driver Verifier test. DC2WMIParser interprets the trace log and creates a formatted text file for Device Path Exerciser. 

<P>For information about IRP logging and DC2WMIParser, see <A HREF="dv_8p9v.htm">IRP Logging</A>.
</LI>

	<LI>Type the file in a text editor, such a Notepad, or edit the file that DC2WMIParser generates. The file format is described in <A HREF="dv_8p9v.htm">IRP Logging</A>.</LI>

	<LI>Use other WMI tools, such as WBEMTest, to extract the data from the WMI trace log while Driver Verifier is running. (You will have to write a program or script to format the data.)</LI>
</UL>

<P>The Driver Verifier method is the most convenient. However, because the IRP logging and parsing method samples from a circular log of IRPs and because it attributes IRPs to the driver at the bottom of the driver stack, the output might not accurately reflect the control codes that the driver processes under normal conditions. To insure the accuracy of the test, review the input file before submitting it to Device Path Exerciser.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Active%20Control%20Test"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
