<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>/3GB</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="3GB (boot parameter)">
<META NAME="MS-HKWD" CONTENT="userva (boot parameter)">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk__3gb_tools"></A>/3GB</H1>

<P>Enlarges the user-mode virtual address space to 3&nbsp;GB and restricts the kernel mode components to the remaining upper 1&nbsp;GB. </P>

<PRE class=syntax>[ <B>/3GB</B> [ <B>/userva</B>=<I>SizeInMB</I> ] ]
</PRE>

<H4>Subparameters</H4>

<DL>
<DT><B>/userva</B></DT>

<DD>Specifies an alternate amount of user-mode virtual address space for operating systems booted with the <B>/3GB</B> parameter. </DD>

<DT></DT>

<DT><I>SizeInMB</I></DT>

<DD>Specifies the amount of memory, in megabytes, for user-mode virtual address space. This variable can have any value between 2048 (2&nbsp;GB) and 3072 (3&nbsp;GB) megabytes in decimal notation. Windows will use the remaining address space (4&nbsp;GB less the specified amount) as its kernel-mode address space. 
</DD>
</DL>

<H4>Comments</H4>

<P>On Windows, by default, the lower 2&nbsp;GB are reserved for user-mode programs and the upper 2&nbsp;GB are reserved for kernel-mode programs. </P>

<P>The <B>/3GB</B> parameter is designed for computers that need more than 2&nbsp;GB but less than 3&nbsp;GB of user-mode address space, particularly those that are running memory-intensive user-mode programs. However, you can use this parameter to test the performance of your driver when it is running in a 1&nbsp;GB kernel.</P>

<P>When used without the /<B>3GB</B> parameter, <B>/userva</B> is ignored.</P>

<P>This parameter is fully functional on Microsoft Windows&nbsp;NT Server&nbsp;4.0, Enterprise Edition with Service Pack&nbsp;3; Microsoft Windows&nbsp;2000 Advanced Server; Microsoft Windows&nbsp;2000 Datacenter Server; Windows&nbsp;XP; and Windows Server&nbsp;2003.</P>

<P>On other versions of Windows&nbsp;NT and Windows&nbsp;2000, this parameter restricts the kernel to addresses above the 3&nbsp;GB boundary. However, user-mode applications cannot access more than 2&nbsp;GB of address space.</P>

<P>On Windows&nbsp;XP, some drivers, especially video adapter drivers with onboard RAM, cannot run with the <B>/3GB</B> parameter because they require more address space than the 1&nbsp;GB kernel address space permits.</P>

<H4>Examples</H4>

<PRE>multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows Server 2003, Enterprise" /fastdetect /3GB

multi(0)disk(0)rdisk(0)partition(1)\WINDOWS="Windows Server 2003, Enterprise" /fastdetect /3GB /userva=3030
</PRE>

<H4>Bootcfg Commands</H4>

<PRE>bootcfg /raw "/3GB" /A /ID 1
bootcfg /raw "/3GB /userva=3030" /A /ID 2
</PRE>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: %2F3GB"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
