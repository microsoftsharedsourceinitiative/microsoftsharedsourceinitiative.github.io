<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Low Resources Simulation for Graphics Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Driver Verifier options, Low Resources Simulation (Graphics Drivers)">
<META NAME="MS-HKWD" CONTENT="Low Resources Simulation (Graphics Drivers)">
<META NAME="MS-HKWD" CONTENT="Allocation Fault Injection (Graphics Drivers)">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engallocmem_gg">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engallocusermem_gg">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatebitmap_gg">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatedevicesurface_gg">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatedevicebitmap_gg">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatepalette_gg">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreateclip_gg">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatepath_gg">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatewnd_gg">
</OBJECT>
<OBJECT ID="hhobj_10" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_engcreatedriverobj_gg">
</OBJECT>
<OBJECT ID="hhobj_11" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_brushobj_pvallocrbrush_gg">
</OBJECT>
<OBJECT ID="hhobj_12" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_clipobj_ppogetpath_gg">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_low_resources_simulation_for_graphics_drivers_tools"></A>Low Resources Simulation for Graphics Drivers</H4>

<P>When Low Resources Simulation is enabled, Driver Verifier will cause a random selection of the driver's memory allocations to fail. This tests the driver's ability to react properly to low-memory and other low-resource conditions.</P>

<P>The following GDI callback functions are subject to this random failure:</P>

<P class=indent1><A HREF="JavaScript:hhobj_1.Click()"><B>EngAllocMem</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_2.Click()"><B>EngAllocUserMem</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_3.Click()"><B>EngCreateBitmap</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_4.Click()"><B>EngCreateDeviceSurface</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_5.Click()"><B>EngCreateDeviceBitmap</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_6.Click()"><B>EngCreatePalette</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_7.Click()"><B>EngCreateClip</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_8.Click()"><B>EngCreatePath</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_9.Click()"><B>EngCreateWnd</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_10.Click()"><B>EngCreateDriverObj</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_11.Click()"><B>BRUSHOBJ_pvAllocRbrush</B></A> </P>

<P class=indent1><A HREF="JavaScript:hhobj_12.Click()"><B>CLIPOBJ_ppoGetPath</B></A> </P>

<P>To accurately simulate a low-memory condition, these allocation faults are not injected until seven minutes after system startup. Therefore, any driver errors that are exposed by this action should be treated as legitimate run-time problems, not as unrealistic scenarios.</P>

<P>These allocation failures may cause rendering errors, resulting in incorrect images and other output errors. Therefore, this Driver Verifier option should only be used for robustness testing of a graphics driver, and should not be active when testing for correct implementation.</P>

<P>The Low Resources Simulation<I> </I>option may cause corruption in the shell's icon cache. If this happens, the icon cache must be manually deleted from the disk.</P>

<H4>Monitoring Low Resources Simulation</H4>

<P><I>(Windows XP and later)</I>  The kernel debugger extension <B>!gdikdx.verifier -s</B> can be used to display a count of how many times each of the GDI callback functions, mentioned in the beginning of this section, was called, and how many times Driver Verifier caused these functions to fail. For information about debugger extensions, see <A HREF="dbgblurb_25bn.htm">Debugging Tools for NT-Based Operating Systems</A>.</P>

<H4>Activating This Option</H4>

<P>The Low Resources Simulation option can be activated by using the Driver Verifier Manager graphical interface or the <I>verifier.exe</I> command line. This activation will take effect after the next boot. See <A HREF="dv_5q43.htm">Selecting Driver Verifier Options</A> for details.</P>

<P>This option can also be turned on and off without an intervening reboot. See <A HREF="dv_0a9f.htm">Using Volatile Settings</A> for details.</P>

<H4>Nongraphics Drivers</H4>

<P>See <A HREF="dv_5j03.htm">Low Resources Simulation</A> for details on how this option affects other kernel-mode drivers.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Low%20Resources%20Simulation%20for%20Graphics%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
