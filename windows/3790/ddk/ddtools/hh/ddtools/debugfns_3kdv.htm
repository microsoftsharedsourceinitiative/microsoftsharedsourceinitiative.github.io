<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Kernel-Mode Debugging Routines</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Kernel-Mode Debugging Routines">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_kernel_mode_debugging_routines_tools"></A>Kernel-Mode Debugging Routines</H3>

<P>Kernel-mode drivers can use the debugging routines summarized in this section. See <A HREF="debugfns_85ir.htm">Kernel-Mode Debugging Routines</A> for complete documentation of the individual routines.</P>

<P>The <B>Dbg<I>Xxx</I></B> functions are kernel-mode routines that can be used in either free or checked drivers. Routines named <B>Kd<I>Xxx</I></B> are kernel-mode macros that are defined only if the DBG flag is set. Therefore, the <B>Kd<I>Xxx</I></B> routines are active only in the checked build of a driver. The <B>ASSERT</B> and <B>ASSERTMSG</B> routines are also only active in the checked build of a driver. For more information on the build environments that allow you to create free and checked builds of a driver, see <A HREF="build_use_327n.htm">Setting Up the Build Environment</A>.</P>

<H4>Sending Output to the Debugger</H4>

<P><A HREF="debugfns_9ecz.htm"><B>DbgPrint</B></A> displays output in the debugger window. This routine supports the basic <B>printf</B> format parameters. Only kernel-mode drivers can call <B>DbgPrint</B>.</P>

<P><A HREF="debugfns_6x9v.htm"><B>DbgPrintEx</B></A> is similar to <B>DbgPrint</B>, but it allows you to "tag" your messages. When running the debugger, you can permit only those messages with certain tags to be sent. This allows you to view only those messages that you are interested in.</P>

<P><A HREF="debugfns_8odv.htm"><B>KdPrint</B></A> and <A HREF="debugfns_1ier.htm"><B>KdPrintEx</B></A> are the checked versions of <B>DbgPrint</B> and <B>DbgPrintEx</B>.</P>

<P></P>

<H4>Breaking Into the Debugger</H4>

<P>When a kernel-mode program breaks into the debugger, the entire operating system freezes until the kernel debugger allows execution to resume. If no kernel debugger is present, this is treated as a bug check.</P>

<P>The <A HREF="debugfns_3mur.htm"><B>DbgBreakPoint</B></A> routine works in kernel-mode code, but is otherwise similar to the <B>DebugBreak</B> user-mode routine.</P>

<P><A HREF="debugfns_5fxv.htm"><B>DbgBreakPointWithStatus</B></A> also causes a break, but it additionally sends a 32-bit status code to the debugger.</P>

<P><A HREF="debugfns_5unn.htm"><B>KdBreakPoint</B></A> and <A HREF="debugfns_47ar.htm"><B>KdBreakPointWithStatus</B></A> are the checked versions of these routines.</P>

<H4>Conditionally Breaking Into the Debugger</H4>

<P>Two conditional break routines are available for kernel-mode drivers. These routines test a logical expression. If the expression is false, execution halts and the debugger becomes active.</P>

<P>The <A HREF="debugfns_99tf.htm"><B>ASSERT</B></A> macro causes the debugger to display the failed expression and its location in the program. The <A HREF="debugfns_41yr.htm"><B>ASSERTMSG</B></A> macro is similar, but allows an additional message to be sent to the debugger.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Kernel-Mode%20Debugging%20Routines"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
