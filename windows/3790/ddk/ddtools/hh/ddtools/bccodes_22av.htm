<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Bug Check 0x7C:  BUGCODE_NDIS_DRIVER</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="bug check 0x7C">
<META NAME="MS-HKWD" CONTENT="BUGCODE_NDIS_DRIVER">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ndismallocatesharedmemory_nr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ndismallocatesharedmemory_nr">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ndismresetcomplete_nr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_bug_check_0x7c_bug"></A>Bug Check 0x7C: BUGCODE_NDIS_DRIVER</H1>

<P>The BUGCODE_NDIS_DRIVER bug check has a value of 0x0000007C. This indicates that a problem occurred with an NDIS driver.</P>

<H4>Parameters</H4>

<P>The following parameters are displayed on the blue screen. Parameter&nbsp;1 indicates the type of violation. The meaning of the other parameters depends on the value of Parameter&nbsp;1.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=10%>Parameter 1</TH>
<TH align=left width=18%>Parameter 2</TH>
<TH align=left width=19%>Parameter 3</TH>
<TH align=left width=20%>Parameter 4</TH>
<TH align=left width=33%>Cause of Error</TH>
</TR>

<TR VALIGN="top">
<TD width=10%>0x01</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Number of bytes requested</TD>
<TD width=20%>Current IRQL</TD>
<TD width=33%>A driver called <A HREF="JavaScript:hhobj_1.Click()"><B>NdisMAllocateSharedMemory</B></A> at a raised IRQL.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x02</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Shared memory page that was corrupted</TD>
<TD width=20%>Address of the NDIS_WRAPPER_CONTEXT that keeps track of the driver's shared memory allocations</TD>
<TD width=33%>During a call to <A HREF="JavaScript:hhobj_2.Click()"><B>NdisMAllocateSharedMemory</B></A>, NDIS detected that a previously-allocated shared memory page had been corrupted. </TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x03</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Page containing the shared memory</TD>
<TD width=20%>Virtual address of the shared memory</TD>
<TD width=33%>A driver called <B>NdisMFreeSharedMemory</B>[<B>Async</B>] with a shared memory pointer that had already been freed.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x04</TD>
<TD width=18%>Address of the NDIS_M_DRIVER_BLOCK</TD>
<TD width=19%>Address of the DRIVER_OBJECT</TD>
<TD width=20%>0</TD>
<TD width=33%><I>AddDevice</I> was called with a driver that is not on the list of drivers that are registered with NDIS.
<P><I>(Only enabled on special instrumented NDIS.)</I></P>
</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x05<BR>
0x06</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the packet descriptor used by the driver</TD>
<TD width=20%>Address of the packet array that contained this packet descriptor   </TD>
<TD width=33%>An Ethernet driver indicated receiving a packet by using a packet descriptor that is currently in use by the protocol stack.    </TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x07</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the packet descriptor used by the driver</TD>
<TD width=20%>Address of the packet array that contained this packet descriptor   </TD>
<TD width=33%>An FDDI driver indicated receiving a packet by using a packet descriptor that is currently in use by the protocol stack.    </TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x08</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the NDIS_MINIPORT_INTERRUPT</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver did not deregister its interrupt during the halt process. </TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x09</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the miniport's timer queue (NDIS_MINIPORT_TIMER)</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver halted without successfully canceling all its timers.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0A</TD>
<TD width=18%>Address of the NDIS_M_DRIVER_BLOCK</TD>
<TD width=19%>Address of the DRIVER_OBJECT</TD>
<TD width=20%>The ref count for the miniport driver</TD>
<TD width=33%>A miniport driver is getting unloaded prematurely.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0B</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the NDIS_MINIPORT_INTERRUPT</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver failed its initialization without deregistering its interrupt.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0C</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the miniport's timer queue (NDIS_MINIPORT_TIMER)</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver failed its initialization without successfully canceling all its timers.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0D</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the NDIS_MINIPORT_INTERRUPT</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver did not deregister its interrupt during the halt process. (The halt was called from the initialize routine after the miniport driver returned success from its initialize handler.)</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0E</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the miniport's timer queue (NDIS_MINIPORT_TIMER)</TD>
<TD width=20%>0</TD>
<TD width=33%>A miniport driver halted without successfully canceling all its timers. (The halt was called from the initialize routine after the miniport driver returned success from its initialize handler.)</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x0F</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Reset status</TD>
<TD width=20%>AddressingReset (BOOLEAN)   </TD>
<TD width=33%>A miniport driver called <A HREF="JavaScript:hhobj_3.Click()"><B>NdisMResetComplete</B></A> without any pending reset request.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x10</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the NDIS_MINIPORT_INTERRUPT</TD>
<TD width=20%>0</TD>
<TD width=33%>After resuming from a low power state, a miniport driver failed its initialization without deregistering its interrupt.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x11</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the miniport's timer queue (NDIS_MINIPORT_TIMER)</TD>
<TD width=20%>0</TD>
<TD width=33%>After resuming from a low power state, a miniport driver failed its initialization without successfully canceling all its timers.</TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x12</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the packet descriptor used by the driver</TD>
<TD width=20%>Address of the packet array that contained this packet descriptor   </TD>
<TD width=33%>A miniport driver indicated receiving a packet by using a packet descriptor that is currently in use by the protocol stack.    </TD>
</TR>

<TR VALIGN="top">
<TD width=10%>0x13</TD>
<TD width=18%>Address of the miniport block</TD>
<TD width=19%>Address of the packet descriptor used by the driver</TD>
<TD width=20%>Address of the packet array that contained this packet descriptor   </TD>
<TD width=33%>A Token-Ring miniport driver indicated receiving a packet by using a packet descriptor that is currently in use by the protocol stack.    </TD>
</TR>
</TABLE><BR>

<H4>Cause</H4>

<P>The specific cause of the error is indicated by Parameter&nbsp;1.</P>

<P>If one of the bug check parameters specifies the address of the miniport block, you can obtain more information by using the <B>!ndiskd.miniport</B> debugger extension with this address.</P>

<P>If one of the bug check parameters specifies the address of the packet descriptor used by the driver, you can obtain more information by using the <B>!ndiskd.pkt</B> debugger extension with this address.    </P>

<H4>Comments</H4>

<P>This bug check code only occurs on Windows Server&nbsp;2003 and later. In Windows&nbsp;2000 and Windows&nbsp;XP, the corresponding code is <A HREF="bccodes_2krr.htm">bug check 0xD2</A> (BUGCODE_ID_DRIVER).</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Bug%20Check%200x7C:%20%20BUGCODE_NDIS_DRIVER"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
