<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Configuring Kernel Special Pool</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Configuring Kernel Special Pool">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Driver&nbsp;Development&nbsp;Tools:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_configuring_kernel_special_pool_tools"></A>Configuring Kernel Special Pool</H4>

<P>The kernel special pool feature uses a special memory pool for all allocations that have a specified tag or are within a specified size range. This feature helps you to detect and identify the source of errors in kernel pool use, such as writing beyond the allocated memory space, or referring to memory that has already been freed.</P>

<P>For information on using the special pool, see <A HREF="dv_3i7n.htm">Special Memory Pool</A>.</P>

<P>Kernel special pool settings are saved in the registry. They become effective when you restart Windows and remain effective until you change them.</P>

<P class=proch><B><IMG SRC="../images/wedge.gif" ALT="" BORDER=0>To configure kernel special pool</B>

<OL>
	<LI>In the <B>Destination</B> area, click <B>System Registry</B>. </LI>

	<LI>Choose one of the following methods: 
<UL>
	<LI>To specify a pool tag in text format, click <B>Text</B>. 
<P>Type a four-character pattern for the tag. The tag can include the <B>?</B> (substitute for any single character) and <B>*</B> (substitute for multiple characters) wildcard characters. For example, Fat* or Av?4.

<P>GFlags converts the ASCII characters to their hexadecimal format, placing the leftmost character in the lowest order position. For example, if you type <B>Tag1</B>, GFlags sets the tag to 0x31676154.
</LI>

	<LI>To specify a pool tag in hexadecimal format, click <B>Hex</B>. 
<P>Type a hexadecimal value for the tag.

<P>GFlags sets the tag to the same numeric value. For example, if you type 12345678, GFlags stores pool tag 0x12345678.
</LI>

	<LI>To track kernel pool allocations of a specified size, click <B>Hex</B>, and then type the size in hexadecimal format. To indicate a range, type a hexadecimal number equal to the upper limit of the range, plus space for the pool header. The specified size must be smaller than the page size for Windows. Otherwise, the value is interpreted as a hexadecimal tag. 
<P>For information on pool block sizes, pool header sizes, and pool block ranges on x86 systems, Itanium-based systems, and AMD x86-64 systems, see <A HREF="dv_3i7n.htm">Special Memory Pool</A>.
</LI>
</UL>
</LI>

	<LI>Click <B>Verify Start</B> or <B>Verify End</B>. 
<UL>
	<LI><B>Verify Start</B> causes a bug check when a program tries to access tagged memory preceding its memory allocation. </LI>

	<LI><B>Verify End</B> causes a bug check when a program tries to access tagged memory beyond its memory allocation. </LI>
</UL>
</LI>

	<LI>Click <B>Apply</B>. </LI>

	<LI>To disable kernel special pool, delete the text or hexadecimal value from the <B>Kernel Special Pool Tag</B> box, and then click <B>Apply</B>. </LI>
</OL>

<P class=note><B>Note</B>&nbsp;&nbsp;The special pool can also be used for the memory pool allocations requested by a specific driver. This feature is activated by <A HREF="dv_7g8j.htm">Driver Verifier</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Configuring%20Kernel%20Special%20Pool"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
