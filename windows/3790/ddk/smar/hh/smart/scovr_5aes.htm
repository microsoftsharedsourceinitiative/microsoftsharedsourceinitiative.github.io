<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Smart Card Driver Environment</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Smart Card Driver Environment">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Smart&nbsp;Card&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_ntovr_smart_card_driver_environment"></A>Smart Card Driver Environment</H1>

<P>The following figure illustrates the standard environment for the smart card reader driver.</P>

<P><IMG SRC="images/memp1.gif" ALT="" BORDER=0></P>

<P>Starting from the top of the figure and following the circled numbers downwards, the following describes the different components of the smart card environment: 

<OL>
	<LI>Applications communicate with a smart card reader driver by means of the smart card resource manager. The reader driver resides in kernel space, and the smart card resource manager resides in user space.</LI>

	<LI>The resource manager communicates with the reader driver by means of I/O controls that are dispatched using the <B>DeviceIoControl</B> system call. Refer to the Platform SDK for information on how to use the <B>DeviceIoControl</B> system call.<I><BR>
<BR>
</I>Likewise, smart card-aware applications can send instructions to a smart card read driver by means of <B>DeviceIoControl</B>, and the operating system will forward the indicated IOCTL to the reader driver. If the reader driver is a WDM driver, the operating system will forward the request by means of an I/O request packet (IRP). If the reader driver is a VxD driver, the operating system sends the IOCTL through the agency of the virtual machine manager (VMM). </LI>

	<LI>Microsoft supplies two native reader drivers, <I>bulltlp3.sys</I>, a driver for Bull TLP3 smart card readers, and <I>pscr.sys</I>, a driver for PCMCIA smart card readers. The source code for both of these drivers is included in the Windows DDK to provide illustrative samples of card reader drivers. For further information, see <A HREF="scovr_1njn.htm">Sample Smart Card Reader Drivers</A>. Vendors of smart card reader devices must supply drivers that are designed to work with the system-supplied resource manager and smart card driver library. </LI>

	<LI>Both native and vendor-supplied reader drivers must use the smart card driver library to perform many of their key operations, as explained in the following section, <A HREF="scovr_2q9l.htm">Smart Card Driver Library</A>.</LI>
</OL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Smart%20Card%20Driver%20Environment"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
