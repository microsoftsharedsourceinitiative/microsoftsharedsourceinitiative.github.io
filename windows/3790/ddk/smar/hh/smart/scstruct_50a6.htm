<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>SMARTCARD_EXTENSION</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="SMARTCARD_EXTENSION">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Smart&nbsp;Card&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_ntstruct_smartcard_extension"></A>SMARTCARD_EXTENSION</H1>

<P>The SMARTCARD_EXTENSION structure is used by both the reader driver and the smart card driver library to access all other smart card data structures. This structure is passed to all callback functions.</P>

<PRE class=syntax>typedef struct _SMARTCARD_EXTENSION {
  ULONG  Version;
  VENDOR_ATTR  VendorAttr;
  NTSTATUS (*ReaderFunction[16])(PSMARTCARD_EXTENSION);
  SCARD_CARD_CAPABILITIES  CardCapabilities;
  ULONG LastError;
  struct {
    PULONG  Information;
    PUCHAR  RequestBuffer;
    ULONG  RequestBufferLength;
    PUCHAR  ReplyBuffer;
    ULONG  ReplyBufferLength;
  } IoRequest;
  ULONG  MajorIoControlCode;
  ULONG  MinorIoControlCode;
  POS_DEP_DATA  OsData;
  SCARD_READER_CAPABILITIES  ReaderCapabilities;
  PREADER_EXTENSION  ReaderExtension;
  SMARTCARD_REPLY  SmartcardReply;
  SMARTCARD_REQUEST  SmartcardRequest;
  T0_DATA  T0;
  T1_DATA  T1;
  ULONG  Reserved[25];
} SMARTCARD_EXTENSION, *PSMARTCARD_EXTENSION;
 </PRE>

<H4>Members</H4>

<DL>
<DT><B>Version</B></DT>

<DD>Indicates the version of this structure. </DD>

<DT><B>VendorAttr</B></DT>

<DD>Contains information that identifies the reader driver, such as the vendor name, unit number, and serial number. </DD>

<DT><B>ReaderFunction</B></DT>

<DD>Pointer to an array of callback reader functions. </DD>

<DT><B>CardCapabilities</B></DT>

<DD>Contains capabilities of the current inserted card. </DD>

<DT><B>LastError</B></DT>

<DD>Stores the last error of an overlapped operation. (Used only for Windows 9x VxDs.) </DD>

<DT><B>IoRequest.Information</B></DT>

<DD>Contains the number of bytes returned. </DD>

<DT><B>IoRequest.RequestBuffer</B></DT>

<DD>Pointer to the data of the user's I/O request to be sent to the card. </DD>

<DT><B>IoRequest.RequestBufferLength</B></DT>

<DD>Indicates the number of bytes to be sent to the card. </DD>

<DT><B>IoRequest.ReplyBuffer</B></DT>

<DD>Pointer to the buffer holding the data returned by the I/O request. </DD>

<DT><B>IoRequest.ReplyBufferLength</B></DT>

<DD>Indicates the number of bytes of the data returned by the I/O request. </DD>

<DT><B>MajorIoControlCode</B></DT>

<DD>Contains the major I/O control code. </DD>

<DT><B>MinorIoControlCode</B></DT>

<DD>Contains the minor I/O control code. </DD>

<DT><B>OsData</B></DT>

<DD>Contains information that is specific to the operating system and the driver type. </DD>

<DT><B>ReaderCapabilities</B></DT>

<DD>Contains the capabilities of the keyboard reader. </DD>

<DT><B>ReadExtension</B></DT>

<DD>Contains reader-specific data. </DD>

<DT><B>SmartcardReply</B></DT>

<DD>Contains data coming from the reader. </DD>

<DT><B>SmartcardRequest</B></DT>

<DD>Contains the current command and the data that will be sent to the smart card. </DD>

<DT><B>T0</B></DT>

<DD>Contains the data for use with the T = 0 protocol. </DD>

<DT><B>T1</B></DT>

<DD>Contains the data for use with the T = 1 protocol. </DD>

<DT><B>Reserved</B></DT>

<DD>Reserved for system use.</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>scmlib.h</I>. Include <I>scmlib.h</I>. </P>

<H4>See Also</H4>

<P><A HREF="scstruct_2qib.htm">SCARD_CARD_CAPABILITIES</A>, <A HREF="scstruct_6j03.htm">SCARD_READER_CAPABILITIES</A>, <A HREF="scstruct_7uuq.htm">VENDOR_ATTR</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: SMARTCARD_EXTENSION"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
