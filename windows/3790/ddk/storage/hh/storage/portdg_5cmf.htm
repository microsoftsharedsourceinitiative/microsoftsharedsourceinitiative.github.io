<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Synchronized Access within Unsynchronized Miniport Driver Routines</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Synchronized Access within Unsynchronized Miniport Driver Routines">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Storage&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_synchronized_access_within_unsynchronized_miniport_driver_routines_kg"></A>Synchronized Access within Unsynchronized Miniport Driver Routines</H3>

<P>Even when a miniport executes in full-duplex mode or does unsynchronized processing of SRBs in an <A HREF="k301_29iq.htm"><I>HwStorBuildIo</I></A> routine, it might still require synchronized access to its device extension. The library of support routines provided by the Storport driver includes <A HREF="k301_1m0i.htm"><B>StorPortSynchronizeAccess</B></A>, a routine that allows miniport drivers to synchronize access to critical data structures such as the device extension. </P>

<P>When the miniport calls <B>StorPortSynchronizeAccess</B>, it must supply the routine with a pointer to a callback routine. The callback routine contains the part of the SRB's processing that must be synchronized with the host bus adapter's interrupt handler. For better performance, write your driver to spend as little time as possible executing the callback routine.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Synchronized%20Access%20within%20Unsynchronized%20Miniport%20Driver%20Routines"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
