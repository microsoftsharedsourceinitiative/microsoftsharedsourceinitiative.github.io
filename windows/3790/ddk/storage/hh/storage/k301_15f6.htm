<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Storport Driver Miniport Routines</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Storport Driver Miniport Routines">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Storage&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_storport_driver_miniport_routines_kr"></A>Storport Driver Miniport Routines</H1>

<P>A miniport driver that works with the Storport driver must contain implementations of the routine descriptions listed in this section, and it must expose them through an <A HREF="k306_0e5u.htm">HW_INITIALIZATION_DATA (Storport)</A> structure during the miniport driver's initialization phase. </P>

<P>The Storport miniport driver routines are in most respects equivalent to their SCSI port counterparts (see <A HREF="k302_49iq.htm">SCSI Miniport Driver Routines</A> for more information). However, there are important differences between the design of the SCSI port driver and that of the Storport driver, and these routines must accomodate those differences. </P>

<P>For instance, miniport drivers that work with the Storport driver must always be prepared to receive another I/O request after the <A HREF="k301_4ng2.htm"><I>HwStorStartIo</I></A> routine has completed. A miniport driver that works with SCSI port is not required to do this. The SCSI port version does not receive a new I/O request until it explicitly signals the port driver, using the <A HREF="k301_659u.htm"><B>ScsiPortNotification</B></A> function, that it is prepared to handle another request. </P>

<P>If the Storport version of the miniport driver cannot handle a request at the time it is submitted, it has a set of queue management functions, not available to the SCSI port version, that allow it to deal with the overload. Like the SCSI port version, the Storport version of the miniport driver completes the request with SRB_STATUS_BUSY, but unlike the SCSI port version, it can also mark the device queue as busy using the <A HREF="k301_3gs2.htm"><B>StorPortDeviceBusy</B></A> routine. Similar functions allow the miniport driver to pause and resume processing on an adapter-wide basis.</P>

<P>For more information on the support routines provided by the Storport driver, see <A HREF="k301_6r02.htm">Storport Driver Support Routines</A>.</P>

<P>For more information on the Storport driver, see <A HREF="portdg_5413.htm">Storage Port Drivers</A>. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Storport%20Driver%20Miniport%20Routines"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
