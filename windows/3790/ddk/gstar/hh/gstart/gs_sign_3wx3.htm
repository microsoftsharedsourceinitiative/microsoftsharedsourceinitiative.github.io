<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>The Catalog File</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="The Catalog File">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_version_section_dr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_version_section_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Getting&nbsp;Started&nbsp;with&nbsp;Windows&nbsp;Drivers:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_the_catalog_file_pg"></A>The Catalog File</H2>

<P>Signed catalog files (<I>.cat</I>) are used as digital signatures for driver packages. A catalog file is a collection of tags. Each tag corresponds to a file installed by the driver package. On Windows®&nbsp;2000 and later, and on Windows Millennium Edition, each tag is a cryptographic checksum value. On Windows&nbsp;98, each tag is a text file name. Regardless of the intended operating system, cryptographic technology is used to digitally sign the catalog file. </P>

<P>The <B>CatalogFile</B> entry in the <A HREF="JavaScript:hhobj_1.Click()">INF <B>Version</B> section</A> of the driver's INF file specifies the name of the catalog file. For driver packages that receive a <A HREF="gs_sign_9bon.htm">WHQL digital signature</A>, WHQL reads this entry and generates a signed catalog file with the specified name. For driver packages that have a <A HREF="gs_sign_6zmv.htm">vendor-supplied Authenticode signature</A>, the vendor generates a signed catalog file for the package.</P>

<P>At driver installation, the system uses the <B>CatalogFile</B> entry to identify and validate the catalog file. The system copies the catalog file to the <I>%System%\CatRoot</I> directory, and it copies the INF file to the <I>%System%\Inf</I> directory. </P>

<P>Changing or replacing any of the files in the driver package, including the INF file or the catalog file itself, invalidates the digital signature. Even a single-byte change, for example, to correct a misspelling, invalidates the signature. If the digital signature is broken, you must either resubmit the package to WHQL for a new signature or generate a new Authenticode signature for the package.</P>

<P>Similarly, changes to the device hardware or firmware require a revised device ID value, so that the system can detect the updated device and install the correct driver. Because the revised device ID value must appear in the INF file, you must either resubmit the package to WHQL for a new signature or generate a new Authenticode signature for the package. You must do this even if the binaries do not change.</P>

<P>As a general rule, there should be one catalog file for each INF file in a driver package. If the driver package installs the same binaries on both Windows&nbsp;98/Me and Windows&nbsp;2000 and later platforms, the INF file can contain a single, undecorated <B>CatalogFile</B> directive. However, if the package installs different binaries, the INF file should contain decorated <B>CatalogFile</B> directives. For more information about the <B>CatalogFile</B> directive, see the <A HREF="JavaScript:hhobj_2.Click()">INF <B>Version</B>  Section</A>. </P>

<P>If you have more than one driver package, you should create a separate catalog file for each package and give each catalog file a unique name. Two unrelated driver packages cannot share a single catalog file. A single driver package that serves multiple devices requires only one catalog file. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: The%20Catalog%20File"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
