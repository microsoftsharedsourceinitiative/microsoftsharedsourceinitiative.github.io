<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>SetDeviceHandleData</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="SetDeviceHandleData">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_query_interface_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>System&nbsp;Support&nbsp;for&nbsp;Buses:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_setdevicehandledata_kr"></A><I>SetDeviceHandleData</I></H1>

<P>The <I>SetDeviceHandleData</I> routine associates a particular PDO with a device handle for use in post mortem debugging.</P>

<PRE class=syntax><B>VOID
SetDeviceHandleData (
  PVOID  </B><I>BusContext</I><B>,</B>
<B>  PVOID  </B><I>DeviceHandle</I><B>,</B>
<B>  PDEVICE_OBJECT  </B><I>UsbDevicePdo</I>
<B>  )</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>BusContext</I></DT>

<DD>Contains a handle to the bus context returned in the <I>BusContext</I> member of the structure by an <A HREF="JavaScript:hhobj_1.Click()">IRP_MN_QUERY_INTERFACE</A> request. The port driver provides this information when the hub driver queries for the interface. </DD>

<DT><I>DeviceHandle</I></DT>

<DD>Contains a handle to the device created by <A HREF="usbinterkr_0ble.htm"><I>CreateUsbDevice</I></A></DD>

<DT><I>UsbDevicePdo</I></DT>

<DD>Pointer to the physical device object to be associated with <I>DeviceHandle</I>. 
</DD>
</DL>

<H4>Return Value</H4>

<P>None. </P>

<H4>Headers</H4>

<P>Declared in <I>usbbusif.h</I>. Include <I>usbbusif.h</I>. </P>

<H4>Comments</H4>

<DL>
<DT>In addition to flushing outstanding tranfers, this routine also flushes the bad request list. If the caller does not pass a device handle in the <I>DeviceHandle </I>parameter, <I><B>FlushTransfers</B> </I>just flushes all tranfers on the bad request list. The purpose of this function is to complete any transfers that may be pending for client drivers that are about to unload.</DT>
</DL>

<P>The routine definition that is provided on this reference page is an example routine whose parameters are just placeholder names. The actual prototype of the routine is declared in <I>usbbusif.h</I> as follows:</P>

<PRE>typedef VOID
  (USB_BUSIFFN *PUSB_BUSIFFN_SET_DEVHANDLE_DATA) (
    IN  PVOID,
    IN  PVOID,
    IN  PDEVICE_OBJECT
  );</PRE>

<P>Callers of this routine must be running at IRQL &lt;= PASSIVE_LEVEL.</P>

<H4>See Also</H4>

<P><A HREF="usbinterkr_7k4y.htm">USB Interfaces</A></P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: SetDeviceHandleData"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
