<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>IOCTL_SERIAL_PURGE</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="IOCTL_SERIAL_PURGE">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Serial&nbsp;Ports&nbsp;and&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ioctl_serial_purge_serial_kr"></A>IOCTL_SERIAL_PURGE</H1>

<H4>Operation</H4>

<P>The IOCTL_SERIAL_PURGE request cancels the specified requests and deletes data from the specified buffers. The purge request can be used to cancel all read requests and write requests and to delete all data from the read buffer and the write buffer.</P>

<P>The completion of the purge request does not indicate that the requests canceled by the purge request are completed. A client must verify that the purged requests are completed before the client frees or reuses the corresponding IRPs.</P>

<H4>Input</H4>

<P>The <B>AssociatedIrp.SystemBuffer</B> member points to a client-allocated ULONG that is used to input a <I>purge mask</I>. The client sets the purge mask to a logical OR of one or more of the following purge flags:

<DL>
<DT>SERIAL_PURGE_RXABORT</DT>

<DD>Purges all read requests.</DD>

<DT>SERIAL_PURGE_RXCLEAR</DT>

<DD>Purges the receive buffer, if one exists.</DD>

<DT>SERIAL_PURGE_TXABORT</DT>

<DD>Purges all write requests.</DD>

<DT>SERIAL_PURGE_TXCLEAR</DT>

<DD>Purges the write buffer, if one exists.
</DD>
</DL>

<P>The <B>Parameters.DeviceIoControl.InputBufferLength</B> is set to the size in bytes of a ULONG.</P>

<H4>Output</H4>

<P>None.</P>

<H4>I/O Status Block</H4>

<P>If the request is successful, the <B>Information</B> member is set to the size in bytes of a ULONG. Otherwise, the <B>Information</B> member is set to zero.</P>

<P>The <B>Status</B> member is set to one of the <A HREF="serref_61bm.htm#ddk_generic_status_values_for_serial_device_control_requests_kr">Generic Status Values for Serial Device Control Requests</A>. A status of STATUS_INVALID_PARAMETER indicates that the purge mask is not valid.</P>

<H4>Headers</H4>

<P>Defined in <I>ntddser.h</I>. Include <I>ntddser.h</I>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: IOCTL_SERIAL_PURGE"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
