<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Supporting ACPI Devices</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Supporting ACPI Devices">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_acpi_driver_kg">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>ACPI&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_supporting_acpi_devices_kg"></A>Supporting ACPI Devices</H1>

<P>This section describes how a vendor can use a WDM function driver in Microsoft® Windows®&nbsp;2000 and later to enhance the functionality of an <I>ACPI device</I>. ACPI devices are defined by the <I>Advanced</I> <I>Configuration and Power Interface (ACPI) Specification</I>. ACPI devices include low-level system devices such as batteries, thermal zones, and other devices defined in a system's <I>ACPI namespace</I>. (An ACPI namespace is a hierarchical namespace that an ACPI BIOS uses to reference objects.)</P>

<P>The combined operation of the system-supplied <A HREF="JavaScript:hhobj_1.Click()">ACPI driver</A> and the ACPI BIOS supports the basic functionality of ACPI devices and is transparent to the rest of the operating system. An ACPI device is specified by a <I>definition block</I> in the ACPI System Description Tables. A device's definition block specifies, among other things, an <I>operation region</I>, which specifies a contiguous block of device memory that is used to access device data. </P>

<P>To enhance the functionality of an ACPI device, the vendor can supply a WDM function driver, which communicates with the ACPI BIOS through an operation region supplied by the driver. The ACPI driver accesses the operation region by calling an <I>operation region handler</I> supplied by the function driver.</P>

<P>By communicating through ACPI operation regions, a function driver can indirectly access devices that are normally only controlled by the BIOS, and the BIOS can invoke device-specific operations that depend on the configuration of the driver and the host system. The basic operating mechanism is as follows:

<OL>
	<LI>The ACPI BIOS reads or writes data in a device's operation region.</LI>

	<LI>To access the operation region, the ACPI driver calls the function driver's operation region handler.</LI>

	<LI>The operation region handler does whatever action is programmed for the access and returns information associated with the access.</LI>
</OL>

<P>The following two examples illustrate how a vendor can use a function driver to enhance the capability of an ACPI device:

<OL>
	<LI>An ACPI device can access an index in a function driver's operation region that causes the driver to enable a sound card volume control in a vendor's preinstalled software. </LI>

	<LI>The driver monitors the remaining capacity of batteries, the temperatures of thermal zones, and other things that are normally only accessed by the BIOS.</LI>
</OL>

<P>The following topics describe how to supply a function driver for an ACPI device:</P>

<P class=indent1><A HREF="opregdg_0rl3.htm">Device Stacks for an ACPI Device</A></P>

<P class=indent1><A HREF="opregdg_35ev.htm">Operation of an ACPI Device Function Driver</A></P>

<P class=indent1><A HREF="opregdg_5ktj.htm">Installing an ACPI Device</A></P>

<P class=indent1><A HREF="opregdg_9qqv.htm">Sample ACPI Device Function Driver</A></P>

<P>For information about the system-supplied support routines that support ACPI device function drivers, see <A HREF="opregref_2vxu.htm">ACPI Operation Region Handler Reference</A>.</P>

<P>For detailed information about ACPI devices, see the <I>Advanced Configuration and Power Interface Specification</I>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Supporting%20ACPI%20Devices"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
