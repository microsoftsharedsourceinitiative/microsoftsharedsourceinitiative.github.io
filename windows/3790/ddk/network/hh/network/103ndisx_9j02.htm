<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>NdisGetPoolFromPacket</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="NdisGetPoolFromPacket">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ndisgetpoolfrompacket_nr"></A>NdisGetPoolFromPacket</H1>

<P><B>NdisGetPoolFromPacket</B> returns the handle to the packet pool from which a packet was allocated. </P>

<PRE class=syntax><B>NDIS_Handle
  NdisGetPoolFromPacket(
    IN PNDIS_PACKET  </B><I>Packet</I><B>
<I>    </I>);</B>
</PRE>

<H4>Parameters</H4>

<DL>
<DT><I>Packet</I></DT>

<DD>Pointer to an <A HREF="105nstru_6jn6.htm">NDIS_PACKET</A> structure that is the descriptor for a packet. </DD>
</DL>

<H4>Return Values</H4>

<P><B>NdisGetPoolFromPacket</B> returns a handle to the packet pool for the specified packet. If <I>Packet</I> points to an invalid packet descriptor, <B>NdisGetPoolFromPacket</B> returns an indeterminate value.</P>

<H4>Headers</H4>

<P>Declared in <I>Ndis.h</I>. Include <I>Ndis.h</I>.</P>

<H4>Comments</H4>

<P>After a descriptor for a send or receive packet returns to an intermediate driver at the conclusion of a data transfer, an intermediate driver can call <B>NdisGetPoolFromPacket</B> to retrieve the handle to the packet pool from which the packet was allocated. The intermediate driver compares the returned handle with the handle to the driver's own packet pool. If the handles are the same, the intermediate driver can reclaim the packet descriptor. If the handles are not the same, the intermediate driver cannot reclaim the packet descriptor; instead, it must allow the driver that allocated the packet descriptor to reclaim that descriptor. </P>

<P>System support for <B>NdisGetPoolFromPacket</B> is available in Windows XP and later OS versions.</P>

<P>Callers of <B>NdisGetPoolFromPacket</B> run at IRQL &lt;= DISPATCH_LEVEL. </P>

<H4>See Also</H4>

<P><A HREF="103ndisx_1hbm.htm"><B>NdisIMGetCurrentPacketStack</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: NdisGetPoolFromPacket"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
