<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Setting Up the Test System</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Setting Up the Test System">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Network&nbsp;Devices&nbsp;and&nbsp;Protocols:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_setting_up_the_test_system_ng"></A>Setting Up the Test System</H2>

<P><B>Note:</B> vendor-supplied network upgrades are not supported in Windows XP (SP1 and later), Windows Server 2003, and later operating systems.</P>

<P>Before you upgrade network components, make sure that the network components to be upgraded are correctly installed and configured. </P>

<P class=proch><B><IMG SRC="../images/wedge.gif" ALT="" BORDER=0>To set up the test system</B>

<OL>
	<LI>Create one partition for the preupgrade operating system and another partition for the Microsoft® Windows®&nbsp;2000 or later operating system. 
<P class=note><B>Important</B>&nbsp;&nbsp;Do not install the preupgrade operating system and the upgrade operating system in the same partition. If the preupgrade operating system and Windows&nbsp;2000 or later are installed in the same partition, they will share the same <I>Program Files</I> directory. 
</LI>

	<LI>On the test system, boot an operating system build other than the one to be upgraded. Then copy the entire partition to be upgraded, except for the pagefile.sys file, into a back-up directory. There is no need to copy the pagefile.sys file, since it is created on the start-up of Windows&nbsp;2000 or later.
<P>This method of creating a back-up installation is preferable to creating a disk-image program, because it allows you to use <B>xcopy</B>, which takes less time to copy files than a disk-image program. You can repeat an upgrade test by simply copying the contents of the back-up partition into a new partition to be upgraded; it is not necessary to reinstall the preupgrade operating system. 
</LI>

	<LI>Create a test directory for storing the network migration DLL and the <I>netmap.inf</I> file, and then copy these files to the test directory. </LI>

	<LI>Create another directory for storing the Windows&nbsp;2000 or later files required for the Winnt32 upgrade phase.</LI>

	<LI>Insert the Windows&nbsp;2000 or later DDK CD-ROM that contains the checked build of Windows&nbsp;2000 or later. From the <I>\i386 </I>directory on the CD-ROM, copy the following files to the back-up directory (Step 2):
<UL>
	<LI><I>winnt32.exe</I></LI>

	<LI><I>winnt32u.dll</I></LI>

	<LI><I>pidgen.dll</I></LI>

	<LI><I>wetuplog</I>.*</LI>
</UL>
</LI>

	<LI>Create an upgrade directory named <I>winntupg</I>. Copy the files in the <I>\i386\winntupg</I> directory on the CD-ROM to the <I>winntupg</I> directory on the test system.</LI>

	<LI>Enable the debugger on the text system or start <I>debugmon.exe</I>, which is included with the Resource Kit for Windows&nbsp;2000 or later operating systems. Then copy a <I>netcfg.ini</I> file to <I>%windir%</I>. The <I>netcfg.ini file</I> enables debug tracing.
<P>The following is a sample <I>netcfg.ini</I> file:

<PRE>[DebugFlags]
BreakOnAddLegacy=0
BreakOnAlloc=0
BreakonDoUnattend=0
BreakonDwrefProblem=0
BreakOnError=0
BreakOnHr=0
BreakOnHrInteraction=0
BreakOnIteration=0
BreakOnNetInstall=0
BreakOnWizard=0
DisableTray=0
DumpLeaks=0
DumpNetCfgTree=0
NetShellBreakOnInit=0
ShowIngnoreErrors=0
ShowProcessAndThreadIds=0
SkipLanEnum=0
TracingTimeStamps=0

[Default]
OutputToDebug=1

[EsLocks]
OutputToDebug=0

[ShellViewMsgs]
OutputToDebug=0

[OptErrors]
OutputToDebug=0</PRE>
</LI>
</OL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Setting%20Up%20the%20Test%20System"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
