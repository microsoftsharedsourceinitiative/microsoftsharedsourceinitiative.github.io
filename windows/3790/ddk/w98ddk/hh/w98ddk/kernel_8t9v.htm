<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>_Debug_Flags_Service</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1143"></A>_Debug_Flags_Service</H1>

<PRE>include vmm.inc

push    flags
VMMCall _Debug_Out_Service
 </PRE>

<P>Asserts various conditions. This is an asynchronous service. </P>

<P>No return value. 

<DL>
<DT><I>flags</I></DT>

<DD>Specifies the debug flags. It can be a combination of the following values: 

<TABLE>

<TR VALIGN="top">
<TH align=left width=34%>Value </TH>
<TH align=left width=66%>Meaning </TH>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_NEVER_REENTER </TD>
<TD width=66%>VMM has not been re-entered (see below). </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_TEST_REENTER </TD>
<TD width=66%>VMM has not been re-entered (see below). </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_NOT_SWAPPING </TD>
<TD width=66%>The current thread is not in the middle of a paging operation. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_TEST_CLD </TD>
<TD width=66%>Assert that the processor direction flag is cleared. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_TEST_BLOCK </TD>
<TD width=66%>Assert that NoBlock_Count is set to zero. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_LOG </TD>
<TD width=66%>Log this procedure (if requested). </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_PROFILE </TD>
<TD width=66%>Increment profile count and validate the segment registers. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_ENTER_NOBLOCK </TD>
<TD width=66%>Increment the NoBlock_Count. </TD>
</TR>

<TR VALIGN="top">
<TD width=34%>DFS_EXIT_NOBLOCK </TD>
<TD width=66%>Decrement the NoBlock_Count. </TD>
</TR>
</TABLE><BR>


</DD>
</DL>

<P>The DFS_NEVER_REENTER and DFS_TEST_REENTER bits differ in their interaction with the Begin_Reentrant_Execution service. When the Begin_Reentrant_Execution service is called, the VMM re-entry count is reset to zero, even though the VMM has mostly like actually been re-entered. The DFS_TEST_REENTER bit checks this fake re-entry count, whereas the DFS_NEVER_REENTER bit checks the true re-entry count (which is unaffected by Begin_Reentrant_Execution). </P>

<P>The DFS_ENTER_NOBLOCK and DFS_EXIT_NOBLOCK flags increment and decrement a counter which is checked by the DFS_TEST_BLOCK bit. If the DFS_TEST_BLOCK bit is set when this internal counter is nonzero, the debugger will be notified if it is installed. </P>

<P>The DFS_LOG bit calls the Log_Proc_Call service on behalf of the caller. </P>

<P>The DFS_PROFILE bit causes the service to increment a DWORD variable generated by the BeginProc macro. Do not set this bit manually; let the BeginProc macro do it for you. </P>

<P>This service has no effect in the retail version of Windows. It is intended to be used with the debugging version. </P>

<P>As a rule, you should never call this service directly. It is generated automatically by macros in vmm.h and debug.h. </P>

<P>The BeginProc macro automatically calls this service with the DFS_LOG bit, as well as the DFS_TEST_REENTER if the procedure being declared is not an asynchronous service, and the DFS_TEST_BLOCK flag if the procedure is in pageable code. In the case of an exported service, the BeginProc macro also generates a DWORD profiling count and sets the DFS_PROFILE bit. </P>

<P>The ENTER_NOBLOCK, EXIT_NOBLOCK, and ASSERT_MIGHT_BLOCK macros in debug.h should be used to manipulate the block-related DFS bits. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: _Debug_Flags_Service"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
