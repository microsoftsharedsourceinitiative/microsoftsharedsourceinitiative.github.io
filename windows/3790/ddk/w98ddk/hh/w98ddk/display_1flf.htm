<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>CreateDIBPDevice</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_563"></A>CreateDIBPDevice</H3>

<PRE>CreateDIBPDevice(LPBITMAPINFO lpInfo, LPPDEVICE lpDevice, 
     VOID *lpBits, WORD wFlags);
 </PRE>

<P>Creates a <B>PDEVICE</B> structure for the DIB engine using the specified <B>BITMAPINFO </B>structure and DIB bits. </P>

<P>It returns the size in bytes of the bits buffer (based on the width, height, and bpp in the specified <B>BITMAPINFO</B> structure) if successful; otherwise returns zero. </P>

<DL>
<DT><I>lpInfo</I> </DT>

<DD>Address of a <B>BITMAPINFO</B> structure that contains information about the DIB. The <B>PDEVICE</B> that is created contains a pointer to this block of memory in its <B>deBitmapInfo</B> field. </DD>

<DT><I>lpDevice</I> </DT>

<DD>Address of buffer (allocated by the caller) to receive the <B>PDEVICE</B> structure. The size of the <B>PDEVICE</B> structure can be obtained from the <B>dpDeviceSize</B> field of the DIB engine's <B>GDIINFO</B> definition. </DD>

<DT><I>lpBits</I> </DT>

<DD>Address of the DIB bits, which are stored as an array of bytes. If NULL, the function fills in the offset part of the <B>deBits</B> field and the minidriver must allocate a 0-based buffer and fill in the selector part of the <B>deBits</B> field. </DD>

<DT><I>wFlags</I> </DT>

<DD>Value used to initialize the <B>PDEVICE</B>'s <B>deFlags </B>field. 
</DD>
</DL>

<P>The function fails for DIB formats that the DIB engine does not support. </P>

<P>The <B>deDriverUse</B> field in the <B>DIBENGINE</B> structure is reserved for use by minidrivers. <B>CreateDIBPDevice</B> initializes this field to zero, but minidrivers can subsequently place any value in this field for their own use. The DIB engine does not use this field. </P>

<P>The DIB engine initializes the <B>deBeginAccess</B> and <B>deEndAccess</B> members of the <B>PDEVICE </B>structure to zero. The minidriver needs to initialize these fields after the call to <B>CreateDIBPDevice</B>. </P>

<P>The export ordinal for this function is 300. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: CreateDIBPDevice"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
