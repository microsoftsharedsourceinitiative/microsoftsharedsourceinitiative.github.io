<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KS_VIDEOINFOHEADER2</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_wdmvcap_ks_videoinfoheader2"></A>KS_VIDEOINFOHEADER2</H3>

<P>The <B>KS_VIDEOINFOHEADER2</B> structure is used to specify details of the video stream. This structure is identical to the DirectShow <B>VIDEOINFOHEADER2</B> structure. </P>

<P>Capture drivers that produce video fields (instead of frames) must use the <B>KS_DATARANGE_VIDEO2</B> structure, which contains a <B>KS_VIDEOINFOHEADER2</B> structure.</P>

<PRE class=syntax>typedef struct tagKS_VIDEOINFOHEADER2 {
  RECT  rcSource;
  RECT  rcTarget;
  DWORD  dwBitRate;
  DWORD  dwBitErrorRate;
  REFERENCE_TIME  AvgTimePerFrame;
  DWORD  dwInterlaceFlags;
  DWORD  dwCopyProtectFlags;
  DWORD  dwPictAspectRatioX;
  DWORD  dwPictAspectRatioY;
  DWORD  dwReserved1;
  DWORD  dwReserved2;
  KS_BITMAPINFOHEADER bmiHeader;
} KS_VIDEOINFOHEADER2;</PRE>

<H4>Members</H4>

<DL>
<DT><B>rcSource</B></DT>

<DD>Specifies a <B>RECT</B> structure that indicates what part of the source stream should be used to fill the destination buffer. The renderers can use this field to ask the decoders to stretch or clip the stream.</DD>

<DT><B>rcTarget</B></DT>

<DD>Specifies a <B>RECT</B> structure that indicates what part of the destination buffer should be used.</DD>

<DT><B>dwBitRate</B></DT>

<DD>Specifies a DWORD value that indicates the video stream's appropriate data rate.</DD>

<DT><B>DwBitErrorRate</B></DT>

<DD>Specifies a DWORD value that indicates the video stream's data error rate.</DD>

<DT><B>AvgTimePerFrame</B></DT>

<DD>Specifies a REFERENCE TIME value that indicates the video frame's average display time, in 100-nanosecond units.</DD>

<DT><B>dwInterlaceFlags</B></DT>

<DD>Specifies an AMINTERLACE_* flag. See the following <B>Comments</B> section for flag values.</DD>

<DT><B>dwCopyProtectFlags</B></DT>

<DD>Specifies a AMCOPYPROTECT RestrictDuplication value to indicate if duplication of a stream should be restricted. If undefined, specify zero or connection should be rejected.</DD>

<DT><B>dwPictAspectRatioX</B></DT>

<DD>Specifies the X dimension of the picture aspect ratio. For example, 16 for a 16x9 display. The value is expressed in inches by inches, not pixels by pixels.</DD>

<DT><B>DwPictAspectRatioY</B></DT>

<DD>Specifies the Y dimension of the picture aspect ratio. For example, 9 for 16x9 display. The value is expressed in inches by inches, not pixels by pixels.</DD>

<DT><B>dwReserved1</B></DT>

<DD>Reserved for future use. Must be set to zero or the connection is rejected.</DD>

<DT><B>dwReserved2</B></DT>

<DD>Reserved for future use. Must be set to zero or the connection is rejected.</DD>

<DT><B>BmiHeader</B></DT>

<DD>Specifies a <B>KS_BITMAPINFOHEADER </B>structure that contains color and dimension information for the video image bitmap.
</DD>
</DL>

<H4>Comments</H4>

<P>Values for the <B>dwInterlaceFlags</B> member include the following. (Set undefined flags to zero or the connection is rejected.)</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=50%>Value</TH>
<TH align=left width=50%>Description</TH>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_IsInterlaced </TD>
<TD width=50%>Indicates an interlace stream. If zero, other interlace bits are irrelevant. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_1FieldPerSample</TD>
<TD width=50%>Indicates one field per media sample. If zero, indicates two fields per media sample. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_Field1First </TD>
<TD width=50%>Indicates that Field 1 is first. If zero, indicates that Field 2 is first. Top field in PAL is field 1, top field in NTSC is field 2. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_UNUSED </TD>
<TD width=50%>Unused.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_FieldPatternMask </TD>
<TD width=50%>Bits used to indicate field pattern. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_FieldPatField1Only</TD>
<TD width=50%>Stream never contains a Field 2.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_FieldPatField2Only</TD>
<TD width=50%>Stream never contains a Field 1. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_FieldPatBothRegular </TD>
<TD width=50%>There will be a Field 2 for every Field 1. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_FieldPatBothIrregular </TD>
<TD width=50%>Random pattern of Field 1s and Field 2s.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_DisplayModeMask </TD>
<TD width=50%>Bits used to indicate display mode.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_DisplayModeBobOnly </TD>
<TD width=50%>Indicates Bob display mode only.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_DisplayModeWeaveOnly </TD>
<TD width=50%>Indicates Weave display mode only. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%>AMINTERLACE_DisplayModeBobOrWeave </TD>
<TD width=50%>Indicates either Bob or Weave display mode</TD>
</TR>
</TABLE><BR>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KS_VIDEOINFOHEADER2"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
