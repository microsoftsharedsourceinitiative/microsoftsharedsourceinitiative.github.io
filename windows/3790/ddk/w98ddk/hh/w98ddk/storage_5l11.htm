<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>IOS Services</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_4065"></A>IOS Services</H2>

<P>The IOS provides drivers and clients with memory management and timer services. There are the following services: </P>

<TABLE>

<TR VALIGN="top">
<TD width=40%>ISP_ALLOC_MEM (3) </TD>
<TD width=60%>Allocate block from IOS memory. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_ASSOCIATE_DCB (6) </TD>
<TD width=60%>Associate <B>DCB</B> and relative drive number. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_CREATE_DCB (1) </TD>
<TD width=60%>Create <B>DCB</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_CREATE_DDB (0) </TD>
<TD width=60%>Create <B>DDB</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_CREATE_IOP (2) </TD>
<TD width=60%>Allocate <B>IOP</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DEALLOC_DDB (9) </TD>
<TD width=60%>Free <B>DDB</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DEALLOC_MEM (4) </TD>
<TD width=60%>Free block of IOS memory. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DELETE_LDM_ENTRY (19) </TD>
<TD width=60%>Delete LDM entry. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DESTROY_DCB (10) </TD>
<TD width=60%>Free <B>DCB</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DEVICE_ARRIVED (14) </TD>
<TD width=60%>Indicate that a device has arrived. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DEVICE_REMOVED (13) </TD>
<TD width=60%>Indicate that a device has been removed. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DISASSOCIATE_DCB (15) </TD>
<TD width=60%>Disassociate <B>DCB</B> and drive number. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_DRIVE_LETTER_PICK (16) </TD>
<TD width=60%>Pick a drive letter. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_FIND_LDM_ENTRY (18) </TD>
<TD width=60%>Find LDM entry. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_GET_DCB (7) </TD>
<TD width=60%>Return <B>DCB</B> for logical volume. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_GET_FIRST_NEXT_DCB (8) </TD>
<TD width=60%>Get first or next <B>DCB.</B> </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_INSERT_CALLDOWN (5) </TD>
<TD width=60%>Insert calldown entry in <B>DCB</B>. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_QUERY_MATCHING_DCBS (11) </TD>
<TD width=60%>Ask for logical-to-physical info. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_QUERY_REMOVE_DCB (12) </TD>
<TD width=60%>Ask if we can remove a device. </TD>
</TR>

<TR VALIGN="top">
<TD width=40%>ISP_REGISTRY_READ (17) </TD>
<TD width=60%>Read registry. </TD>
</TR>
</TABLE><BR>

<P>A driver can use an IOS service to carry out a task by calling the IOS service routine after pushing the address of a structure, called an IOS service packet (ISP), on the stack. The address of the IOS service routine is in the <B>ILB_service_rtn</B> member of the <B>ILB</B>. The content and format of the structure to pass to the routine varies from service to service, but all structures start with a standard header as defined by the <B>ISP</B> structure. This structure includes the <B>ISP_func</B> member that identifies the service to carry out and the <B>ISP_result</B> member that the IOS uses to indicate whether it completed the service or encountered an error. The driver should check the value of <B>ISP_result</B> after the IOS returns. </P>

<H4>See Also</H4>

<P><B>DCB</B>, <B>DDB</B>, <B>ILB</B>, <B>IOP</B>, <B>ISP</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: IOS%20Services"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
