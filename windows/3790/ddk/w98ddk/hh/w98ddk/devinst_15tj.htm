<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DiCreateDeviceInfo</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DiCreateDeviceInfo">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_207"></A>DiCreateDeviceInfo</H1>

<P>Creates a DEVICE_INFO structure and initializes it with specified information. </P>

<PRE class=syntax><B>RETERR
  DiCreateDeviceInfo(
</B>   <B> LPLPDEVICE_INFO</B>  <I>lplpdi</I><B>,</B>
<B>    LPCSTR</B> <I>lpszDescription</I><B>,</B>
  <B>  DWORD</B>  <I>dnDevnode</I><B>,</B>
  <B>  HKEY</B>  <I>hkey</I><B>,</B>
  <B>  LPCSTR</B>  <I>lpszRegsubkey</I><B>,</B>
    <B>LPCSTR </B> <I>lpszClassName</I><B>,</B>
    <B>HWND</B>  <I>hwndParent</I>
<B>    );</B></PRE>

<H4>Return Value</H4>

<P>Returns OK if successful, otherwise an ERR_DI_xxx error code will be returned. </P>

<H4>Parameters</H4>

<DL>
<DT><I>lplpdi</I> </DT>

<DD>Pointer to a pointer to a DEVICE_INFO structure. This pointer receives the pointer to the allocated DEVICE_INFO structure created by this function. </DD>

<DT><I>lpszDescription</I> </DT>

<DD>If non-null, the description of the device. </DD>

<DT><I>dnDevnode</I> </DT>

<DD>If nonzero, the value of the devnode of the device. </DD>

<DT><I>hkey</I> </DT>

<DD>The registry HKEY which the lpszRegsubkey is located in. This is usually HKEY_LOCAL_MACHINE. </DD>

<DT><I>lpszRegsubkey</I> </DT>

<DD>If non-null, the registry subkey string where the hardware information of the device is stored. This subkey is relative to the hkey described previously. </DD>

<DT><I>lpszClassName</I> </DT>

<DD>If non-null, the class name of the device. </DD>

<DT><I>hwndParent</I> </DT>

<DD>If non-null, the window handle of the top level window use for any U/I related to installing the device. 
</DD>
</DL>

<H4>Comments</H4>

<P>The DEVICE_INFO structure is allocated zero-init in SETUPX's private heap, and so must be destroyed using DiDestroyDeviceInfoList </P>

<P>See also <B>DiDestroyDeviceInfoList</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DiCreateDeviceInfo"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
