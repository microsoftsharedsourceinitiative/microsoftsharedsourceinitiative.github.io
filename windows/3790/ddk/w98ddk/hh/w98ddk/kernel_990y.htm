<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Claim_Critical_Section</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1632"></A>Claim_Critical_Section</H1>

<PRE>include vmm.inc

mov     eax, Claims
mov     ecx, Flags
VMMCall Claim_Critical_Section
 </PRE>

<P>Increments the claim count by the specified value. It has the same effect as calling the <B>Begin_Critical_Section</B> service repeatedly. Uses Flags. 

<UL>
	<LI>No return value. </LI>
</UL>

<DL>
<DT><I>Claims</I></DT>

<DD>Number of times to claim the critical section. Zero is a valid number, but is ignored. <I>Claims</I> must be a value less than 65536, otherwise this function treats it as if it were zero.</DD>

<DT><I>Flags</I></DT>

<DD>Action to take when interrupts occur while the virtual machine is blocked waiting for the critical section. This parameter can be a combination of the following values: 

<TABLE>

<TR VALIGN="top">
<TD width=28%>Block_Enable_Ints </TD>
<TD width=72%>Service interrupts in the virtual machine even if the virtual machine does not currently have interrupts enabled. This forces interrupts to be enabled. This flag is relevant only if either Block_Svc_Ints or Block_Svc_If_Ints_Locked is set. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>Block_Svc_If_Ints_Locked </TD>
<TD width=72%>Service events and simulated interrupts in the virtual machine if the thread blocks for the critical section and the VMStat_V86IntsLocked flag is set. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>Block_Svc_Ints </TD>
<TD width=72%>Service events and simulated interrupts in the virtual machine if the thread blocks for the critical section. </TD>
</TR>

<TR VALIGN="top">
<TD width=28%>Block_Thread_Idle </TD>
<TD width=72%>Consider the thread to be idle if it blocks for the critical section. </TD>
</TR>
</TABLE><BR>



<P>The Block_Poll value is reserved and must not be used with this service. 

</DD>
</DL>

<H4>See Also</H4>

<P><B>Adjust_Exec_Priority</B>, <B>Begin_Critical_Section</B>, <B>End_Critical_Section</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Claim_Critical_Section"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
