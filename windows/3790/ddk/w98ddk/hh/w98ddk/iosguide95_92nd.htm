<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Mapping Between Physical and Linear (Logical) Memory</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Mapping Between Physical and Linear (Logical) Memory">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_mapping_between_physical_and_linear_logical_memory_si"></A>Mapping Between Physical and Linear (Logical) Memory</H2>

<P>The following SCSIPORT option flags deal with the usage of physical memory and virtual memory.

<DL>
<DT><B>Master </B></DT>

<DD>If true, during SCSIPORT's CONFIG_DCB, it sets a ceiling of seventeen DCB_max_sg_elements. Also if Dma32BitAddresses=0, it sets DCB_dmd_small_memory (used if the total memory accessible by bus-master device is 16MB or less), and if applicable to the bus type, calls VDMAD_Virtualize_Channel.</DD>

<DT><B>MapBuffers </B></DT>

<DD>The purpose of this flag is to notify the SCSIPORT manager that all data buffer addresses need to be mapped to virtual addresses, in order to allow the miniport driver access to them.</DD>

<DT><B>NeedPhysicalAddresses</B></DT>

<DD>This flag causes the following DCB demand bit to be set: DCB_dmd_phys_sgd. When SCSIPORT prepares an IOP, it calls the IOS’s I/0 criteria routine (ILB_int_io_criteria_rtn). If the DCB demand flag DCB_dmd_phys_sgd is set, ILB_int_io_criteria_rtn performs the service of converting the data buffer (or <I>linear</I> SGD list) pointed to by the (linear) IOR_buffer_pointer, into a <I>physical</I> SGD list pointed to by  IOR_sgd_lin_phys. For more information, see Unraveling the Scatter-Gather Descriptor Confusion.
</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Mapping%20Between%20Physical%20and%20Linear%20(Logical)%20Memory"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
