<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>About ACM Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_2686"></A>About ACM Drivers</H2>

<P>An ACM driver typically performs a specific task for the ACM. For example, the MS-ADPCM codec can encode PCM data to MS-ADPCM and decode the resulting MS-ADPCM data. Each driver is small, simple, and easy to write; this makes it relatively simple to extend the audio capabilities of the system at any time. Sample ACM drivers are provided with this DDK. </P>

<P>An ACM driver conforms to the Installable Driver Interface. As such it must export a DriverProc function which supports a number of messages: 

<UL>
	<LI>DRV_CLOSE </LI>

	<LI>DRV_CONFIGURE </LI>

	<LI>DRV_FREE </LI>

	<LI>DRV_INSTALL </LI>

	<LI>DRV_LOAD </LI>

	<LI>DRV_OPEN </LI>

	<LI>DRV_QUERYCONFIGURE </LI>

	<LI>DRV_REMOVE </LI>
</UL>

<P>The DriverProc function must also support various ACM-specific messages which the ACM sends to the driver to request information about its capabilities or to perform a conversion. These messages are documented in detail in the reference section. Most of the code for responding to these messages is provided in the sample drivers; often, it is only necessary to substitute a few parameters. Generally, only the actual conversion routine (which is called in response to the ACMDM_STREAM_CONVERT message) must be completely rewritten for each driver. </P>

<P>An ACM driver must register itself with the ACM. It does this by putting an entry under the [Drivers32] section of the SYSTEM.INI file. The entry must have the following form: </P>

<PRE>msacm.alias=filename
 </PRE>

<P>In this example, <I>alias</I> must be a unique name. The ACM will only load one codec for each alias. Although not required, it is suggested that ACM codecs use the .ACM filename extension instead of the more typical .DLL extension. </P>

<P>For example, the Microsoft MS-ADPCM codec has the following entry: </P>

<PRE>msacm.msadpcm=msadp32.acm
 </PRE>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: About%20ACM%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
