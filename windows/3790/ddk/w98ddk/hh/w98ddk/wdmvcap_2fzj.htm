<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KS_VIDEOINFO</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_wdmvcap_ks_videoinfo"></A>KS_VIDEOINFO</H3>

<P>The <B>KS_VIDEOINFO</B> structure is used to describe the video stream.</P>

<P class=note><B>Note</B>&nbsp;&nbsp;<I>Do not</I> use this structure unless you are sure that the BITMAPINFOHEADER has a normal biSize == sizeof(BITMAPINFOHEADER).</P>

<PRE class=syntax>typedef struct tagKS_VIDEOINFO {
  RECT  rcSource;
  RECT  rcTarget;
  DWORD  dwBitRate;
  DWORD  dwBitErrorRate;
  REFERENCE_TIME  AvgTimePerFrame;
  KS_BITMAPINFOHEADER  bmiHeader;
  union {
    KS_RGBQUAD  bmiColors[KS_iPALETTE_COLORS];
    DWORD  dwBitMasks[KS_iMASK_COLORS];
    KS_TRUECOLORINFO  TrueColorInfo;
      };
} KS_VIDEOINFO;</PRE>

<H4>Members</H4>

<DL>
<DT><B>rcSource</B></DT>

<DD>Specifies the portion of the active video signal to use.</DD>

<DT><B>rcTarget</B></DT>

<DD>Specifies the destination rectangle.</DD>

<DT><B>dwBitRate</B></DT>

<DD>Specifies the approximate data bit rate.</DD>

<DT><B>DwBitErrorRate</B></DT>

<DD>Specifies the bit error rate for the stream.</DD>

<DT><B>AvgTimePerFrame</B></DT>

<DD>Specifies the average time per frame, in 100ns units.</DD>

<DT><B>bmiHeader</B></DT>

<DD>Specifies the bitmap header information.</DD>

<DT><B>bmiColors[KS_iPALETTE_COLORS]</B></DT>

<DD>Specifies the color palette.</DD>

<DT><B>dwBitMasks[KS_IMASK_COLORS]</B></DT>

<DD>To be determined.</DD>

<DT><B>TrueColorInfo</B></DT>

<DD>To be determined.

<PRE>#define KS_SIZE_MASKS (KS_iMASK_COLORS * sizeof(DWORD))
#define KS_SIZE_PREHEADER (FIELD_OFFSET(KS_VIDEOINFOHEADER,bmiHeader))
 
// For normal size
// #define KS_SIZE_VIDEOHEADER (sizeof(KS_BITMAPINFOHEADER) + KS_SIZE_PREHEADER)
// !!! for abnormal biSizes
#define KS_SIZE_VIDEOHEADER(pbmi) ((pbmi)-&gt;bmiHeader.biSize + KS_SIZE_PREHEADER)</PRE>

</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KS_VIDEOINFO"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
