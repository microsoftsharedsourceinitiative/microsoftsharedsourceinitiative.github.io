<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Asynchronous Event Processing</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_4096"></A>Asynchronous Event Processing</H2>

<P>A VSD must process the AEP_CONFIG_DCB and AEP_BOOT_COMPLETE functions that it receives during driver registration. </P>

<P>When processing the AEP_CONFIG_DCB function, the VSD must determine whether the given DCB corresponds to the type of bus and block device it can support. If so, the driver inserts itself into the calldown list for the <B>DCB</B> by using the ISP_INSERT_CALLDOWN function of the <B>ILB_service_rtn</B> routine. The driver must set the <B>ISP_i_cd_req</B> member to the address of the I/O request routine for the VSD. Subsequently, this routine is called whenever an I/O request for the device associated with the <B>DCB</B> is issued. </P>

<P>When processing the AEP_BOOT_COMPLETE function, the VSD must determine whether it successfully detected any devices it can support. If not, the driver must set the <B>AEP_result</B> member to AEP_FAILURE. This ensures that the VSD will be removed from memory. </P>

<P>Depending on whether the VSD specified additional values in the <B>DRP_feature_code</B> member of its <B>DRP</B> structure it may need to process additional asynchronous event functions. </P>

<H4>See Also</H4>

<P><B>AEP</B>, <B>DCB</B>, <B>DRP</B>, <B>ILB_service_rtn</B>, <B>ISP</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Asynchronous%20Event%20Processing"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
