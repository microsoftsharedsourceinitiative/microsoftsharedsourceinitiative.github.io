<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Decompressing Directly to Video Hardware</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_2779"></A>Decompressing Directly to Video Hardware</H2>

<P>Drivers that can render video directly to hardware should support the ICM_DRAW messages in addition to the ICM_DECOMPRESS messages. The ICM_DRAW messages decompress data directly to hardware rather than into a data buffer returned to the client-application by the decompression driver. </P>

<P>Your driver will receive a series of messages from the client-application to coordinate the following activities to decompress a video sequence: 

<UL>
	<LI>Setting the driver state </LI>

	<LI>Specifying the input format </LI>

	<LI>Preparing to decompress video </LI>

	<LI>Decompressing the video </LI>

	<LI>Ending decompression </LI>
</UL>

<P>The following ICM_DRAW messages are used by video decompression drivers for these decompression activities: </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=35%>Message </TH>
<TH align=left width=65%>Description </TH>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW </TD>
<TD width=65%>Decompresses a frame of data and draws it. </TD>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW_BEGIN </TD>
<TD width=65%>Prepares to draw data. </TD>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW_END </TD>
<TD width=65%>Clean up after decompressing an image to the screen. </TD>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW_REALIZE </TD>
<TD width=65%>Realizes a palette. </TD>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW_QUERY </TD>
<TD width=65%>Determines if the driver can render data in a specific format. </TD>
</TR>

<TR VALIGN="top">
<TD width=35%>ICM_DRAW_SUGGESTFORMAT </TD>
<TD width=65%>Has the driver suggest and output format. </TD>
</TR>
</TABLE><BR>

<P>The video decompressed with the ICM_DRAW messages is retained by your driver and it handles the display of data. These messages control only the decompression process. The messages used to control the drawing are described separately. Your driver will receive the ICM_DRAW messages only if it sets the VIDCF_DRAW flag when it responds to the ICM_GETINFO message. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Decompressing%20Directly%20to%20Video%20Hardware"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
