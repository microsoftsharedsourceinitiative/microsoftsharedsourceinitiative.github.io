<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>V86MMGR_Free_Buffer</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="_pss_1951"></A>V86MMGR_Free_Buffer</H1>

<PRE>include v86mmgr.inc

mov     ebp, OFFSET32 ClientRegisters
mov     ebx, VMHandle
mov     ecx, NumBytes
stc                     ; set carry flag to copy, clear otherwise
lfs     esi, FarPtrMem  ; buffer to receive data if carry set
VxDcall V86MMGR_Free_Buffer
 </PRE>

<P>Frees a buffer that was allocated by the <B>V86MMGR_Allocate_Buffer</B> service, and optionally copies data from the translation buffer. Uses Flags. 

<UL>
	<LI>No return value. </LI>
</UL>

<DL>
<DT><I>ClientRegisters</I> </DT>

<DD>Address of a <B>Client_Reg_Struc</B> structure containing the register values of the current VM. </DD>

<DT><I>VMHandle</I> </DT>

<DD>Handle of the current virtual machine. The current virtual machine must be in protected mode. </DD>

<DT><I>NumBytes</I> </DT>

<DD>Number of bytes to free (returned from the <B>V86MMGR_Allocate_Buffer</B> service). </DD>

<DT><I>FarPtrMem</I> </DT>

<DD>Selector and offset address (in FS and ESI) of the extended memory buffer to receive the contents of the freed translation buffer if the carry flag is set. This parameter is ignored if the carry flag is clear. 
</DD>
</DL>

<P>The buffers are maintained as a stack. Therefore, the last buffer allocated must be the first buffer freed. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: V86MMGR_Free_Buffer"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
