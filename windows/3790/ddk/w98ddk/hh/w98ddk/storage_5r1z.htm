<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Writing Fragmented Clusters</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="_pss_4207"></A>Writing Fragmented Clusters</H3>

<P>On version 3.0 CVFs, a client application can use the raw write IOCTL to write a fragmented cluster. To accomplish this, RCFFRAG must be set in the <B>rci_flags</B> field of the <B>RawClusterInfo</B> structure. In addition, the first sector of the data to be written must contain the fragment header exactly as it should appear on this disk. This means that a compressed cluster's data begins immediately following the fragment header in the first sector. An uncompressed cluster's data begins in the second sector of the data. The remainder of the first sector after the fragment header is usually padded with the DWORD value 45544550h. The <B>FRAGHDR</B> structure defines the format of the fragment header: </P>

<H4>See Also</H4>

<P><B>FRAGHDR</B>, <B>RawClusterInfo</B> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Writing%20Fragmented%20Clusters"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
