<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Installation Requests</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Windows&nbsp;98/Me:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="_pss_147"></A>Installation Requests</H2>

<P>The Device Manager sends requests to the installer whenever it needs the installer to carry out installation tasks, such as determining whether to install a detected device, selecting a device to install, and installing a selected device. </P>

<P>A DIF_SELECTDEVICE request directs the installer to choose a driver for a new device or a new driver for an existing device. The installer either makes the selection, prompts the user to make the selection, or directs the Device Manager to prompt the user (the default action). </P>

<P>A DIF_INSTALLDEVICE request directs the installer to install the given driver. The installer either installs the driver or directs the Device Manager to do it (the default action). In some cases, an installer may carry out pre-processing, such as copying support drivers and prompting for user input, before requesting the default action. </P>

<P>A DIF_PROPERTIES request directs the installer to display the properties sheet for the selected device. The Device Manager send this request when the user presses the Properties... button. The installer can display the property sheet or direct the Device Manager to display the default property sheet (the default action). </P>

<P>The Device Manager sends a DIF_REMOVE request to direct the installer to remove the given device. The installer typically removes the corresponding registry entries for the device. </P>

<P>A DIF_FIRSTTIMESETUP request directs the installer to carry out any class-specific installation tasks that need to be complete during initial installation of the operating system. The Device Manager sends this request only when the user installs Windows 95 for the first time. </P>

<P>A DIF_CALCDISKSPACE request directs the installer to calculate the disk space requirements for installing a driver for the given device. By default action, the Device Manager calculates the disk requirements based on the contents of the INF file. </P>

<P>A DIF_DESTROYPRIVATEDATA request directs the installer to free any memory or resources it has allocated and stored in the private data portion of the <B>DEVICE_INFO</B> structure. The Device Manager sends this function just before destroying the structure. </P>

<P>The Device Manager provides a set of requests (DIF_SELECTCLASSDRIVERS, DIF_VALIDATECLASSDRIVERS, AND DIF_INSTALLCLASSDRIVERS) that an installer can use to install a multiple set of drivers instead of a single driver. For example, a network installer may process these requests so that it can install the many different layers of drivers needed to support a network. An installer should process these requests only if it intends to carry out the complete installation on its own. </P>

<P>The DIF_SELECTCLASSDRIVERS request directs the installer to select the driver or drivers to install for the given class; DIF_VALIDATECLASSDRIVERS directs the installer to validate all settings for the given devices; and DIF_INSTALLCLASSDRIVERS directs the installer to install the selected and validated drivers. The default action for these requests is to do nothing. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Installation%20Requests"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
