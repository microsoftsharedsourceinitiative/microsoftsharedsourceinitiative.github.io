<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Dot4 Flow Control Policy</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Dot4 Flow Control Policy">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>IEEE&nbsp;1284.4&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_dot4_flow_control_policy_kg"></A>Dot4 Flow Control Policy</H2>

<P>The Dot4 driver uses a credit-based flow control policy to regulate the flow of data over each <A HREF="dot4dvr_3wvb.htm">Dot4 channel</A>. The Dot4 flow control policy is based on the following IEEE 1284.4 data flow control mechanism:</P>

<P class=indent1>A receiving IEEE 1284.4 peer controls the amount of data sent to it by granting credits to a sending IEEE 1284.4 peer. There is a one-to-one correspondence between credits and packets.</P>

<P>See the IEEE 1284.4 specification for more information on IEEE 1284.4 credit-based data flow control.</P>

<P>On a packet-type <A HREF="dot4dvr_3wvb.htm">Dot4 channel</A>, the Dot4 driver always uses IEEE 1284.4 <I>piggyback credit</I> to grant credits to the peripheral. A piggy back credit is a credit that is specified in an IEEE 1284.4 packet header.</P>

<P>On a stream-type Dot4 channel, Dot4 flow control policy is partly controlled by entry values in the <B>Policy </B>key of a device's Plug and Play hardware device key. When the Dot4 driver starts a session, it uses the entry values in the <B>Policy</B> key to set flow control policy. If a policy entry value does not exist, the Dot4 driver sets a default. To fine-tune flow control, a client can dynamically adjust the following aspects of flow control policy before it starts a session:

<UL>
	<LI><I>credit on zero length</I>
<P>Specifies whether the Dot4 driver grants credits to a peripheral by using piggyback credits in a header-only packet. The default value is FALSE.
</LI>

	<LI><I>piggyback credit</I>
<P>Specifies whether the Dot4 driver grants available peripheral-to-host credits by sending piggyback credits when a packet is written to the peripheral. The default value is FALSE.
</LI>

	<LI><I>ask credit after write</I>
<P>Specifies whether the Dot4 driver requests credit by using an IEEE 1284.4 CreditRequest transaction if host-to-peripheral credits are exhausted after a write operation. The default value is TRUE.
</LI>

	<LI><I>command packet two parts</I>
<P>Specifies whether the Dot4 driver sends command packets over an IEEE 1284.4 Transaction Channel in two parts (that is, separate, consecutive writes of the packet header and payload). The default value is TRUE.
</LI>
</UL>

<P>See <A HREF="dot4dvr_0ysn.htm">Dot4 Policy Registry Key</A> for more information about setting flow control policy.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Dot4%20Flow%20Control%20Policy"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
