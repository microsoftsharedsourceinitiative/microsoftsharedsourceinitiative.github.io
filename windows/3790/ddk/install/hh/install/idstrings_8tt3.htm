<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Device Identification Strings</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Device Identification Strings">
<META NAME="MS-HKWD" CONTENT="Device IDs">
<META NAME="MS-HKWD" CONTENT="Hardware IDs">
<META NAME="MS-HKWD" CONTENT="Compatible IDs">
<META NAME="MS-HKWD" CONTENT="Instance IDs">
<META NAME="MS-HKWD" CONTENT="Device Instance IDs">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_enumerator_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_query_id_dr">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_iogetdeviceproperty_kr">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_iogetdeviceproperty_kr">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_id_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_capabilities_dr">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_irp_mn_query_id_dr">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_tree_kg">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_device_identification_strings_dg"></A>Device Identification Strings</H1>

<P>The Plug and Play (PnP) Manager and Setup use device identification strings to identify devices that are installed in a system. </P>

<P>Setup uses the following device identification strings, which are reported by a device's <A HREF="JavaScript:hhobj_1.Click()">enumerator</A>, to locate the information (INF) file that best matches the device: </P>

<P class=indent1><A HREF="#ddk_device_ids_dg">Device ID</A></P>

<P class=indent1><A HREF="#ddk_hardware_ids_dg">Hardware IDs</A></P>

<P class=indent1><A HREF="#ddk_compatible_ids_dg">Compatible IDs</A></P>

<P>A device has only one device ID, which is the most specific ID for a device. A device can also have less specific hardware IDs and compatible IDs. Setup first attempts to find an INF file that matches the device ID. If it does not find such a match, Setup next attempts to find a match to one of the less specific hardware IDs or compatible IDs. For more information about how Setup uses these IDs to match a device to an INF file, and how to specify IDs in an INF file, see <A HREF="install-over_7dnr.htm">How Setup Selects Drivers</A>. </P>

<P>In addition to using the preceding IDs to identify devices, the PnP Manager uses the following IDs to uniquely identify instances of each device that are installed in a system:</P>

<P class=indent1><A HREF="#ddk_instance_ids_dg">Instance IDs</A></P>

<P class=indent1><A HREF="#ddk_device_instance_ids_dg">Device instance IDs</A></P>

<P>Each enumerator customizes its device IDs, hardware IDs, and compatible IDs to uniquely identify the devices that it enumerates. In addition, each enumerator has its own policy regarding which are hardware IDs and which are compatible IDs. For more information about hardware IDs and compatible IDs for most of the important buses, see the following:</P>

<P class=indent1><A HREF="idstrings_7q7b.htm">Generic Identifiers</A></P>

<P class=indent1><A HREF="idstrings_4mav.htm">Identifiers for PCI Devices</A></P>

<P class=indent1><A HREF="idstrings_1x0n.htm">Identifiers for SCSI Devices</A></P>

<P class=indent1><A HREF="idstrings_8y93.htm">Identifiers for IDE Devices</A></P>

<P class=indent1><A HREF="idstrings_1e93.htm">Identifiers for PCMCIA Devices</A></P>

<P class=indent1><A HREF="idstrings_3fqf.htm">Identifiers for ISAPNP Devices</A></P>

<P class=indent1><A HREF="idstrings_9ysn.htm">Identifiers for 1394 Devices</A></P>

<P class=indent1><A HREF="idstrings_6rfr.htm">Identifiers for USB Devices</A></P>



<H4><A NAME="ddk_device_ids_dg"></A>Device IDs</H4>

<P>A device ID is a vendor-defined identification string that is the most specific ID that Setup uses to match a device to an INF file. A device has only one device ID. A device ID has the same format as a <A HREF="#ddk_hardware_ids_dg">hardware ID</A>. If an enumerator reports a list of hardware IDs for a device, the device ID should be the first hardware ID in the list.</P>

<P>The PnP Manager uses the device ID to create a subkey for a device under the registry key for the device's enumerator.</P>

<P>To obtain a device ID, use an <A HREF="JavaScript:hhobj_2.Click()"><B>IRP_MN_QUERY_ID</B></A> request and set the <B>Parameters.QueryId.IdType</B> field to <B>BusQueryDeviceID</B>.</P>



<H4><A NAME="ddk_hardware_ids_dg"></A>Hardware IDs</H4>

<P>A hardware ID is a vendor-defined identification string that Setup uses to match a device to an INF file. In most cases, a device has associated with it a list of hardware IDs. (However, there are exceptions – see <A HREF="idstrings_9ysn.htm">Identifiers for 1394 Devices</A>). The first hardware ID in the list should be the <A HREF="#ddk_device_ids_dg">device ID</A>, and the remaining IDs should be listed in order of decreasing suitability.</P>

<P>A hardware ID has one of the following generic formats:

<DL>
<DT><I>&lt;enumerator&gt;\&lt;enumerator-specific-device-ID&gt;</I></DT>

<DD>This is the most common format for individual PnP devices reported to the PnP Manager by a single enumerator. New enumerators should use this format or the following format.</DD>

<DT><I>*&lt;enumerator-specific-ID&gt;</I></DT>

<DD>The asterisk indicates that the device is supported by more than one enumerator, such as ISAPNP and the BIOS.</DD>

<DT><I>&lt;device-class-specific-ID&gt;</I></DT>

<DD>An existing device class that has established its own naming convention might use a custom format. For information on their hardware ID formats, see the hardware specification for such buses. New enumerators should not use this format.
</DD>
</DL>

<P>The number of characters of a hardware ID, excluding a NULL-terminator, must be less than MAX_LENGTH_LEN. This constraint applies to the sum of the lengths of all the fields and any “\” field separators in a hardware ID. In addition, when an <A HREF="#ddk_instance_ids_dg">instance ID</A> is concatenated to a hardware ID to create a <A HREF="#ddk_device_instance_ids_dg">device instance ID</A>, the lengths of the hardware ID and the instance ID are further constrained by the maximum possible length of a device instance ID.</P>

<P>To obtain the list of hardware IDs for a device, call <A HREF="JavaScript:hhobj_3.Click()"><B>IoGetDeviceProperty</B></A> with the <I>DeviceProperty</I> parameter set to <B>DevicePropertyHardwareID</B>. The list of hardware IDs that this routine retrieves is a REG_MULTI_SZ value. The maximum number of characters in a hardware list, including a NULL terminator after each hardware ID and a final NULL terminator, is REGSTR_VAL_MAX_HCID_LEN. The maximum possible number of IDs in a list of hardware IDs is MAX_HCID_COUNT.</P>

<H4>Examples of Hardware IDs</H4>

<P>In the following, the first example is a <A HREF="idstrings_7q7b.htm">generic identifier</A> for a PnP device, and the second example is an <A HREF="idstrings_4mav.htm">identifier for a PCI device</A>:</P>

<P class=indent1>root\*PNP0F08</P>

<P class=indent1>PCI\VEN_1000&amp;DEV_0001&amp;SUBSYS_00000000&amp;REV_02</P>



<H4><A NAME="ddk_compatible_ids_dg"></A>Compatible IDs</H4>

<P>A compatible ID is a vendor-defined identification string that Setup uses to match a device to an INF file. A device can have associated with it a list of compatible IDs. The compatible IDs should be listed in order of decreasing suitability. If Setup cannot locate an INF file that matches one of a device's hardware IDs, it uses compatible IDs to locate an INF file. Compatible IDs have the same format as <A HREF="#ddk_hardware_ids_dg">hardware IDs</A>; however, compatible IDs are typically more generic than hardware IDs. </P>

<P>If a vendor ships an INF file that specifies a compatible ID for a driver node, the vendor should ensure that their INF file can support all the hardware that matches the compatible ID. Because a match with a compatible ID is not as strong as a match to a hardware ID, the PnP Manager prompts the user for confirmation before processing the INF file.</P>

<P>To obtain a list of compatible IDs for a device, call <A HREF="JavaScript:hhobj_4.Click()"><B>IoGetDeviceProperty</B></A> with the <I>DeviceProperty</I> parameter set to <B>DevicePropertyCompatibleID</B>. The list of compatible IDs that this routine retrieves is a REG_MULTI_SZ value. The maximum number of characters in a compatible ID list, including a NULL terminator after each compatible ID and a final NULL terminator, is REGSTR_VAL_MAX_HCID_LEN. The maximum possible number of IDs in a list of compatible IDs is MAX_HCID_COUNT.</P>



<H4><A NAME="ddk_instance_ids_dg"></A>Instance IDs</H4>

<P>An instance ID is a device identification string that distinguishes a device from other devices of the same type on a machine. An instance ID contains serial number information, if supported by the underlying bus, or some kind of location information. The string cannot contain any "\" characters; otherwise, the generic format of the string is bus-specific.</P>

<P>The number of characters of an instance ID, excluding a NULL-terminator, must be less than MAX_LENGTH_LEN. In addition, when an instance ID is concatenated to a <A HREF="JavaScript:hhobj_5.Click()">device ID</A> to create a device instance ID, the lengths of the device ID and the instance ID are further constrained by the maximum possible length of a device instance ID.</P>

<P>The <B>UniqueID</B> member of the <A HREF="JavaScript:hhobj_6.Click()">DEVICE_CAPABILITIES</A> structure for a device indicates if a bus-supplied instance ID is unique across the system, as follows:

<UL>
	<LI>If <B>UniqueID</B> is FALSE, the bus-supplied instance ID for a device is unique only to the device's bus. The PnP Manager modifies the bus-supplied instance ID, and combines it with the corresponding device ID, to create a device instance ID that is unique in the system.</LI>

	<LI>If <B>UniqueID</B> is TRUE, the device instance ID, formed from the bus-supplied device ID and instance ID, uniquely identifies a device in the system.</LI>
</UL>

<P>An instance ID is persistent across system boots.</P>

<P>To obtain the bus-supplied instance ID for a device, use an <A HREF="JavaScript:hhobj_7.Click()">IRP_MN_QUERY_ID</A> request and set the <B>Parameters.QueryId.IdType</B> member to <B>BusQueryInstanceID</B>.</P>



<H4><A NAME="ddk_device_instance_ids_dg"></A>Device Instance IDs</H4>

<P>A device instance ID is a system-supplied device identification string that uniquely identifies a device in the system. The PnP Manager assigns a device instance ID to each device node in a system's <A HREF="JavaScript:hhobj_8.Click()">device tree</A>.</P>

<P>The format of this string consists of an <A HREF="#ddk_instance_ids_dg">instance ID</A> concatenated to a <A HREF="#ddk_device_ids_dg">device ID</A>, as follows:

<DL>
<DT>&lt;<I>device-ID</I>&gt;\&lt;<I>instance-specific-ID</I>&gt;</DT>

<DD>The number of characters of a device instance ID, excluding a NULL-terminator, must be less than MAX_LENGTH_LEN. This constraint applies to the sum of the lengths of all the fields and “\” field separator between the <I>device ID</I> and <I>instance-specific-ID</I> fields.</DD>
</DL>

<P>A device instance ID is persistent across system boots.</P>

<P>The following is an example of an instance ID ("1&amp;08") concatenated to a device ID for a PCI device:</P>

<P class=indent1>PCI\VEN_1000&amp;DEV_0001&amp;SUBSYS_00000000&amp;REV_02\1&amp;08</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Device%20Identification%20Strings"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
