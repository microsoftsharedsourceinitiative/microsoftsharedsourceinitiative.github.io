<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Identifiers Generated by USBPRINT.SYS</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Identifiers Generated by USBPRINT.SYS">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_identifiers_generated_by_usbprint.sys_dg"></A>Identifiers Generated by USBPRINT.SYS</H3>

<P>Microsoft® Windows® 2000 and Windows Millennium Edition (Windows Me) supply a kernel-mode USB print driver, <I>usbprint.sys</I>, which connects the printer subsystem to the USB stack. The native USB printer driver frees vendors from the necessity of developing their own kernel-mode USB printer drivers, allowing them, instead, to develop high-level user-mode printer drivers that work with both USB and parallel printers. </P>

<P>The <I>usbprint.inf</I> installation file contains a compatible ID that matches all USB class 7 printer devices. If the USB hub driver enumerates one of these devices, the system will find a match for the ID that the hub driver generates in <I>usbprint.inf </I>and will load the USB printer driver, <I>usbprint.sys</I>. The compatible ID found in <I>usbprint.inf </I>has the following form:</P>

<P class=indent1>USB\CLASS_07</P>

<P>where </P>

<P class=indent1>class 07h = devices belonging to the USB printer class</P>

<P>Once loaded, the USB printer driver creates a new PDO for the printer device. When the PnP manager queries for the device identification strings of the newly created PDO, the USB printer driver fabricates a new hardware ID, derived from the device's IEEE 1284 string, that is compatible with the string identifiers generated by the parallel bus enumerator. This hardware ID has the following format:</P>

<P class=indent1>USBPRINT\<I>NameModel(20)Checksum(4)</I></P>

<P>where <I>NameModel(20)</I> is the concatenation of the manufacturer name and the model of the device, truncated to a maximum of 20 characters, and <I>Checksum(4)</I> is a 4-character cyclic redundancy check (CRC) code calculated from the manufacturer name and the model name. Spaces in the string are replaced with underscores.</P>

<P>For example, if the manufacturer's name is "Hewlett-Packard," the model name is "HP Color LaserJet 550," and the check sum is 3115, the hardware ID would be:</P>

<P class=indent1>USBPRINT\Hewlett-PackardHP_Co0004</P>

<P>In the preceding example, the space between "HP" and "Color" in the model name was replaced with an underscore to produce the truncated string "HP_Co".</P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Identifiers%20Generated%20by%20USBPRINT.SYS"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
