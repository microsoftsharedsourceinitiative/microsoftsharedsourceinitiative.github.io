<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>INF DDInstall Section</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="INF DDInstall Section">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_hardware_id_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_compatible_id_dg_gly">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_device_id_dg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_inf_ddinstall_section_dr"></A>INF <I>DDInstall</I> Section</H1>

<P><B>[</B><I>install-section-name</I><B>]</B> | <BR>
<B>[</B><I>install-section-name</I><B>.nt]</B> | <BR>
<B>[</B><I>install-section-name</I><B>.ntx86]</B> | <BR>
<B>[</B><I>install-section-name</I><B>.ntia64]</B> <BR>
<B>&nbsp;</B><BR>
[<B>DriverVer=</B><I>mm/dd/yyyy</I>[<B>,</B><I>x.y.v.z</I>] ]<BR>
[<B>CopyFiles=@</B><I>filename</I> | <I>file-list-section</I>[<B>,</B><I>file-list-section</I>] ...]<BR>
[<B>CopyINF</B>=<I>filename1.inf</I>[<B>,</B><I>filename2.inf</I>]...]<BR>
[<B>AddReg=</B><I>add-registry-section</I>[<B>,</B><I>add-registry-section</I>]...]<BR>
[<B>Include=</B><I>filename1</I><B>.</B><I>inf</I>[<B>,</B><I>filename2</I><B>.</B><I>inf</I>]...]<BR>
[<B>Needs=</B><I>inf-section-name</I>[<B>,</B><I>inf-section-name</I>]...]<BR>
[<B>Delfiles=</B><I>file-list-section</I>[<B>,</B><I>file-list-section</I>]...]<BR>
[<B>Renfiles=</B><I>file-list-section</I>[<B>,</B><I>file-list-section</I>]...]<BR>
[<B>DelReg=</B><I>del-registry-section</I>[<B>,</B><I>del-registry-section</I>]...]<BR>
[<B>BitReg=</B><I>bit-registry-section</I>[<B>,</B><I>bit-registry-section</I>]...]<BR>
[<B>LogConfig=</B><I>log-config-section</I>[<B>,</B><I>log-config-section</I>]...]<BR>
[<B>ProfileItems=</B><I>profile-items-section</I>[<B>,</B><I>profile-items-section</I>]...]<BR>
[<B>UpdateInis=</B><I>update-ini-section</I>[<B>,</B><I>update-ini-section</I>]...]<BR>
[<B>UpdateIniFields=</B><I>update-inifields-section</I>[<B>,</B><I>update-inifields-section</I>]...]<BR>
[<B>Ini2Reg=</B><I>ini-to-registry-section</I>[<B>,</B><I>ini-to-registry-section</I>]...]<BR>
[<B>RegisterDlls</B>=<I>register-dll-section</I>[<B>,</B><I>register-dll-section</I>]...]<BR>
[<B>UnregisterDlls</B>=<I>unregister-dll-section</I>[<B>,</B><I>unregister-dll-section</I>]...]<BR>
[<B>ExcludeID=</B><I>device-identification-string</I>[<B>,</B><I>device-identification-string</I>]...] ...<BR>
<B>&nbsp;</B><BR>
<B>&nbsp;</B><BR>
</P>

<P>Each per-Models <I>DDInstall</I> section contains an optional <B>DriverVer</B> directive and one or more directives referencing additional named sections in the INF file, shown here with the most commonly specified INF directives, <B>CopyFiles</B> and <B>AddReg</B>, listed first. The sections referenced by these directives contain instructions for installing driver files and writing any device-specific and/or driver-specific information into the registry. </P>

<H4>Directives and Entries</H4>

<DL>
<DT><B>DriverVer=</B><I>mm/dd/yyyy</I>[<B>,</B><I>x.y.v.z</I>]</DT>

<DD>This optional entry specifies version information for the driver package.

<P>For information about how to specify this entry, see <A HREF="inf-format_0a5u.htm">INF <B>DriverVer</B> Directive</A>.
</DD>

<DT><B>CopyFiles=@</B><I>filename</I> | <I>file-list-section</I>[<B>,</B><I>file-list-section</I>] ...</DT>

<DD>This directive either specifies one named file to be copied from the source media to the destination or references one or more INF-writer-defined sections in which device-relevant files on the source media are specified for transfer to the destination. The <B>CopyFiles</B> directive is optional, but is present in most <I>DDInstall</I> sections.

<P>The <B>DefaultDestDir</B> entry in the <B>DestinationDirs</B> section of the INF specifies the destination for any single file to be copied. The <B>SourceDisksNames</B> and <B>SourceDisksFiles</B> sections, or an additional INF specified in the <B>LayoutFile</B> entry of this INF's <B>Version</B> section, provides the location on the distribution media of the driver files. 


<P>For more information, see <A HREF="inf-format_4oaa.htm">INF <B>CopyFiles</B> Directive</A>.
</DD>

<DT><B>CopyINF</B>=<I>filename1.inf</I>[,<I>filename2.inf</I>]...] </DT>

<DD>(<I>Windows XP and later.</I>) This directive causes specified INF files to be copied to the target system.

<P>For more information, see <A HREF="inf-format_9f1u.htm">INF <B>CopyINF</B> Directive</A>.
</DD>

<DT><B>AddReg=</B><I>add-registry-section</I>[<B>,</B><I>add-registry-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections in which new subkeys, possibly with initial value entries, are specified to be written into the registry or in which the value entries of existing keys are modified.

<P>An <B>HKR</B> specification in such an add-registry section designates the <B>..Class\</B><I>SetupClassGUID</I><B>\</B><I>device-instance-id </I>registry path to the user-accessible driver (a.k.a. "software" key). 


<P>For more information, see <A HREF="inf-format_2v02.htm">INF <B>AddReg</B> Directive</A>.
</DD>

<DT><B>Include=</B><I>filename</I><B>.</B><I>inf</I>[<B>,</B><I>filename2</I><B>.</B><I>inf</I>]...</DT>

<DD>This optional entry specifies one or more additional system-supplied INF files containing sections needed to install this device and/or driver. If this entry is specified, usually so is a <B>Needs</B> entry. 

<P>For example, the system INF files for device drivers that depend on the system's kernel-streaming support specify this entry as <BR>
<B>Include= ks.inf</B>[<B>, </B>[<B>kscaptur.inf,</B>] [<B>ksfilter.inf</B>]]. 


<P>(For further information on the <B>Include</B> entry and restrictions on its use, see <A HREF="create-inf_82g7.htm">Specifying the Source and Target Locations for Device Files</A>).
</DD>

<DT><B>Needs=</B><I>inf-section-name</I>[<B>,</B><I>inf-section-name</I>]...</DT>

<DD>This optional entry specifies sections within system-supplied INF files that must be processed during the installation of this device. Typically, such a named section is a <I>DDInstall</I> (or <I>DDInstall</I><B>.</B><I>xxx</I>) section within one of the INF files listed in an <B>Include</B> entry. However, it can be any section that is referenced within such a <I>DDInstall</I> or <I>DDInstall</I><B>.</B><I>xxx</I> section of the included INF. 

<P>For example, the INF files for device drivers that have the preceding <B>Include</B> entry specify this entry as <BR>
<B>Needs= KS.Registration</B>[<B>, KSCAPTUR.Registration</B> | <BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>KSCAPTUR.Registration.NT,</B> <B>MSPCLOCK.Installation</B>] 


<P><B>Needs</B> entries cannot be nested. (For further information on the <B>Needs</B> entry and restrictions on its use, see <A HREF="create-inf_82g7.htm">Specifying the Source and Target Locations for Device Files</A>).
</DD>

<DT><B>DelFiles=</B><I>file-list-section</I>[<B>,</B><I>file-list-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections listing files on the target to be deleted.  

<P>For more information, see <A HREF="inf-format_3vg2.htm">INF <B>DelFiles</B> Directive</A>.
</DD>

<DT><B>RenFiles=</B><I>file-list-section</I>[<B>,</B><I>file-list-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections listing files to be renamed on the destination before device-relevant source files are copied to the target machine. 

<P>For more information, see <A HREF="inf-format_0pki.htm">INF <B>RenFiles</B> Directive</A>.
</DD>

<DT><B>DelReg=</B><I>del-registry-section</I>[<B>,</B><I>del-registry-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections in which keys and/or value entries are specified to be removed from the registry during installation of the devices. 

<P>Typically, this directive is used to handle upgrades when an INF must clean up old registry entries from a previous installation of this device. An <B>HKR</B> specification in such a delete-registry section designates the <B>..Class\</B><I>SetupClassGUID</I><B>\</B><I>device-instance-id</I> registry path to the user-accessible driver (a.k.a. "software" key). 


<P>For more information, see <A HREF="inf-format_21de.htm">INF <B>DelReg</B> Directive</A>.
</DD>

<DT><B>BitReg=</B><I>bit-registry-section</I>[<B>,</B><I>bit-registry-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections in which existing registry value entries of type REG_BINARY are modified. (See also <B>AddReg</B>.) An <B>HKR</B> specification in such a bit-registry section designates the <B>..Class\</B><I>SetupClassGUID</I><B>\</B><I>device-instance-id</I> registry path to the user-accessible driver (a.k.a. "software" key). 

<P>For more information, see <A HREF="inf-format_4sj6.htm">INF <B>BitReg</B> Directive</A>.
</DD>

<DT><B>LogConfig=</B><I>log-config-section</I>[<B>,</B><I>log-config-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections within an INF for a root-enumerated device or for a manually installed device. In these named sections, the INF for such a "detected" or manually installed device specifies one or more logical configurations of bus-relative hardware resources that the device must have to be operational. The INF for such a manually installed device that is not software-configurable also should have a <I>DDInstall</I><B>.FactDef</B> section. 

<P>The <B>LogConfig</B> directive is never used to install PnP devices. However, you can use an INF <I>DDInstall</I><B>.ConfigOverride</B> section to provide an override configuration for PnP devices.


<P>This directive is irrelevant to all higher level (nondevice) drivers and components.


<P>For more information, see <A HREF="inf-format_85f6.htm">INF <B>LogConfig</B> Directive</A>.
</DD>

<DT><B>ProfileItems=</B><I>profile-items-section</I>[<B>,</B><I>profile-items-section</I>]...</DT>

<DD>This directive references one or more INF-writer-defined sections that describe items to be added to, or removed from, the Start menu.

<P>This directive is only supported on Windows&nbsp;2000 and later platforms.


<P>For more information, see <A HREF="inf-format_8e42.htm">INF <B>ProfileItems</B> Directive</A>.
</DD>

<DT><B>UpdateInis=</B><I>update-ini-section</I>[<B>,</B><I>update-ini-section</I>]...</DT>

<DD>This rarely used directive references one or more INF-writer-defined sections, specifying a source INI file from which a particular section or line within such a section is to be read into a destination INI file of the same name during installation. Optionally, line-by-line modifications to an existing INI file on the destination from a given source INI file of the same name can be specified in the update-ini section.

<P>For more information, see <A HREF="inf-format_4f76.htm">INF <B>UpdateInis</B> Directive</A>.
</DD>

<DT><B>UpdateIniFields=</B><I>update-inifields-section</I>[<B>,</B><I>update-inifields-section</I>]...</DT>

<DD>This rarely used directive references one or more INF-writer-defined sections in which modifications within the lines of a device-specific INI file are specified. 

<P>For more information, see <A HREF="inf-format_5a0i.htm">INF <B>UpdateIniFields</B> Directive</A>.
</DD>

<DT><B>Ini2Reg=</B><I>ini-to-registry-section</I>[<B>,</B><I>ini-to-registry-section</I>]...</DT>

<DD>This rarely used directive references one or more INF-writer-defined sections in which sections or lines from a device-specific INI file, supplied on the source media, are to be moved into the registry. 

<P>For more information, see <A HREF="inf-format_2i5u.htm">INF <B>Ini2Reg</B> Directive</A>.
</DD>

<DT><B>RegisterDlls</B>=<I>register-dll-section</I>[<B>,</B><I>register-dll-section</I>]...</DT>

<DD>This directive references one or more INF sections used to specify files that are OLE controls and require self-registration.

<P>For more information, see <A HREF="inf-format_6wdu.htm">INF <B>RegisterDlls</B> Directive</A>.
</DD>

<DT><B>UnregisterDlls</B>=<I>unregister-dll-section</I>[<B>,</B><I>unregister-dll-section</I>]...</DT>

<DD>This directive references one or more INF sections used to specify files that are OLE controls and require self-unregistration (self-removal).

<P>For more information, see <A HREF="inf-format_2dte.htm">INF <B>UnregisterDlls</B> Directive</A>.
</DD>

<DT><B>ExcludeID=</B><I>device-identification-string</I>[<B>,</B><I>device-identification-string</I>]...</DT>

<DD>(<I>Windows XP and later</I>.) This directive specifies one or more device identification strings (either <A HREF="JavaScript:hhobj_1.Click()">hardware IDs</A> or <A HREF="JavaScript:hhobj_2.Click()">compatible IDs</A>). The <I>DDInstall</I> section will not install devices having <A HREF="JavaScript:hhobj_3.Click()">device IDs</A> that match any of the hardware IDs or compatible IDs listed.
</DD>
</DL>

<H4>Comments</H4>

<P>Throughout DDK documentation, the term <I>DDInstall</I> is used to refer to an <I>install-section-name</I>, with or without platform extensions. Thus, "<I>DDInstall</I> section" means "a named section within an INF, having the format [<I>install-section-name</I>] or [<I>install-section-name</I><B>.nt</B><I>xxx</I>]". When you create names for <I>DDInstall</I> sections, you should include a device-specific prefix, such as <B>[WDMPNPB003_Device]</B> or <B>[GPR400.Install.NT]</B>.</P>

<P>Each <I>DDInstall</I> section must be referenced in a device/models-specific entry under the per-manufacturer <A HREF="inf-format_3ywi.htm">INF <I>Models</I> section</A> of the INF file. </P>

<P>Except for devices that have no associated files to be transferred from the source media, a dual-OS INF file for a WDM driver must have at least two parallel <I>DDInstall</I> sections for a given device, as follows:

<OL>
	<LI>For Windows&nbsp;9x platforms, provide an undecorated <I>DDInstall</I> section that specifies entries for device installations. There is no <I>DDInstall</I><B>.Services</B> section in such a dual-OS INF file, because Windows&nbsp;9x/Me does not store the same information about device/driver services and dependencies in its registry as Windows&nbsp;2000 and later does. Depending on the device, it can also have either or both of the optional <I>DDInstall</I><B>.HW</B> and <I>DDInstall</I><B>.Interfaces</B> sections to install the device/driver on Windows&nbsp;9x/Me platforms. (It might also have an <A HREF="inf-format_03qq.htm">INF <I>DDInstall</I><B>.LogConfigOverride</B> section</A>.) </LI>

	<LI>For Windows&nbsp;2000 and later:
<UL>
	<LI>Provide an <I>install-section-name</I><B>.ntx86</B> section that specifies the entries for device/driver installations specific to x86-based platforms. </LI>

	<LI>Provide an <I>install-section-name</I><B>.ntia64</B> section that specifies the entries for device/driver installations specific to ia64-based platforms. </LI>

	<LI>Provide an <I>install-section-name</I><B>.nt</B> section that specifies the entries for device/driver installations that are not specific to a particular hardware platform. </LI>
</UL>

<P>For more information about how to use the system-defined <B>.nt</B>, <B>.ntx86</B>, and <B>.ntia64</B> extensions, see <A HREF="create-inf_9xpj.htm">Creating INF Files for Multiple Platforms and Operating Systems</A>. 

<P>If a Windows 2000 or later INF file installs drivers, it must have <I>DDInstall</I><B>.Services</B> sections to specify device/driver registry information to be stored in the registry's <B>...\CurrentControlSet\Services</B> tree. Depending on the device, it can also have one or more <I>DDInstall</I><B>.HW</B>, <I>DDInstall</I><B>.CoInstallers</B>, <I>DDInstall</I><B>.Interfaces</B>, and/or <I>DDInstall</I><B>.LogConfigOverride</B> sections.
</LI>
</OL>

<P>Each directive in a <I>DDInstall</I> section can reference more than one section name, but each additional named section must be separated from the next with a comma (<B>,</B>). Each such section name must be unique within the INF and must follow the general rules for defining section names. These rules are described in <A HREF="inf-format_7soi.htm">General Syntax Rules for INF Files</A>.</P>

<P>Any <B>AddReg</B> directive specified in a <I>DDInstall</I> section is assumed to reference an add-registry section that cannot be used to store information about upper or lower filter drivers, about multifunction devices, or about driver-independent but device-specific parameters. If a device/driver INF must store this type of information in the registry, it must use an <B>AddReg</B> directive in its undecorated and decorated <I>DDInstall</I><B>.HW</B> sections, if any, to reference another INF-writer-defined <I>add-registry-section</I>. </P>

<P>A <I>DDInstall</I> section can include a directive named <B>Reboot</B> or <B>Restart</B>. These directives are <I>only for compatibility with Windows 9x</I>. If one of these entries is present the OS is forced to reboot when the device is installed. These directives should never be used for PnP devices. In any case, it is best to let Setup determine whether the machine needs to be rebooted rather than specifying these directives. </P>

<H4>Examples</H4>

<P>This example shows the expansion of the <I>DDInstall</I> sections, <B>Ser_Inst</B> and <B>Inp_Inst</B> These sections are referenced in the example for the <A HREF="inf-format_3ywi.htm">INF <I>Models</I> section</A>. </P>

<PRE>[Ser_Inst]
CopyFiles=Ser_CopyFiles, mouclass_CopyFiles
 
[Ser_CopyFiles]
sermouse.sys
 
[mouclass_CopyFiles] ; section name referenced by &gt; 1 CopyFiles
mouclass.sys
 
[Inp_Inst]
CopyFiles=Inp_CopyFiles, mouclass_CopyFiles
 
[Inp_CopyFiles]
inport.sys</PRE>

<P>The following example provides a general illustration of using platform extensions</P>

<PRE>[Manufacturer]
%MSFT% = Microsoft

[Microsoft]
%Device.DeviceDesc% = DeviceInstall, <I>HWID</I>


[DeviceInstall.NTx86]
;
; This section is used for installations on NT-based x86 systems.
;
...

[DeviceInstall.NTx86.Services]
;
; Services installation for NT-based x86 systems.
;
...

[DeviceInstall.NT]
;
; This section is used for installations on NT-based systems (all other architectures).
;
...

[DeviceInstall.NT.Services]
;
; Services installation for NT-based systems (all other architectures).
;
...

[DeviceInstall]
;
; This section is used for installations on non-NT-based platforms (that is, Win9x/WinME).
;
...</PRE>

<P>This example shows the <I>DDInstall</I> section in a dual-OS INF file, for installation of a system-supplied WDM driver for an audio device, on an NT-based system. With the exception of the <B>DriverVer</B> directive, this section's entries are identical to the undecorated <I>DDInstall</I> section for installations of the same device on Windows&nbsp;9x/Me platforms. However, this <I>install-section-name</I><B>.NT</B> section is necessary in such a dual-OS INF file to set up the <I>install-section-name</I><B>.NT.Services</B> section that is required to install the device and driver on Windows&nbsp;2000 and later platforms. </P>

<PRE>[WDMPNPB003_Device.NT]
DriverVer=01/14/1999,5.0
Include=ks.inf, wdmaudio.inf
Needs=KS.Registration, WDMAUDIO.Registration.NT
LogConfig=SB16.LC1,SB16.LC2,SB16.LC3,SB16.LC4,SB16.LC5 
; a few log-config-sections omitted here for brevity
CopyFiles=MSSB16.CopyList
AddReg=WDM_SB16.AddReg</PRE>

<P>The following shows the sections referenced by the preceding <B>Needs</B> entry in the system-supplied <I>ks.inf</I> and <I>wdmaudio.inf</I> files specified in the <B>Include</B> entry. When an NT-based system's device installer and/or media class installer process this device's <I>install-section-name</I><B>.NT</B> section, these next two sections are also processed. </P>

<PRE>[KS.Registration]
; following AddReg= is actually a single line in the ks.inf file
AddReg=ProxyRegistration,CategoryRegistration,\
  TopologyNodeRegistration,PlugInRegistration,PinNameRegistration,\
  DeviceRegistration 
CopyFiles=KSProxy.Files,KSDriver.Files
 
[WDMAUDIO.Registration.NT]
AddReg=WDM.AddReg
CopyFiles=WDM.CopyFiles.Sys, WDM.CopyFiles.Drv
;
; INF-writer-defined add-registry and file-list sections
; referenced by preceding directives are omitted here for brevity
;</PRE>

<H4>See Also</H4>

<P><A HREF="inf-format_65bm.htm">INF <I>DDInstall</I>.<B>CoInstallers</B> Section</A> <BR>
<A HREF="inf-format_7dgy.htm">INF <I>DDInstall</I>.<B>FactDef</B> Section</A> <BR>
<A HREF="inf-format_5k6q.htm">INF <I>DDInstall</I>.<B>HW</B> Section</A> <BR>
<A HREF="inf-format_4eeq.htm">INF <I>DDInstall</I>.<B>Interfaces</B> Section</A> <BR>
<A HREF="inf-format_03qq.htm">INF <I>DDInstall</I>.<B>LogConfigOverride</B> Section</A> <BR>
<A HREF="inf-format_6nle.htm">INF <I>DDInstall</I>.<B>Services</B> Section</A> <BR>
<A HREF="inf-format_33ea.htm">INF <B>DefaultInstall</B> Section</A> <BR>
<A HREF="inf-format_0yr6.htm">INF <B>DefaultInstall</B>.<B>Services</B> Section</A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: INF%20DDInstall%20Section"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
