<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Registering a Device Interface Class</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Registering a Device Interface Class">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_iocreatedevice_kr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_creating_a_device_object_kg">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ioregisterdeviceinterface_kr">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_adddevice_kr">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ioopendeviceinterfaceregistrykey_kr">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_ioregisterdeviceinterface_kr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Device&nbsp;Installation:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_registering_a_device_interface_class_dg"></A>Registering a Device Interface Class</H2>

<P>There are three ways to register a device interface class: 

<UL>
	<LI>Kernel-mode components, such as most drivers, can call I/O Manager routines. This topic describes how to use these routines.</LI>

	<LI>User-mode setup applications call call <B>SetupDi</B><I>Xxx</I> functions. See <A HREF="setupapi_844n.htm#ddk_setupdi_device_interface_functions_dg">Device Interface Functions</A> for information about these functions.</LI>

	<LI>An INF file can contain <A HREF="inf-format_4eeq.htm">INF <I>DDInstall</I>.<B>Interfaces</B> sections</A>.</LI>
</UL>

<P>A WDM driver does not name its device objects. Instead, when the driver calls <A HREF="JavaScript:hhobj_1.Click()"><B>IoCreateDevice</B></A> to create a device object, it should specify a NULL string for the device name. For more information, see <A HREF="JavaScript:hhobj_2.Click()">Creating a Device Object</A>. </P>

<P>After creating the device object and attaching it to the device stack, one driver calls <A HREF="JavaScript:hhobj_3.Click()"><B>IoRegisterDeviceInterface</B></A> to register a device interface class and to create an instance of the interface. Typically, the function driver makes this call from its <A HREF="JavaScript:hhobj_4.Click()"><I>AddDevice</I></A> routine, but sometimes the filter driver registers the interface.</P>

<P>The routine returns a symbolic link name. A driver passes the link name when it enables or disables the device interface instance. Other system components cannot use a device interface instance until the driver has enabled it. See <A HREF="setup-cls_46lj.htm">Enabling and Disabling a Device Interface Instance</A> for details. </P>

<P>The driver also uses the symbolic link name to access the registry key, in which it can store information specific to the device interface. (See <A HREF="JavaScript:hhobj_5.Click()"><B>IoOpenDeviceInterfaceRegistryKey</B></A> for more information.) Applications use the link name to open the device.</P>

<P>A driver can call <A HREF="JavaScript:hhobj_6.Click()"><B>IoRegisterDeviceInterface</B></A> as many times as necessary to register instances of additional device interface classes. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Registering%20a%20Device%20Interface%20Class"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
