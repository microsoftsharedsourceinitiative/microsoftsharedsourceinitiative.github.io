<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KeyboardClassServiceCallback</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KeyboardClassServiceCallback">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Interactive&nbsp;Input&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_keyboardclassservicecallback_kr"></A>KeyboardClassServiceCallback</H1>

<P>The <B>KeyboardClassServiceCallback</B> routine is the class service callback routine that is provided by Kbdclass. A function driver calls the class service callback in its ISR dispatch completion routine. The class service callback transfers input data from the input data buffer of a device to the class data queue.</P>

<PRE class=syntax><B>VOID
  KeyboardClassServiceCallback</B> <B>(</B>
<B>    IN PDEVICE_OBJECT  </B><I>DeviceObject</I><B>,</B>
<B>    IN PKEYBOARD_INPUT_DATA  </B><I>InputDataStart</I><B>,</B>
<B>    IN PKEYBOARD_INPUT_DATA  </B><I>InputDataEnd</I><B>,</B>
<B>    IN OUT PULONG  </B><I>InputDataConsumed</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>DeviceObject</I></DT>

<DD>Pointer to the class device object.</DD>

<DT><I>InputDataStart</I></DT>

<DD>Pointer to the first keyboard input data packet in the input data buffer of the port device.</DD>

<DT><I>InputDataEnd</I></DT>

<DD>Pointer to the keyboard input data packet that immediately follows the last data packet in the input data buffer of the port device.</DD>

<DT><I>InputDataConsumed</I></DT>

<DD>Pointer to the number of keyboard input data packets that are transferred by the routine.
</DD>
</DL>

<H4>Return Value</H4>

<P>None</P>

<H4>Headers</H4>

<P>Declared in <I>kbdclass.h</I>. Include <I>kbdclass.h</I>.</P>

<H4>Comments</H4>

<P><B>KeyboardClassServiceCallback</B> transfers input data from the input buffer of the device to the class data queue. This routine is called by the ISR dispatch completion routine of the function driver.</P>

<P><B>KeyboardClassServiceCallback</B> can be supplemented by a filter service callback that is provided by an upper-level keyboard filter driver. A filter service callback filters the keyboard data that is transferred to the class data queue. For example, the filter service callback can delete, transform, or insert data. Kbfiltr, the sample filter driver in the Windows DDK, includes <A HREF="kfilref_11yq.htm"><B>KbFilter_ServiceCallback</B></A>, which is a template for a keyboard filter service callback.</P>

<P><B>KeyboardClassServiceCallback </B>runs in kernel mode at IRQL=DISPATCH_LEVEL.</P>

<H4>See Also</H4>

<P><A HREF="kfilref_11yq.htm"><B>KbFilter_ServiceCallback</B></A>, <A HREF="kref_04oi.htm">KEYBOARD_INPUT_DATA</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KeyboardClassServiceCallback"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
