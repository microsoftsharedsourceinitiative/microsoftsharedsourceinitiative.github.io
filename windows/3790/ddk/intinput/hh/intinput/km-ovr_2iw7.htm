<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Features of the Kbfiltr and Moufiltr Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Features of the Kbfiltr and Moufiltr Drivers">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Interactive&nbsp;Input&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_features_of_the_kbfiltr_and_moufiltr_drivers_kg"></A>Features of the Kbfiltr and Moufiltr Drivers</H1>

<P>This topic describes the features of the following sample filter drivers in the Microsoft® Windows® DDK:

<UL>
	<LI><I>Kbfiltr</I>, an optional upper-level filter driver for a Plug and Play PS/2-style keyboard device</LI>

	<LI><I>Moufiltr</I>, an optional upper-level filter driver for a Plug and Play PS/2-style mouse device</LI>
</UL>

<P>Kbfiltr and Moufiltr demonstrate how to filter I/O requests and add callback routines that modify the operation of the class service and the operation of I8042prt.</P>

<P class=note><B>Note</B>&nbsp;&nbsp;The design of the Terminal Server for Windows&nbsp;2000 and later does not support using the sample keyboard and mouse filter drivers to filter input from devices physically installed on a remote client. A filter driver installed on a Terminal Server can only be used to filter the input from the devices physically installed on a Terminal Server. This is a consequence of the way the <I>TermDD.sys</I> driver for the Terminal Server handles input from remote clients.</P>

<P>Kbfiltr and Moufiltr support Plug and Play and power management.</P>

<P>Kbfiltr provides the following callback routines:

<DL>
<DT><A HREF="kfilref_11yq.htm"><B>KbFilter_ServiceCallback</B></A></DT>

<DD>The keyboard filter service callback is added to the keyboard class service callback. The filter service callback can be configured to modify the keyboard input data that is saved in the class driver's data queue.</DD>

<DT><A HREF="kfilref_41ma.htm"><B>KbFilter_IsrHook</B></A></DT>

<DD>The keyboard filter ISR hook routine is a template for the <B>IsrRoutine</B> callback that I8042prt supports for a keyboard device. The callback can be configured to customize the operation of an ISR of a keyboard.</DD>

<DT><A HREF="kfilref_0fqq.htm"><B>KbFilter_InitializationRoutine</B></A></DT>

<DD>The keyboard filter initialization routine is a template for the <B>InitializationRoutine</B> callback that I8042prt supports for a keyboard device. This callback can be configured to customize the initialization of a keyboard device.
</DD>
</DL>

<P>Moufiltr provides the following callback routines:

<DL>
<DT><A HREF="mfilref_4hte.htm"><B>MouFilter_ServiceCallback</B></A></DT>

<DD>The mouse filter service callback is added to the mouse class service callback. The filter service callback can be configured to modify the keyboard input data that is saved in the class driver's data queue.</DD>

<DT><A HREF="mfilref_1k4y.htm"><B>MouFilter_IsrHook</B></A></DT>

<DD>The mouse filter ISR hook routine is a template for the <B>IsrRoutine</B> callback that I8042prt supports for a mouse device. The callback can be configured to customize the operation of that mouse's ISR.
</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Features%20of%20the%20Kbfiltr%20and%20Moufiltr%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
