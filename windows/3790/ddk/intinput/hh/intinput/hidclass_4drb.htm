<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Extracting Button Usages That Are Set to ON</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Interactive&nbsp;Input&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_extracting_button_usages_that_are_set_to_on_kg"></A>Extracting Button Usages That Are Set to ON</H4>

<P>To extract the <A HREF="hidclass_8nmv.htm">HID usages</A> of buttons that are set to ON (1), applications and drivers call one of the following HID support routines:

<DL>
<DT><A HREF="hidfunc_2nn6.htm"><B>HidP_GetButtons</B></A> (or <A HREF="hidfunc_00j6.htm"><B>HidP_GetUsages</B></A>)</DT>

<DD>Returns the <A HREF="hidclass_8nmv.htm#ddk_usage_id_kg">usage ID</A> of all buttons on a specified <A HREF="hidclass_8nmv.htm#ddk_usage_page_kg">usage page</A> that are set to ON.</DD>

<DT><A HREF="hidfunc_1702.htm"><B>HidP_GetButtonsEx</B></A> (or <A HREF="hidfunc_9nw2.htm"><B>HidP_GetUsagesEx</B></A>)</DT>

<DD>Returns the usage page and usage ID of all buttons that are set to ON.
</DD>
</DL>

<P>These routines return an array of all usage information for all buttons that are currently set to ON. Implicitly, buttons whose usage is not returned by these routines are set to OFF (zero). </P>

<P>To call these routines, applications and drivers must first allocate and zero-initialize the buffer used to return the array of button usages. An application or driver calls <A HREF="hidfunc_3d82.htm"><B>HidP_MaxUsageListLength</B></A> to determine the number of button usages in a specified usage page in the report. If the application or driver specifies a usage page of zero, the routine returns the number of all the button usages in the report.</P>

<P>The required buffer size, in bytes, is the following:

<UL>
	<LI>(For <B>HidP_GetButtons)</B> The value returned by <B>HidP_MaxUsageListLength</B> times <B>sizeof</B>(USAGE)</LI>

	<LI>(For <B>HidP_GetButtonsEx)</B> The value returned by <B>HidP_MaxUsageListLength</B> times <B>sizeof</B>(USAGE_AND_PAGE)</LI>
</UL>

<P>After an application or driver has used these routines to obtain information about which buttons are currently set to ON, it can determine the difference between the current state and the previous state of the buttons by calling one of the following <A HREF="hidfunc_4uuq.htm">HIDClass support routines</A>. These routines return the difference between two arrays of usage information:</P>

<P class=indent1><A HREF="hidfunc_20j6.htm"><B>HidP_UsageListDifference</B></A></P>

<P class=indent1><A HREF="hidfunc_9v76.htm"><B>HidP_UsageAndPageListDifference</B></A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Extracting%20Button%20Usages%20That%20Are%20Set%20to%20ON"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
