<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>VideoPortLockPages</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="VideoPortLockPages">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_videoportlockpages_gg"></A>VideoPortLockPages</H1>

<P>The <B>VideoPortLockPages</B> function is <B>obsolete</B> in Windows&nbsp;2000 and later. Use <A HREF="vpfncs_684n.htm"><B>VideoPortLockBuffer</B></A> in place of this function.</P>

<P><B>VideoPortLockPages</B> locks the specified virtual memory and possibly performs part or all of a DMA transfer.</P>

<PRE class=syntax><B>BOOLEAN 
  VideoPortLockPages(
</B>    <B>IN PVOID</B>  <I>HwDeviceExtension</I><B>,
</B>    <B>IN OUT PVIDEO_REQUEST_PACKET</B>  <I>pVrp</I><B>,
</B>    <B>IN OUT PEVENT</B>  <I>pUEvent</I><B>,
</B>    <B>IN PEVENT</B>  <I>pDisplayEvent</I><B>,
</B>    <B>IN DMA_FLAGS</B>  <I>DmaFlags</I><B>
</B>    <B>);</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>HwDeviceExtension</I></DT>

<DD>Pointer to the miniport driver's device extension.</DD>

<DT><I>pVrp</I></DT>

<DD>Pointer to a <A HREF="vstrcts_5gvb.htm">VIDEO_REQUEST_PACKET</A> structure. The miniport driver must have set <B>InputBuffer</B> and <B>InputBufferLength</B> to contain the virtual address and the size in bytes, respectively, of the memory to be locked for the transfer. This memory was allocated by the display driver and passed to the miniport driver through an IOCTL. The video port returns a pointer to and the size in bytes of the scatter/gather list in <B>OutputBuffer</B> and <B>OutputBufferLength</B>, respectively.</DD>

<DT><I>pUEvent</I></DT>

<DD>Pointer to a mapped user event that is to be set by the miniport driver, or NULL. The user event was mapped by the display driver and passed to the miniport driver through an IOCTL.</DD>

<DT><I>pDisplayEvent</I></DT>

<DD>Pointer to an event that is to be set by the miniport driver, or NULL. This event was created by and received from the display driver through an IOCTL.</DD>

<DT><I>DmaFlags</I></DT>

<DD>Specifies the action to be performed. This parameter must be one of the following values:

<TABLE>

<TR VALIGN="top">
<TH align=left width=45%>Value</TH>
<TH align=left width=55%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=45%><B>VideoPortDmaInitOnly</B></TD>
<TD width=55%><B>VideoPortLockPages</B> locks the requested memory.</TD>
</TR>

<TR VALIGN="top">
<TD width=45%><B>VideoPortKeepPagesLocked</B></TD>
<TD width=55%><B>VideoPortLockPages</B> takes no action. </TD>
</TR>

<TR VALIGN="top">
<TD width=45%><B>VideoPortUnlockAfterDma</B></TD>
<TD width=55%><B>VideoPortLockPages</B> takes no action. </TD>
</TR>
</TABLE><BR>


</DD>
</DL>

<H4>Return Value</H4>

<P><B>VideoPortLockPages</B> returns TRUE upon successful completion of the action requested of it. It returns FALSE if the <I>DmaFlags</I> parameter is not equal to <B>VideoPortDmaInitOnly</B>.</P>

<H4>Headers</H4>

<P>Declared in <I>video.h</I>. Include <I>video.h</I>.</P>

<H4>Comments</H4>

<P>See <A HREF="vmport_767b.htm">Video Port Driver Support for Bus-Master DMA</A> for information about packet-based and common-buffer DMA transfers.</P>

<P><B>VideoPortLockPages</B> cannot be called from an ISR or DPC.</P>

<H4>See Also</H4>

<P><A HREF="vpfncs_684n.htm"><B>VideoPortLockBuffer</B></A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: VideoPortLockPages"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
