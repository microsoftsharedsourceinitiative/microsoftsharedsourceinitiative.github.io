<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>EngQueryPalette</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="EngQueryPalette">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_engquerypalette_gg"></A>EngQueryPalette</H1>

<P>The <B>EngQueryPalette</B> function queries the specified palette for its attributes.</P>

<PRE class=syntax><B>ULONG
  EngQueryPalette(</B>
<B>    IN HPALETTE</B>  <I>hPal</I><B>,</B>
<B>    OUT ULONG</B>  <I>*piMode</I><B>,</B>
<B>    IN ULONG</B>  <I>cColors</I><B>,</B>
<B>    OUT ULONG</B>  <I>*pulColors</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>hPal</I></DT>

<DD>Handle to the palette to be queried.</DD>

<DT><I>piMode</I></DT>

<DD>Pointer to a location that receives the palette mode, as originally specified in <A HREF="gdifncs_4svb.htm"><B>EngCreatePalette</B></A>.</DD>

<DT><I>cColors</I></DT>

<DD>Specifies the number of entries in the buffer to which <I>pulColors</I> points. The return value depends on whether <I>cColors</I> is negative</DD>

<DT><I>pulColors</I></DT>

<DD>Pointer to a buffer that receives the palette color information. If <I>cColors</I> is zero, <I>pulColors</I> can be NULL.
</DD>
</DL>

<H4>Return Value</H4>

<P>When <I>cColors</I> is zero, <B>EngQueryPalette</B> returns the number of palette entries required in the buffer to which <I>pulColors</I> points in order to return the palette color information. When <I>cColors</I> is nonzero and <I>pulColors</I> is not NULL, <B>EngQueryPalette</B> returns the number of entries written in the buffer to which <I>pulColors</I> points. </P>

<H4>Headers</H4>

<P>Declared in <I>winddi.h</I>. Include <I>winddi.h</I>.</P>

<H4>Comments</H4>

<P>If the palette mode is PAL_BITFIELDS, PAL_RGB, or PAL_BGR and the buffer that <I>pulColors</I> points to is large enough, <I>pulColors</I> points to three ULONG masks that represent the red, green, and blue color masks of the palette.</P>

<P>If the palette mode is PAL_INDEXED and the buffer that <I>pulColors</I> points to is large enough, <I>pulColors</I> contains all of the 24-bit RGB values that represent the palette colors.</P>

<P>A driver must test for the presence of the GCAPS_PALMANAGED flag to determine whether the colors represent a fixed or a changeable palette.</P>

<P><B>EngQueryPalette</B> is intended for use by mirroring drivers that need to know the color format of the primary display. A mirroring driver typically calls this function in its <A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A> routine.</P>

<H4>See Also</H4>

<P><A HREF="gdifncs_4svb.htm"><B>EngCreatePalette</B></A>, <A HREF="ddifncs_0zzb.htm"><I>DrvEnablePDEV</I></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: EngQueryPalette"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
