<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DDRAWI_DIRECTDRAW_GBL</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DDRAWI_DIRECTDRAW_GBL">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_fourcc_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ddrawi_directdraw_gbl_gg"></A>DDRAWI_DIRECTDRAW_GBL</H1>

<P>The DDRAWI_DIRECTDRAW_GBL structure contains the global DirectDraw data that can be shared between object instances. </P>

<PRE class=syntax>typedef struct _DDRAWI_DIRECTDRAW_GBL {
  DWORD  dwRefCnt;
  DWORD  dwFlags;
  FLATPTR  fpPrimaryOrig;
  DDCORECAPS  ddCaps;
  DWORD  dwInternal1;
  DWORD  dwUnused1[9];
  LPDDHAL_CALLBACKS  lpDDCBtmp;
  LPDDRAWI_DDRAWSURFACE_INT  dsList;
  LPDDRAWI_DDRAWPALETTE_INT  palList;
  LPDDRAWI_DDRAWCLIPPER_INT  clipperList;
  LPDDRAWI_DIRECTDRAW_GBL  lp16DD;
  DWORD  dwMaxOverlays;
  DWORD  dwCurrOverlays;
  DWORD  dwMonitorFrequency;
  DDCORECAPS  ddHELCaps; 
  DWORD  dwUnused2[50];
  DDCOLORKEY  ddckCKDestOverlay;
  DDCOLORKEY  ddckCKSrcOverlay;
  VIDMEMINFO  vmiData;
  LPVOID  lpDriverHandle;
  LPDDRAWI_DIRECTDRAW_LCL  lpExclusiveOwner;
  DWORD  dwModeIndex;
  DWORD  dwModeIndexOrig;
  DWORD  dwNumFourCC;
  DWORD FAR  *lpdwFourCC;
  DWORD  dwNumModes;
  LPDDHALMODEINFO  lpModeInfo;
  PROCESS_LIST  plProcessList;
  DWORD  dwSurfaceLockCount;
  DWORD  dwAliasedLockCnt;
  ULONG_PTR  dwReserved3;
  ULONG_PTR  hDD;
  char  cObsolete[12];
  DWORD  dwReserved1;
  DWORD  dwReserved2;
  DBLNODE  dbnOverlayRoot;
  volatile LPWORD  lpwPDeviceFlags;
  DWORD  dwPDevice;
  DWORD  dwWin16LockCnt;
  DWORD  dwUnused3;
  DWORD  hInstance;
  DWORD  dwEvent16;
  DWORD  dwSaveNumModes;
  ULONG_PTR  lpD3DGlobalDriverData;
  ULONG_PTR  lpD3DHALCallbacks;
  DDCORECAPS  ddBothCaps;
  LPDDVIDEOPORTCAPS  lpDDVideoPortCaps;
  LPDDRAWI_DDVIDEOPORT_INT  dvpList;
  ULONG_PTR  lpD3DHALCallbacks2;
  RECT  rectDevice;
  DWORD  cMonitors;
  LPVOID  gpbmiSrc;
  LPVOID  gpbmiDest;
  LPHEAPALIASINFO  phaiHeapAliases;
  ULONG_PTR  hKernelHandle;
  ULONG_PTR  pfnNotifyProc;
  LPDDKERNELCAPS  lpDDKernelCaps;
  LPDDNONLOCALVIDMEMCAPS  lpddNLVCaps;
  LPDDNONLOCALVIDMEMCAPS  lpddNLVHELCaps;
  LPDDNONLOCALVIDMEMCAPS  lpddNLVBothCaps;
  ULONG_PTR  lpD3DExtendedCaps;
  DWORD  dwDOSBoxEvent;
  RECT  rectDesktop;
  char  cDriverName[MAX_DRIVER_NAME]; 
  ULONG_PTR   lpD3DHALCallbacks3;
  DWORD  dwNumZPixelFormats;
  LPDDPIXELFORMAT  lpZPixelFormats;
  LPDDRAWI_DDMOTIONCOMP_INT mcList;
  DWORD  hDDVxd;
  DDSCAPSEX  ddsCapsMore;
} DDRAWI_DIRECTDRAW_GBL;</PRE>

<H4>Members</H4>

<DL>
<DT><B>dwRefCnt</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwFlags</B></DT>

<DD>Contains the DirectDraw object's control flags.<B> </B>

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_ATTACHEDTODESKTOP</TD>
<TD width=52%>The device is attached to the desktop.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_CHANGINGMODE</TD>
<TD width=52%>The display is currently in a mode change.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_DDRAWDATANOTFETCHED</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_DISPLAYDRV</TD>
<TD width=52%>The driver is the display driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_EMULATIONINITIALIZED</TD>
<TD width=52%>Emulation has been initialized.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_EXPLICITMONITOR</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_EXTENDEDALIGNMENT</TD>
<TD width=52%>At least one heap has extended alignment. Ignore the alignment specified in <A HREF="ddstrcts_3uzr.htm">VIDEOMEMORYINFO</A>.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_FLIPPEDTOGDI</TD>
<TD width=52%>The driver has been flipped to show the GDI surface.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_FULLSCREEN</TD>
<TD width=52%>The driver is in full-screen mode.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_GDIDRV</TD>
<TD width=52%>The driver is a GDI driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_HASCKEYDESTOVERLAY</TD>
<TD width=52%>The driver has CKDestOverlay.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_HASCKEYSRCOVERLAY</TD>
<TD width=52%>The driver has CKSrcOverlay.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_HASGDIPALETTE</TD>
<TD width=52%>A GDI palette exists on the primary surface.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_HASGDIPALETTE_EXCLUSIVE</TD>
<TD width=52%>The palette is in exclusive mode.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_MODECHANGED</TD>
<TD width=52%>The display mode has been changed. </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_MODEX</TD>
<TD width=52%>The driver is using Mode X.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_MODEXILLEGAL</TD>
<TD width=52%>ModeX is not supported by this hardware.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_NEEDSWIN16FORVRAMLOCK</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_NOEMULATION</TD>
<TD width=52%>There is no emulation.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_NOHARDWARE</TD>
<TD width=52%>There is no hardware associated with this driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_PALETTEINIT</TD>
<TD width=52%>The GDI palette has been initialized.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_PDEVICEVRAMBITCLEARED</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_SECONDARYDRIVERLOADED</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_STANDARDVGA</TD>
<TD width=52%>The device is using standard VGA mode (DDRAWI_MODEX is set).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_TESTINGMODES</TD>
<TD width=52%>This flag is used by DirectDraw and should not be filled in by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_UMODELOADED</TD>
<TD width=52%>A user-mode driver DLL is loaded.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWI_VIRTUALDESKTOP</TD>
<TD width=52%>The driver is really a multimonitor virtual desktop.</TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>fpPrimaryOrig</B></DT>

<DD>Points to the memory location of the primary surface display memory.</DD>

<DT><B>ddCaps</B></DT>

<DD>Specifies a DDCORECAPS structure (defined in the DirectDraw SDK documentation) that contains the driver capabilities.</DD>

<DT><B>dwInternal1</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwUnused1</B></DT>

<DD>Currently unused.</DD>

<DT><B>lpDDCBtmp</B></DT>

<DD>Points to a DDHAL_CALLBACKS structure that contains pointers to HAL callbacks.<B> </B></DD>

<DT><B>dsList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>palList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>clipperList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>lp16DD</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwMaxOverlays</B></DT>

<DD>Specifies the maximum number of overlays.</DD>

<DT><B>dwCurrOverlays</B></DT>

<DD>Specifies the current number of overlays.</DD>

<DT><B>dwMonitorFrequency</B></DT>

<DD>Specifies the monitor frequency in the current mode.</DD>

<DT><B>ddHELCaps</B></DT>

<DD>Specifies a DDCORECAPS structure (defined in the DirectDraw SDK documentation) that contains the HEL capabilities. </DD>

<DT><B>dwUnused2</B></DT>

<DD>Currently unused.</DD>

<DT><B>ddckCKDestOverlay</B></DT>

<DD>Specifies a DDCOLORKEY structure used to hold the color key for destination overlay use.<B> </B></DD>

<DT><B>ddckCKSrcOverlay</B></DT>

<DD>Specifies a DDCOLORKEY structure (defined in the DirectDraw SDK documentation) used to hold the color key for source overlay use.<B> </B></DD>

<DT><B>vmiData</B></DT>

<DD>Specifies a <A HREF="ddstrcts_3uzr.htm">VIDEOMEMORYINFO</A> structure that contains information about display memory.</DD>

<DT><B>lpDriverHandle</B></DT>

<DD>Handle for use by the display driver to call functions in <I>ddraw16.dll</I>.</DD>

<DT><B>lpExclusiveOwner</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwModeIndex</B></DT>

<DD>Contains the current mode index.</DD>

<DT><B>dwModeIndexOrig</B></DT>

<DD>Contains the original mode index.</DD>

<DT><B>dwNumFourCC</B></DT>

<DD>Specifies the number of <A HREF="JavaScript:hhobj_1.Click()">FOURCC</A> codes supported.</DD>

<DT><B>lpdwFourCC</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwNumModes</B></DT>

<DD>Specifies the number of modes supported.</DD>

<DT><B>lpModeInfo</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>plProcessList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwSurfaceLockCount</B></DT>

<DD>Specifies the total number of outstanding locks.</DD>

<DT><B>dwAliasedLockCnt</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwReserved3</B></DT>

<DD>Reserved for use by the display driver.</DD>

<DT><B>hDD</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>cObsolete</B></DT>

<DD>Specifies an obsolete member and should not be used.</DD>

<DT><B>dwReserved1</B></DT>

<DD>Reserved for use by the display driver.</DD>

<DT><B>dwReserved2</B></DT>

<DD>Reserved for use by the display driver.</DD>

<DT><B>dbnOverlayRoot</B></DT>

<DD>Specifies the root node of the doubly-linked list of overlay z orders.</DD>

<DT><B>lpwPDeviceFlags</B></DT>

<DD>Points to a memory location containing a set of driver physical device flags.<B> </B></DD>

<DT><B>dwPDevice</B></DT>

<DD>Points to the driver's physical device. This member is a 16:16 pointer.<B> </B></DD>

<DT><B>dwWin16LockCnt</B></DT>

<DD>Specifies the count of Win16Lock holds.<B> </B></DD>

<DT><B>dwUnused3</B></DT>

<DD>Currently unused.</DD>

<DT><B>hInstance</B></DT>

<DD>Handle to the driver instance.</DD>

<DT><B>dwEvent16</B></DT>

<DD>Specifies an event used by the 16-bit side of the driver to tell the 32-bit side that a mode change has occurred.</DD>

<DT><B>dwSaveNumModes</B></DT>

<DD>Specifies the number of modes supported. </DD>

<DT><B>lpD3DGlobalDriverData</B></DT>

<DD>Points to global Direct3D data.<B> </B></DD>

<DT><B>lpD3DHALCallbacks</B></DT>

<DD>Points to the start of a block of memory containing a list of Direct3D HAL callbacks.<B> </B></DD>

<DT><B>ddBothCaps</B></DT>

<DD>Specifies a DDCORECAPS structure (defined in the DirectDraw SDK documentation) containing the logical AND of the driver and the HEL capabilities.</DD>

<DT><B>lpDDVideoPortCaps</B></DT>

<DD>Points to a <A HREF="ddstrcts_2v1j.htm">DDVIDEOPORTCAPS</A> structure containing the information returned by the HAL. This is an array of these structures if more than one video port is in existence.</DD>

<DT><B>dvpList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>lpD3DHALCallbacks2</B></DT>

<DD>Points to a block of memory containing post-DirectX 3.0 HAL callbacks.<B> </B></DD>

<DT><B>rectDevice</B></DT>

<DD>Specifies a rectangle, in desktop coordinates, for the device.<B> </B></DD>

<DT><B>cMonitors</B></DT>

<DD>Specifies the number of monitors in the system.<B> </B></DD>

<DT><B>gpbmiSrc</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>gpbmiDest</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>phaiHeapAliases</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>hKernelHandle</B></DT>

<DD>This member is used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>pfnNotifyProc</B></DT>

<DD>Points to a notification process registered with the VDD. This member is used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>lpDDKernelCaps</B></DT>

<DD>Points to a <A HREF="ddstrcts_38kn.htm">DDKERNELCAPS</A> structure that contains the capabilities of the kernel mode interface.</DD>

<DT><B>lpddNLVCaps</B></DT>

<DD>Points to a <A HREF="ddstrcts_8kdj.htm">DD_NONLOCALVIDMEMCAPS</A> structure that contains the hardware non-local to local display memory capabilities.</DD>

<DT><B>lpddNLVHELCaps</B></DT>

<DD>Points to a <A HREF="ddstrcts_8kdj.htm">DD_NONLOCALVIDMEMCAPS</A> structure that contains the emulation layer non-local to local display memory capabilities.</DD>

<DT><B>lpddNLVBothCaps</B></DT>

<DD>Points to a <A HREF="ddstrcts_8kdj.htm">DD_NONLOCALVIDMEMCAPS</A> structure that contains the logical AND of hardware and emulation non-local to local display memory capabilities.</DD>

<DT><B>lpD3DExtendedCaps</B></DT>

<DD>Points to the start of a block of memory containing a set of extended capabilities for Direct3D.</DD>

<DT><B>dwDOSBoxEvent</B></DT>

<DD>Specifies an event set when returned from a DOS box.</DD>

<DT><B>rectDesktop</B></DT>

<DD>Specifies the rectangle in which the desktop lies.</DD>

<DT><B>cDriverName</B></DT>

<DD>Specifies the display name.</DD>

<DT><B>lpD3DHALCallbacks3</B></DT>

<DD>Points to the start of a block of memory containing DirectX 6.0 callbacks.</DD>

<DT><B>dwNumZPixelFormats</B></DT>

<DD>Specifies the number of z-buffer and stencil pixel formats.</DD>

<DT><B>lpZPixelFormats</B></DT>

<DD>Points to an array of z-buffer pixel formats.</DD>

<DT><B>mcList</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>hDDVxd</B></DT>

<DD>Handle to <I>ddraw.vxd</I>.</DD>

<DT><B>ddsCapsMore</B></DT>

<DD>Specifies a DDSCAPSEX structure as queried by the GUID_DDMoreSurfaceCaps GUID.
</DD>
</DL>

<H4>Headers</H4>

<P>Defined in <I>ddrawi.h</I>. Include <I>ddrawi.h</I>.</P>

<H4>Comments</H4>

<P>The DDRAWI_DIRECTDRAW_GBL structure is similar in purpose to the Windows&nbsp;2000 and later structure, <A HREF="ddstrcts_32nb.htm">DD_DIRECTDRAW_GLOBAL</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DDRAWI_DIRECTDRAW_GBL"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
