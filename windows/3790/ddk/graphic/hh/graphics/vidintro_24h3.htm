<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Monitor INF File Sections</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Monitor INF File Sections">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_file_sections_and_directives_dr">
</OBJECT>
<OBJECT ID="hhobj_2" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_sourcedisksfiles_section_dr">
</OBJECT>
<OBJECT ID="hhobj_3" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_edid_gg_gly">
</OBJECT>
<OBJECT ID="hhobj_4" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_models_section_dr">
</OBJECT>
<OBJECT ID="hhobj_5" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_delreg_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_6" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_addreg_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_7" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_copyfiles_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_8" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_ddinstall_section_dr">
</OBJECT>
<OBJECT ID="hhobj_9" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_addreg_directive_dr">
</OBJECT>
<OBJECT ID="hhobj_10" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_edid_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_monitor_inf_file_sections_gg"></A>Monitor INF File Sections</H2>

<P>Monitors must be installed in NT-based operating systems using an INF file. The Windows DDK provides a sample monitor INF file, <I>monsamp.inf</I>, that you should use as a template to generate an INF file for your monitor. You cannot use the <I>geninf.exe</I> tool described in <A HREF="vidintro_2fjb.htm">Creating Graphics INF Files</A> to generate a monitor INF.</P>

<P>The rest of this topic comments on some of the sections in <I>monsamp.inf</I> that are of specific interest to monitor INF writers. For more general information about INF files, see <A HREF="JavaScript:hhobj_1.Click()">INF File Sections and Directives</A>.</P>

<H4>SourceDisksFiles Section</H4>

<P>Files that must be copied during monitor installation should be placed in the <B>[SourceDisksFiles]</B> section. The following example identifies an .<I>icm</I> file that is on distribution disk 1. </P>

<PRE>[SourceDisksFiles]
profile1.icm=1</PRE>

<P>For more general information, see <A HREF="JavaScript:hhobj_2.Click()">INF SourceDisksFiles Section</A>. See <A HREF="dpyddi_6f53.htm">Monitor Profiles</A> for more information about color management and profiles.</P>

<H4>Models Section</H4>

<P>Information about each model that is supported by a given manufacturer should be placed in the <I>Models</I> section. The following example identifies two models manufactured by ACME:</P>

<PRE>[ACME]
%ACME-1234%=ACME-1234.Install, Monitor\MON12AB
%ACME-5678%=ACME-5678.Install, Monitor\MON34CD</PRE>

<P>Each model is represented by a single line. Each line contains three elements:

<UL>
	<LI>Model name — for example, <B>%ACME-1234%</B> is a token that represents the actual model name (which would appear in the <B>Strings</B> section). </LI>

	<LI>Link to a subsequent <I>DDInstall</I> section — for example, <B>ACME-1234.Install</B> is a link to the subsequent <B>[ACME-1234.Install]</B> section.</LI>

	<LI>Hardware identification — for example, the expression <B>Monitor\MON12AB</B> combines the device class (Monitor) and the device identification (MON12AB) as it appears in the device's <A HREF="JavaScript:hhobj_3.Click()">EDID</A>.</LI>
</UL>

<P>For more general information, see <A HREF="JavaScript:hhobj_4.Click()">INF Models Section</A>.</P>

<H4>DDInstall Section</H4>

<P>The <I>DDInstall</I> section provides information to the driver about the operations to be performed when it installs the specified device. Each line in this section provides a link or links to different INF writer-defined sections that appear later in the INF file. The following example shows the <I>DDInstall</I> section for the ACME-1234 model:</P>

<PRE>[ACME-1234.Install]
DelReg=DEL_CURRENT_REG
AddReg=ACME-1234.AddReg, 1280, DPMS
CopyFiles=ACME-1234.CopyFiles</PRE>

<UL>
	<LI><A HREF="JavaScript:hhobj_5.Click()"><B>DelReg</B></A> directive—provides a link to the <B>DEL_CURRENT_REG</B> section, which details the registry keys to be deleted.</LI>

	<LI><A HREF="JavaScript:hhobj_6.Click()"><B>AddReg</B></A> directive—provides links to three sections in which registry keys to be added are detailed. These sections are <B>ACME-1234.AddReg</B>, <B>1280</B>, and <B>DPMS</B>.</LI>

	<LI><A HREF="JavaScript:hhobj_7.Click()"><B>CopyFiles</B></A> directive—provides a link to the <B>ACME-1234.CopyFiles</B> section, which specifies the files to be copied from the distribution disk or disks.</LI>
</UL>

<P>For more general information, see <A HREF="JavaScript:hhobj_8.Click()">INF <I>DDInstall</I> Section</A>.</P>

<H4>INF Writer-Defined Sections</H4>

<P>An INF writer-defined section can have any name, provided it is unique within the INF file. These sections are pointed to by directives in other sections. The following bullet items discuss some of the INF writer-defined sections from <I>monsamp.inf</I>:

<UL>
	<LI><B>DEL_CURRENT_REG</B> section — identifies four registry keys whose values will be deleted: <B>MODES</B>, <B>MaxResolution</B>, <B>DPMS</B>, and <B>ICMProfile</B>. These keys will be updated appropriately with new values in subsequent sections.
<PRE>[DEL_CURRENT_REG]
HKR,MODES
HKR,,MaxResolution
HKR,,DPMS
HKR,,ICMProfile</PRE>
</LI>

	<LI><B>1280</B> section — updates the <B>MaxResolution</B> registry key to the string value shown. 
<PRE>[1280]
HKR,,MaxResolution,,"1280, 1024"</PRE>
</LI>

	<LI><B>DPMS</B> section — updates the <B>DPMS</B> registry key to 1 (TRUE). For a monitor that does not support power management, the following line should instead set the <B>DPMS</B> key value to 0 (FALSE).
<PRE>[DPMS]
HKR,,DPMS,,1</PRE>
</LI>

	<LI><A HREF="JavaScript:hhobj_9.Click()"><B>AddReg</B></A> section — the first line of the following sets the <B>"MODES\1280,1024"</B> subkey to the string value shown. The same line also identifies a value name for this subkey, <B>Mode1</B>. Note that this value establishes new <B>Mode1</B> timing values which override those listed in the <A HREF="JavaScript:hhobj_10.Click()">EDID</A>. The first pair of numbers in the string following the <B>Mode1</B> subkey specifies the range of horizontal synchronization frequencies, in KHz. The next pair of numbers in this string specifies the range of vertical synchronization frequencies, in Hz. In the second line, the <B>PreferredMode</B> registry key is set to the values shown in the accompanying string. The values in the string are used to set both the horizontal and the vertical resolution, in pixels, and the screen refresh rate, in hertz (Hz), for the preferred screen mode. The third line sets the <B>ICMProfile</B> key to the string value <B>"profile1.icm"</B>.
<PRE>[ACME-1234.AddReg]
HKR,"MODES\1280,1024",Mode1,,"27.0-106.0,55.0-160.0,+,+"
HKR,,PreferredMode,,"1024,768,70"
HKR,,ICMProfile,0,"profile1.icm"</PRE>

<P>For a monitor that meets the sRGB specification, which is preferred, no monitor profile is needed. 
</LI>
</UL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Monitor%20INF%20File%20Sections"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
