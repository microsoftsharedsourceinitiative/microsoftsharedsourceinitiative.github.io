<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Reporting Capabilities for Shader 3 Support</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT></HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H4><A NAME="ddk_reporting_capabilities_for_shader_3_support_gg"></A>Reporting Capabilities for Shader 3 Support</H4>

<P>The DirectX 9.0 version driver for a display device that supports pixel or vertex shader version 3.0 and later must indicate that it supports the following capabilities:</P>

<H4>Vertex shader 3.0 and later</H4>

<P>If a device supports vertex shader 3.0 and later, its driver must set the members of the D3DCAPS9 structure to the following values:

<DL>
<DT><B>VS20Caps</B></DT>

<DD>Set the following members of the D3DVSHADERCAPS2_0 structure:

<P><B>DynamicFlowControlDepth</B> set to 24. 


<P><B>NumTemps</B> set to 32. 


<P><B>StaticFlowControlDepth</B> set to 4.


<P><B>Caps</B> set to the D3DVS20CAPS_PREDICATION bit to indicate that predication is supported. 

</DD>

<DT><B>GuardBandLeft, GuardBandTop, GuardBandRight, GuardBandBottom</B></DT>

<DD>Set each to 8K. </DD>

<DT><B>VertexShaderVersion</B></DT>

<DD>Set to 3.0. </DD>

<DT><B>MaxVertexShaderConst</B></DT>

<DD>Set to 256. </DD>

<DT><B>MaxVertexShader30InstructionSlots</B></DT>

<DD>Set to 512. </DD>

<DT><B>RasterCaps</B></DT>

<DD>Set the D3DPRASTERCAPS_FOGVERTEX bit for fog support.</DD>

<DT><B>VertexTextureFilterCaps</B></DT>

<DD>Set the following filter capabilities:

<P>D3DPTFILTERCAPS_MINFPOINT 


<P>D3DPTFILTERCAPS_MAGFPOINT 

</DD>

<DT><B>DevCaps2</B></DT>

<DD>Set the D3DDEVCAPS2_VERTEXELEMENTSCANSHARESTREAMOFFSET bit to indicate that vertex elements in a vertex declaration can share the same stream offset.</DD>

<DT><B>DeclTypes</B></DT>

<DD>Set the following bits to indicate the vertex data types supported by the device: 

<P>D3DDTCAPS_UBYTE4 


<P>D3DDTCAPS_UBYTE4N 


<P>D3DDTCAPS_SHORT2N 


<P>D3DDTCAPS_SHORT4N 


<P>D3DDTCAPS_FLOAT16 


<P>D3DDTCAPS_FLOAT16 

</DD>
</DL>

<H4>Pixel shader 3.0 and later</H4>

<P>If a device supports pixel shader 3.0 and later, its driver must set the members of the D3DCAPS9 structure to the following values:

<DL>
<DT><B>PS20Caps</B></DT>

<DD>Set the following members of the D3DPSHADERCAPS2_0 structure:

<P><B>DynamicFlowControlDepth</B> set to 24. 


<P><B>NumTemps</B> set to 32. 


<P><B>StaticFlowControlDepth</B> set to 4.


<P><B>NumInstructionSlots</B> set to 512. 


<P><B>Caps</B> set to the following bits:


<P class=indent1>D3DPS20CAPS_ARBITRARYSWIZZLE to indicate that arbitrary swizzles is supported. </P>


<P class=indent1>D3DPS20CAPS_GRADIENTINSTRUCTIONS to indicate that gradient instructions is supported. </P>


<P class=indent1>D3DPS20CAPS_PREDICATION to indicate that predication  is supported.</P>


<P class=indent1>D3DPS20CAPS_NODEPENDENTREADLIMIT to indicate no dependent read limit. </P>


<P class=indent1>D3DPS20CAPS_NOTEXINSTRUCTIONLIMIT to indicate no limit on the mix of texture and math instructions. </P>

</DD>

<DT><B>MaxTextureWidth, MaxTextureHeight</B></DT>

<DD>Set each to 4K. </DD>

<DT><B>MaxTextureRepeat</B></DT>

<DD>Set to 8K. </DD>

<DT><B>MaxAnisotropy</B></DT>

<DD>Set to 16.</DD>

<DT><B>PixelShaderVersion</B></DT>

<DD>Set to 3.0. </DD>

<DT><B>MaxPixelShader30InstructionSlots</B></DT>

<DD>Set to 512. </DD>

<DT><B>PrimitiveMiscCaps</B></DT>

<DD>Set the following bits:

<P>D3DPMISCCAPS_MASKZ


<P>All the cull modes: D3DPMISCCAPS_CULLNONE, D3DPMISCCAPS_CULLCW, D3DPMISCCAPS_CULLCCW. 


<P>D3DPMISCCAPS_COLORWRITEENABLE


<P>D3DPMISCCAPS_CLIPPLANESCALEDPOINTS


<P>D3DPMISCCAPS_CLIPTLVERTS


<P>D3DPMISCCAPS_BLENDOP


<P>D3DPMISCCAPS_FOGINFVF

</DD>

<DT><B>RasterCaps</B></DT>

<DD>Set the following bits:

<P>D3DPRASTERCAPS_MIPMAPLODBIAS 


<P>D3DPRASTERCAPS_ANISOTROPY 


<P>D3DPRASTERCAPS_COLORPERSPECTIVE 


<P>D3DPRASTERCAPS_SCISSORTEST 


<P>Full depth support: D3DPRASTERCAPS_SLOPESCALEDEPTHBIAS, D3DPRASTERCAPS_DEPTHBIAS 

</DD>

<DT><B>ZCmpCaps</B></DT>

<DD>Set the following bits for a full set of comparisons for stencil, depth and alpha test: 

<P>D3DPCMPCAPS_NEVER 


<P>D3DPCMPCAPS_LESS 


<P>D3DPCMPCAPS_EQUAL 


<P>D3DPCMPCAPS_LESSEQUAL 


<P>D3DPCMPCAPS_GREATER 


<P>D3DPCMPCAPS_NOTEQUAL 


<P>D3DPCMPCAPS_GREATEREQUAL 


<P>D3DPCMPCAPS_ALWAYS: 

</DD>

<DT><B>SrcBlendCaps, DestBlendCaps</B></DT>

<DD>Set the following source and destination blending modes except where noted: 

<P>D3DPBLENDCAPS_ZERO 


<P>D3DPBLENDCAPS_ONE 


<P>D3DPBLENDCAPS_SRCCOLOR 


<P>D3DPBLENDCAPS_INVSRCCOLOR 


<P>D3DPBLENDCAPS_SRCALPHA 


<P>D3DPBLENDCAPS_INVSRCALPHA 


<P>D3DPBLENDCAPS_DESTALPHA 


<P>D3DPBLENDCAPS_INVDESTALPHA 


<P>D3DPBLENDCAPS_DESTCOLOR 


<P>D3DPBLENDCAPS_INVDESTCOLOR 


<P>D3DPBLENDCAPS_SRCALPHASAT (not set for <B>DestBlendCaps</B>)


<P>D3DPBLENDCAPS_BOTHSRCALPHA (not set for <B>DestBlendCaps</B>)


<P>D3DPBLENDCAPS_BOTHINVSRCALPHA (not set for <B>DestBlendCaps</B>)


<P>D3DPBLENDCAPS_BLENDFACTOR 

</DD>

<DT><B>TextureCaps</B></DT>

<DD>Set the following texture capabilities: 

<P>D3DPTEXTURECAPS_PERSPECTIVE 


<P>D3DPTEXTURECAPS_TEXREPEATNOTSCALEDBYSIZE 


<P>D3DPTEXTURECAPS_PROJECTED 


<P>D3DPTEXTURECAPS_CUBEMAP 


<P>D3DPTEXTURECAPS_VOLUMEMAP 


<P>D3DPTEXTURECAPS_MIPMAP 


<P>D3DPTEXTURECAPS_MIPVOLUMEMAP 


<P>D3DPTEXTURECAPS_MIPCUBEMAP 

</DD>

<DT><B>TextureFilterCaps, VolumeTextureFilterCaps, CubeTextureFilterCaps</B></DT>

<DD>Set the following filter capabilities for each except where noted: 

<P>D3DPTFILTERCAPS_MINFPOINT 


<P>D3DPTFILTERCAPS_MINFLINEAR 


<P>D3DPTFILTERCAPS_MINFANISOTROPIC (not required for <B>VolumeTextureFilterCaps</B> and <B>CubeTextureFilterCaps</B>)


<P>D3DPTFILTERCAPS_MIPFPOINT 


<P>D3DPTFILTERCAPS_MIPFLINEAR 


<P>D3DPTFILTERCAPS_MAGFPOINT 


<P>D3DPTFILTERCAPS_MAGFLINEAR 

</DD>

<DT><B>TextureAddressCaps</B></DT>

<DD>Set the following texture address modes to indicate support at vertex and pixel stages: 

<P>D3DPTADDRESSCAPS_WRAP 


<P>D3DPTADDRESSCAPS_MIRROR 


<P>D3DPTADDRESSCAPS_CLAMP 


<P>D3DPTADDRESSCAPS_BORDER 


<P>D3DPTADDRESSCAPS_INDEPENDENTUV 


<P>D3DPTADDRESSCAPS_MIRRORONCE 

</DD>

<DT><B>StencilCaps</B></DT>

<DD>Set the following bits to indicate support of stencil operations: 

<P>D3DSTENCILCAPS_KEEP 


<P>D3DSTENCILCAPS_ZERO 


<P>D3DSTENCILCAPS_REPLACE 


<P>D3DSTENCILCAPS_INCRSAT 


<P>D3DSTENCILCAPS_DECRSAT 


<P>D3DSTENCILCAPS_INVERT 


<P>D3DSTENCILCAPS_INCR 


<P>D3DSTENCILCAPS_DECR 


<P>D3DSTENCILCAPS_TWOSIDED 

</DD>

<DT><B>FVFCaps</B></DT>

<DD>Set the D3DFVFCAPS_PSIZE capability to indicate that the device supports point size per vertex.</DD>

<DT><B>TextureCaps</B></DT>

<DD>Indicate that the device supports either full support or conditional nonpow-of-2 texture support. For more information, see <A HREF="d3d_8fc7.htm">Reporting Capabilities for Shader 2 Support</A>.

<P>Must <B>not</B> set the D3DPTEXTURECAPS_SQUAREONLY bit. That is, the device cannot be limited to square textures only.

</DD>
</DL>

<P>If the device supports <A HREF="d3d_7wvb.htm">rendering to multiple targets simultaneously</A> (that is, the <B>NumSimultaneousRTs</B> member is set to greater than 1), its driver must set the members of the D3DCAPS9 structure to the following values:

<DL>
<DT><B>PrimitiveMiscCaps</B></DT>

<DD>Set the following bits: 

<P>D3DPMISCCAPS_INDEPENDENTWRITEMASKS 


<P>D3DPMISCCAPS_MRTINDEPENDENTBITDEPTHS 


<P>D3DPMISCCAPS_MRTPOSTPIXELSHADERBLENDING 

</DD>

<DT><B>MaxUserClipPlanes</B></DT>

<DD>If vertex shader 3.0 and later is supported, set to 6. </DD>

<DT><B>DeclTypes</B></DT>

<DD>Set the following bits to indicate the vertex formats that the device supports if vertex shader 3.0 and later is supported: 

<P>D3DDTCAPS_SHORT2N 


<P>D3DDTCAPS_SHORT4N 


<P>D3DDTCAPS_UDEC3 


<P>D3DDTCAPS_DEC3N 

</DD>
</DL>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Reporting%20Capabilities%20for%20Shader%203%20Support"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
