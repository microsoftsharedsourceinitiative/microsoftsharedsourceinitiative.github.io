<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Bob Deinterlacing</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Bob Deinterlacing">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_bob_deinterlacing_gg"></A>Bob Deinterlacing</H2>

<P>All graphics adapters that can perform bit block transfers can do simple bob-style deinterlacing. When a surface contains two interleaved fields, the memory layout of the surface can be reinterpreted to isolate each field. This is achieved by doubling the original surface’s stride and dividing the height of the surface in half. After the two fields are isolated in this way, they can be deinterlaced by stretching the individual fields to the correct frame height. </P>

<P>Additional horizontal stretching or shrinking can also be applied to correct the aspect ratio for the pixels of the video image. A graphics device driver can determine its ability to do this to the DirectX Video Mixing Renderer (VMR). The individual field’s height can be stretched vertically by line replication or, preferably, by a filtered stretch. If the line replication method is used, the resulting image has a blocky appearance. If a filtered stretch is used, the resulting image may have a slightly fuzzy appearance.</P>

<P>The following figure shows a video surface that contains two interleaved fields.</P>

<P><IMG SRC="images/deinterlace.gif" ALT="" BORDER=0></P>

<P><B>Memory Layout of a Surface Containing Two Interleaved Fields</B></P>

<P>If the video sample contains two interleaved fields as specified by the <B>DXVA_SampleFieldInterleavedEvenFirst</B> or <B>DXVA_SampleFieldInterleavedOddFirst</B> members of the <A HREF="dxvaref_5uav.htm">DXVA_SampleFormat</A> enumeration, the start time of the second field is calculated using the <B>rtStart</B> and <B>rtEnd</B> members of the <A HREF="dxvaref_1rc8.htm">DXVA_VideoSample</A> structure as follows:</P>

<P>(<B>rtStart</B> + <B>rtEnd</B>) / 2</P>

<P>The end time of the first field is the start time of the second field.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Bob%20Deinterlacing"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
