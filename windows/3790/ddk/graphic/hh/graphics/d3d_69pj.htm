<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Operation Code Handling</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Operation Code Handling">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_opcode_handling_gg"></A>Operation Code Handling</H2>

<P>A display driver handles requests to render graphics primitives and processes state changes in its <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A> function. The driver receives these requests as <A HREF="d3denum_0jon.htm">D3DHAL_DP2OPERATION</A> operation codes. The following topics describe how the driver processes operation codes and how its performance can be improved during such processing:</P>

<P class=indent1><A HREF="d3d_7fs7.htm">Command Stream</A></P>

<P class=indent1><A HREF="d3d_6bzb.htm">Improving Performance of Operation Handling</A></P>

<P>In order to support the Microsoft® DirectX® 7.0 and later Direct3D driver model, driver writers need to make their drivers respond to a number of new operation codes in their implementation of <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A>. Some of these operation codes replace callback functions, and others provide new functionality. The most important new operation codes are summarized in the following table, beginning with those that replace callbacks. </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=50%>Operation Code</TH>
<TH align=left width=50%>Condition/Description</TH>
</TR>

<TR VALIGN="top">
<TD width=50%><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_setrendertarget_gg">D3DDP2OP_SETRENDERTARGET</A></TD>
<TD width=50%><B>Always required.</B> Maps a new rendering target surface and depth buffer in the current context. Replaces <I>D3dSetRenderTarget</I>.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_clear_gg">D3DDP2OP_CLEAR</A></TD>
<TD width=50%><B>Always required.</B> Used to clear the context's render target, Z-buffer. Replaces <I>D3dClear2</I>. Also used to clear hardware stencil buffers, and depth buffers that cannot be cleared properly by a depth fill bit-block transfer. </TD>
</TR>

<TR VALIGN="top">
<TD width=50%><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_setpalette_gg">D3DDP2OP_SETPALETTE</A></TD>
<TD width=50%>Used to map an association between a palette handle and a surface handle, and specify the characteristics of the palette. Only needed for drivers that support paletted textures; otherwise this should be no operation (NOP).</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_updatepalette_gg">D3DDP2OP_UPDATEPALETTE</A></TD>
<TD width=50%>Used to make alterations to a texture palette, for drivers that support paletted textures. Otherwise, this should be a NOP.</TD>
</TR>

<TR VALIGN="top">
<TD width=50%><A HREF="d3denum_0jon.htm#ddk_d3ddp2op_texblt_gg">D3DDP2OP_TEXBLT</A></TD>
<TD width=50%>Specifies a blt operation from a source texture to a destination texture. </TD>
</TR>
</TABLE><BR>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Operation%20Code%20Handling"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
