<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>EngAssociateSurface</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="EngAssociateSurface">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_pdev_gg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_engassociatesurface_gg"></A>EngAssociateSurface</H1>

<P>The <B>EngAssociateSurface</B> function marks a given surface as belonging to a specified device.</P>

<PRE class=syntax><B>BOOL
  EngAssociateSurface(</B>
<B>    IN HSURF</B>  <I>hsurf</I><B>,</B>
<B>    IN HDEV</B>  <I>hdev</I><B>,</B>
<B>    IN FLONG</B>  <I>flHooks</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>hsurf</I></DT>

<DD>Handle to the surface or bitmap to be associated with <I>hdev</I>. This handle was returned by <A HREF="gdifncs_9pgn.htm"><B>EngCreateBitmap</B></A> or <A HREF="gdifncs_7a1z.htm"><B>EngCreateDeviceBitmap</B></A>.</DD>

<DT><I>hdev</I></DT>

<DD>Handle to the device with which the surface is to be associated. This is the GDI-created handle that was passed to the driver's <A HREF="ddifncs_13xj.htm"><I>DrvCompletePDEV</I></A> function.</DD>

<DT><I>flHooks</I></DT>

<DD>Specifies the functions that the driver can hook from GDI. The driver must implement the corresponding function for every bit that it sets in <I>flHooks</I>. This member is a bit-wise OR of any of the following values:  

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Function to be hooked</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_ALPHABLEND</TD>
<TD width=52%><A HREF="ddifncs_40br.htm"><I>DrvAlphaBlend</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_BITBLT</TD>
<TD width=52%><A HREF="ddifncs_8z3b.htm"><I>DrvBitBlt</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_COPYBITS</TD>
<TD width=52%><A HREF="ddifncs_27mv.htm"><I>DrvCopyBits</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_FILLPATH</TD>
<TD width=52%><A HREF="ddifncs_3x2f.htm"><I>DrvFillPath</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_GRADIENTFILL</TD>
<TD width=52%><A HREF="ddifncs_6bvr.htm"><I>DrvGradientFill</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_LINETO</TD>
<TD width=52%><A HREF="ddifncs_7sx3.htm"><I>DrvLineTo</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_MOVEPANNING</TD>
<TD width=52%>Obsolete</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_PAINT</TD>
<TD width=52%>Obsolete</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_PLGBLT</TD>
<TD width=52%><A HREF="ddifncs_79yf.htm"><I>DrvPlgBlt</I></A> </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_STRETCHBLT</TD>
<TD width=52%><A HREF="ddifncs_3ew7.htm"><I>DrvStretchBlt</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_STRETCHBLTROP</TD>
<TD width=52%><A HREF="ddifncs_0z3b.htm"><I>DrvStretchBltROP</I></A> </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_STROKEANDFILLPATH</TD>
<TD width=52%><A HREF="ddifncs_750n.htm"><I>DrvStrokeAndFillPath</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_STROKEPATH</TD>
<TD width=52%><A HREF="ddifncs_81ev.htm"><I>DrvStrokePath</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_SYNCHRONIZE</TD>
<TD width=52%><A HREF="ddifncs_49if.htm"><I>DrvSynchronize</I></A> or <A HREF="ddifncs_4aav.htm"><I>DrvSynchronizeSurface</I></A> (either or both)</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_SYNCHRONIZEACCESS</TD>
<TD width=52%>Obsolete</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_TEXTOUT</TD>
<TD width=52%><A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A></TD>
</TR>

<TR VALIGN="top">
<TD width=48%>HOOK_TRANSPARENTBLT</TD>
<TD width=52%><A HREF="ddifncs_0bl3.htm"><I>DrvTransparentBlt</I></A></TD>
</TR>
</TABLE><BR>


</DD>
</DL>

<H4>Return Value</H4>

<P>The return value is TRUE if the function is successful. Otherwise, the driver should send the information to the GDI function it is implementing, and return GDI's return value.</P>

<H4>Headers</H4>

<P>Declared in <I>winddi.h</I>. Include <I>winddi.h</I>.</P>

<H4>Comments</H4>

<P><B>EngAssociateSurface</B> can be used by printer drivers to implement "rules" or device fonts, or by display drivers to make use of special blt hardware.</P>

<P>If the surface identified by <I>hsurf</I> is a standard format bitmap, the driver can specify which output functions to the surface it will handle by setting bits in <I>flHooks</I>. Setting bits in <I>flHooks</I> causes particular output functions to be sent to the driver instead. This is referred to as hooking. If the driver does not hook a call, GDI will automatically manage the operation when a standard format bitmap is being drawn on. </P>

<P>When the surface is associated, it assumes the default palette and style steps of the <A HREF="JavaScript:hhobj_1.Click()">PDEV</A>. A surface must be associated before it is returned by <A HREF="ddifncs_871j.htm"><I>DrvEnableSurface</I></A>.</P>

<P>By default, when a driver supports device bitmaps by implementing <A HREF="ddifncs_5x5z.htm"><I>DrvCreateDeviceBitmap</I></A>/<A HREF="ddifncs_2lk7.htm"><I>DrvDeleteDeviceBitmap</I></A>, GDI does not automatically synchronize drawing calls to the device bitmap and to the primary surface. For example, GDI can call the driver's <A HREF="ddifncs_8z3b.htm"><I>DrvBitBlt</I></A> function to draw to a device bitmap, while another thread is drawing to the primary surface by executing the driver's implementation of <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A>. The driver can even be called to draw to multiple device bitmaps at the same time.</P>

<P>After <A HREF="ddifncs_871j.htm"><I>DrvEnableSurface</I></A> returns a handle to a primary surface, do not call <B>EngAssociateSurface</B> on that handle. Doing so can cause a bug check in certain circumstances. For more information, see <A HREF="http://go.microsoft.com/fwlink/?LinkID=3100&ID=330248">Microsoft Knowledge Base article 330248</A>.</P>

<H4>See Also</H4>

<P><A HREF="ddifncs_8z3b.htm"><I>DrvBitBlt</I></A>, <A HREF="ddifncs_13xj.htm"><I>DrvCompletePDEV</I></A>, <A HREF="ddifncs_27mv.htm"><I>DrvCopyBits</I></A>, <A HREF="ddifncs_5x5z.htm"><I>DrvCreateDeviceBitmap</I></A>, <A HREF="ddifncs_2lk7.htm"><I>DrvDeleteDeviceBitmap</I></A>, <A HREF="ddifncs_871j.htm"><I>DrvEnableSurface</I></A>, <A HREF="ddifncs_3x2f.htm"><I>DrvFillPath</I></A>, <A HREF="ddifncs_7sx3.htm"><I>DrvLineTo</I></A>, <A HREF="ddifncs_3ew7.htm"><I>DrvStretchBlt</I></A>, <A HREF="ddifncs_750n.htm"><I>DrvStrokeAndFillPath</I></A>, <A HREF="ddifncs_81ev.htm"><I>DrvStrokePath</I></A>, <A HREF="ddifncs_49if.htm"><I>DrvSynchronize</I></A>, <A HREF="ddifncs_4aav.htm"><I>DrvSynchronizeSurface</I></A>, <A HREF="ddifncs_4kkn.htm"><I>DrvTextOut</I></A>, <A HREF="gdifncs_13c8.htm"><B>EngModifySurface</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: EngAssociateSurface"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
