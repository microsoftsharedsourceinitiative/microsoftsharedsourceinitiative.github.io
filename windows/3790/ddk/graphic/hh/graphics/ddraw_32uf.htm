<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Ensuring Correct Version Numbers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Ensuring Correct Version Numbers">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_ensuring_correct_version_numbers_gg"></A>Ensuring Correct Version Numbers</H2>

<P>To ensure that the end user is able to use a display driver on a specific operating system and with a specific version of DirectX, an appropriate version number must be applied to that driver. With DirectX, version numbers have become very important for device drivers. If a device driver is shipped with the wrong version number or a version number that uses the wrong format, the end user will encounter difficulties when any DirectX application is installed.</P>

<P><B>Note</B>&nbsp;&nbsp;Setup for Windows&nbsp;98/Me now supports the <B>DriverVer</B> directive in INF files. This directive provides a way to add version information for the driver package, including the driver file and the INF file itself, to the INF file. By using and updating the <B>DriverVer</B> directive, driver packages can be safely and definitively replaced by future versions of the same package. For more information on this directive, see INF DriverVer Directive in the Device Installation section of the Windows DDK documentation.</P>

<P>The following table gives the range of version numbers appropriate for IHV- or OEM-supplied drivers for compatibility with various versions of DirectX. </P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=49%>Target System</TH>
<TH align=left width=25%>Version Number<BR>
From:</TH>
<TH align=left width=26%>Version Number<BR>
Up Through:</TH>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 98-only drivers (DirectX5)</TD>
<TD width=25%>4.05.00.0000</TD>
<TD width=26%>4.05.00.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>DirectX 1.0-compatible drivers </TD>
<TD width=25%>4.02.00.0095</TD>
<TD width=26%>4.03.00.1096</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>DirectX 2.0-compatible drivers </TD>
<TD width=25%>4.03.00.1096</TD>
<TD width=26%>4.03.00.2030</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>DirectX 3.0-compatible drivers </TD>
<TD width=25%>4.03.00.2030</TD>
<TD width=26%>4.04.00.0000</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>DirectX 5.0-compatible drivers</TD>
<TD width=25%>4.10.01.0000</TD>
<TD width=26%>4.10.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>DirectX 6.0-compatible drivers</TD>
<TD width=25%>4.11.01.0000</TD>
<TD width=26%>4.11.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 98/Me DirectX 7.0-compatible drivers</TD>
<TD width=25%>4.12.01.0000</TD>
<TD width=26%>4.12.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 2000 DirectX 7.0-compatible drivers</TD>
<TD width=25%>5.12.01.0000</TD>
<TD width=26%>5.12.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows XP and later DirectX 7.0-compatible drivers</TD>
<TD width=25%>6.12.01.0000*</TD>
<TD width=26%>6.12.01.9999*</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 98/Me DirectX 8.0-compatible drivers</TD>
<TD width=25%>4.13.01.0000</TD>
<TD width=26%>4.13.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 2000 DirectX 8.0-compatible drivers</TD>
<TD width=25%>5.13.01.0000</TD>
<TD width=26%>5.13.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows XP and later DirectX 8.0-compatible drivers</TD>
<TD width=25%>6.13.01.0000*</TD>
<TD width=26%>6.13.01.9999*</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 98/Me DirectX 9.0-compatible drivers</TD>
<TD width=25%>4.14.01.0000</TD>
<TD width=26%>4.14.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows 2000 DirectX 9.0-compatible drivers</TD>
<TD width=25%>5.14.01.0000</TD>
<TD width=26%>5.14.01.9999</TD>
</TR>

<TR VALIGN="top">
<TD width=49%>Windows XP and later DirectX 9.0-compatible drivers</TD>
<TD width=25%>6.14.01.0000*</TD>
<TD width=26%>6.14.01.9999*</TD>
</TR>
</TABLE><BR>

<P class=note><B>*Note</B>&nbsp;&nbsp;Although the preceding table indicates that the version number for a Windows XP and later DirectX-compatible driver must be from 6.<I>nn</I>.01.0000 to 6.<I>nn</I>.01.9999, the version number can also be from 6.<I>nn</I>.10.0000 to 6.<I>nn</I>.10.9999 to support legacy WHQL manual test specifications.</P>

<P>For device drivers that do not support DirectX, the version number must be greater than 4.00.00.0095 and less than 4.02.00.0095. For example, if a display device driver is a Windows 3.1 display driver or a Windows 95-only display driver, a version number of 4.01.00.0000 would be correct.</P>

<P>Conversely, a version number of 4.03.00.0000 for this driver would be incorrect. Device drivers that support DirectX on Windows 95 only should have a version number equal to or greater than 4.02.00.0095 and less than 4.04.00.0000.</P>

<H4>Storing Internal Version Numbers</H4>

<P>In addition to the format that Microsoft requires for the version number, many vendors have expressed the desire to store an internal version number for product support and testing purposes. Every DirectX driver has one version number that is stored in duplicate: one binary version stored as two DWORDs, and one string version. The binary version cannot be modified.</P>

<P>The string version, however, can be appended in the following way:

<OL>
	<LI>The vendor creates a version number, as described earlier in this article. This version number is used "as is" in the binary version number. </LI>

	<LI>The vendor uses this version number as the basis for the string version number. If desired, a vendor-specific version string can be appended to the existing version number to form the complete string version number. The vendor-specific string and the version number are separated by a "-" (hyphen character). </LI>
</OL>

<P>For example, if "4.03.00.2100" is the version number for a DirectX-compliant display driver, and the vendor uses the "xx.xx.xx" number format internally, then the combined string version number in the driver is "4.03.00.2100-xx.xx.xx". </P>

<P>When the customer checks the version number of the driver (by right-clicking on the file in Windows Explorer, choosing <B>Properties</B>, and then clicking the <B>Version</B> tab), Windows displays the string version. The vendor's product support should be able to identify the vendor-specific portion of the version number if it exists and take appropriate action.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Ensuring%20Correct%20Version%20Numbers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
