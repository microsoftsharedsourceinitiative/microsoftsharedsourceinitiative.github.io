<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Hardware Transform and Lighting</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Hardware Transform and Lighting">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_hardware_transform_and_lighting_gg"></A>Hardware Transform and Lighting</H2>

<P>Hardware acceleration of geometry operations, such as lighting and transformation, has been enabled with modifications to the <A HREF="d3dfncs_5usn.htm"><I>D3dDrawPrimitives2</I></A> DDI for the latest Direct X release. At the API level, devices that support vertex operations in hardware are enumerated separately from those that do rasterization only.</P>

<P>The existing caps structures have been extended to indicate features that may be present on a hardware-accelerated transform device. For example, the number of supported light sources is set with the <B>dwNumLights</B> member of the <A HREF="d3dstrct_8vtz.htm">D3DLIGHTINGCAPS</A> structure that is reported with the <A HREF="d3dstrct_278n.htm">D3DDEVICEDESC_V1</A> structure.  </P>

<P>Other flags are listed in the following table:</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=46%>Flag</TH>
<TH align=left width=54%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DDEVCAPS_CANBLTSYSTONONLOCAL</TD>
<TD width=54%>The device supports a texture blt from system memory to nonlocal video memory.</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DDEVCAPS_DRAWPRIMITIVES2EX</TD>
<TD width=54%>The driver is DirectX 7.0-compliant by supporting extended <I>D3dDrawPrimitives2</I> capabilities.</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DDEVCAPS_HWRASTERIZATION</TD>
<TD width=54%>The device has hardware acceleration for rasterization.</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DDEVCAPS_HWTRANSFORMANDLIGHT</TD>
<TD width=54%>The device can support both hardware transform and lighting in hardware.</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DDEVCAPS_SEPARATETEXTUREMEMORIES</TD>
<TD width=54%>The device is texturing from separate memory pools.</TD>
</TR>

<TR VALIGN="top">
<TD width=46%>D3DTRANSFORMCAPS_CLIP</TD>
<TD width=54%>The hardware can clip while transforming.</TD>
</TR>
</TABLE><BR>

<P>Because the feature sets of hardware geometry accelerators may differ (such as the number of light sources supported), the caps structures indicate which subset of geometry operations this device performs. Zero is a valid value for the number of light sources supported, indicating that the hardware does transformations only.  </P>

<P>Only vertices that include a vertex normal are properly lit; for vertices that do not contain a normal, a dot product of 0 is employed in all lighting calculations. </P>

<P>All the key state and data structures used by the software implementation of the geometry pipeline are made available at the DDI level. Some display cards only implement lighting in the hardware, and do transformation and clipping on the host processor. </P>

<P>The following render state types pertain only to devices that accelerate transform and lighting:</P>

<PRE>D3DRENDERSTATE_AMBIENT
D3DRENDERSTATE_AMBIENTMATERIALSOURCE
D3DRENDERSTATE_CLIPPING
D3DRENDERSTATE_CLIPPLANEENABLE
D3DRENDERSTATE_COLORVERTEX
D3DRENDERSTATE_DIFFUSEMATERIALSOURCE
D3DRENDERSTATE_EMISSIVEMATERIALSOURCE
D3DRENDERSTATE_EXTENTS
D3DRENDERSTATE_FOGVERTEXMODE
D3DRENDERSTATE_LIGHTING
D3DRENDERSTATE_LOCALVIEWER
D3DRENDERSTATE_NORMALIZENORMALS
D3DRENDERSTATE_SPECULARMATERIALSOURCE
D3DRENDERSTATE_VERTEXBLEND</PRE>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Hardware%20Transform%20and%20Lighting"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
