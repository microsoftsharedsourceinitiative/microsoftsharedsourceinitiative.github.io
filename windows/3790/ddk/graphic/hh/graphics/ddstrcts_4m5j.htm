<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DDRAWI_DIRECTDRAW_LCL</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DDRAWI_DIRECTDRAW_LCL">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ddrawi_directdraw_lcl_gg"></A>DDRAWI_DIRECTDRAW_LCL</H1>

<P>The DDRAWI_DIRECTDRAW_LCL structure contains local data for each individual DirectDraw object. </P>

<PRE class=syntax>typedef struct _DDRAWI_DIRECTDRAW_LCL {
  DWORD  lpDDMore;
  LPDDRAWI_DIRECTDRAW_GBL  lpGbl;
  DWORD  dwUnused0;
  DWORD  dwLocalFlags;
  DWORD  dwLocalRefCnt;
  DWORD  dwProcessId;
  IUnknown FAR  *pUnkOuter;
  DWORD  dwObsolete1;
  ULONG_PTR  hWnd;
  ULONG_PTR  hDC;
  DWORD  dwErrorMode;
  LPDDRAWI_DDRAWSURFACE_INT  lpPrimary;
  LPDDRAWI_DDRAWSURFACE_INT  lpCB;
  DWORD   dwPreferredMode;
  HINSTANCE  hD3DInstance;
  IUnknown FAR  *pD3DIUnknown;
  LPDDHAL_CALLBACKS  lpDDCB;
  ULONG_PTR  hDDVxd;
  DWORD   dwAppHackFlags;
  ULONG_PTR    hFocusWnd;
  DWORD   dwHotTracking;
  DWORD   dwIMEState;
  ULONG_PTR  hWndPopup;
  ULONG_PTR  hDD;
  ULONG_PTR  hGammaCalibrator;
  LPDDGAMMACALIBRATORPROC  lpGammaCalibrator; 
} DDRAWI_DIRECTDRAW_LCL;</PRE>

<H4>Members</H4>

<DL>
<DT><B>lpDDMore</B></DT>

<DD>Points to additional local data.</DD>

<DT><B>lpGbl</B></DT>

<DD>Points to a DDRAWI_DIRECTDRAW_GBL structure that contains the DirectDraw global data.</DD>

<DT><B>dwUnused0</B></DT>

<DD>Currently unused.</DD>

<DT><B>dwLocalFlags</B></DT>

<DD>Specifies a set of local flags.<B> </B>

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Flag</TH>
<TH align=left width=52%>Meaning</TH>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_ACTIVENO</TD>
<TD width=52%>Specifies that this DirectDraw object is not active.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_ACTIVEYES</TD>
<TD width=52%>Specifies that this DirectDraw object is active.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_ALLOWMODEX</TD>
<TD width=52%>Mode X is supported.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_ATTEMPTEDD3DCONTEXT</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver. Indicates that this DirectDraw object attempted to create a Direct3D context.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_CREATEDWINDOW</TD>
<TD width=52%>The application indicates that it created a window.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_CURSORCLIPPED</TD>
<TD width=52%>The application indicates that it clipped a cursor.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_DIRECTDRAW7</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver. Indicates that this object is a IDirectDraw7 object.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_DIRECTDRAW8</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver. Indicates that this object is a IDirectDraw8 object.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_DIRTYDC</TD>
<TD width=52%>Set on <B>ChangeDisplaySettings</B>, cleared when device DC is reinitialized.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_DISABLEINACTIVATE</TD>
<TD width=52%>Indicates that this DirectDraw object disabled the inactivate request.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_DX8DRIVER</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver. Indicates that the driver can handle lightweight surfaces.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_EXPLICITMONITOR</TD>
<TD width=52%>The device was chosen explicitly; that is, not by a call to <B>DirectDrawCreate</B>(NULL).</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_FPUPRESERVE</TD>
<TD width=52%>Direct3D needs to switch to single precision/exceptions disabled each time.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_FPUSETUP</TD>
<TD width=52%>Direct3D does <I>not</I> need to switch to single precision/exceptions disabled each time.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_HASEXCLUSIVEMODE</TD>
<TD width=52%>The application indicates that it is in exclusive mode, that is, it is responsible for operations such as DirectDraw mode changes and primary surface flipping.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_HOOKEDHWND</TD>
<TD width=52%>The application indicates that it obtained a handle to a window.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_ISFULLSCREEN</TD>
<TD width=52%>The application indicates that it is in fullscreen mode.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_MODEHASBEENCHANGED</TD>
<TD width=52%>The application indicates that its mode was changed. </TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_MULTITHREADED</TD>
<TD width=52%>The application indicates that it must be multithreaded.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_POWEREDDOWN</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver. Indicates that the screen saver is powered down.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_SETCOOPCALLED</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver.</TD>
</TR>

<TR VALIGN="top">
<TD width=48%>DDRAWILCL_V1SCLBEHAVIOUR</TD>
<TD width=52%>This flag is for the use of DirectDraw only, and should not be set by the driver.</TD>
</TR>
</TABLE><BR>

</DD>

<DT><B>dwLocalRefCnt</B></DT>

<DD>Specifies the local reference count.<B> </B></DD>

<DT><B>dwProcessId</B></DT>

<DD>Specifies the ID of the owning process.<B> </B></DD>

<DT><B>pUnkOuter</B></DT>

<DD>Points to the outer <B>IUnknown</B>.<B> </B></DD>

<DT><B>dwObsolete1</B></DT>

<DD>Obsolete and should not be used.<B> </B></DD>

<DT><B>hWnd</B></DT>

<DD>Handle to a window for this DirectDraw object.<B> </B></DD>

<DT><B>hDC</B></DT>

<DD>Handle to the device context.<B> </B></DD>

<DT><B>dwErrorMode</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>lpPrimary</B></DT>

<DD>Points to the primary surface. </DD>

<DT><B>lpCB</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>dwPreferredMode</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>hD3DInstance</B></DT>

<DD>Handle to Direct3D's DLL.<B> </B></DD>

<DT><B>pD3DIUnknown</B></DT>

<DD>Points to Direct3D's aggregated <B>IUnknown</B>.<B> </B></DD>

<DT><B>lpDDCB</B></DT>

<DD>Points to a DDHAL_CALLBACKS structure containing pointers to HAL callbacks.<B> </B></DD>

<DT><B>hDDVxd</B></DT>

<DD>Handle to <I>ddraw.vxd</I>.<B> </B></DD>

<DT><B>dwAppHackFlags</B></DT>

<DD>Specifies a set of application compatibilty flags.<B> </B></DD>

<DT><B>hFocusWnd</B></DT>

<DD>Handle to the focus window set by <B>SetCoopLevel</B>.</DD>

<DT><B>dwHotTracking</B></DT>

<DD>Specifies the reactive menu (and other user interface elements) setting cached while the application was fullscreen.</DD>

<DT><B>dwIMEState</B></DT>

<DD>Specifies the IME toolbar setting.</DD>

<DT><B>hWndPopup</B></DT>

<DD>Handle to a popup window.</DD>

<DT><B>hDD</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>hGammaCalibrator</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.</DD>

<DT><B>lpGammaCalibrator</B></DT>

<DD>Used by DirectDraw and should not be filled in by the driver.
</DD>
</DL>

<H4>Headers</H4>

<P>Defined in <I>ddrawi.h</I>. Include <I>ddrawi.h</I>.</P>

<H4>Comments</H4>

<P>The DDRAWI_DIRECTDRAW_LCL structure is similar in purpose to the Windows&nbsp;2000 and later structure, <A HREF="ddstrcts_55lz.htm">DD_DIRECTDRAW_LOCAL</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DDRAWI_DIRECTDRAW_LCL"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
