<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Debugging in Spooler Components</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Debugging in Spooler Components">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_supp_support_enhancements">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Display&nbsp;and&nbsp;Print&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_debugging_in_spooler_components_gg"></A>Debugging in Spooler Components</H2>

<P>This section provides information about how you can enable debug messages in spooler components. The first part of this section lists the debug variables used in spooler components. You can use these debug variables to cause debug messages originating in spooler components to be displayed. (Note that you must be working with checked builds of these components.) </P>

<P>The second part of this section details the steps need to display trace messages in a spooler component.</P>

<H4>Spooler Component Debug Variables</H4>

<P>The following table lists several of the modules making up the spooler components, together with the debug variable(s) of each module.</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=48%>Module</TH>
<TH align=left width=52%>Debug Variable</TH>
</TR>

<TR VALIGN="top">
<TD width=48%><I>bidispl.dll</I></TD>
<TD width=52%><B>PjlmonDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>localspl.dll </I></TD>
<TD width=52%><B>LocalsplDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>localspl.dll </I></TD>
<TD width=52%><B>LocalmonDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>splwow64.dll</I></TD>
<TD width=52%><B>Ld64In32Debug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>spoolss.dll </I></TD>
<TD width=52%><B>RouterDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>spoolsv.dll </I></TD>
<TD width=52%><B>SplsrvDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>usbmon.dll</I></TD>
<TD width=52%><B>DynaMonDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>win32spl.dll </I></TD>
<TD width=52%><B>Win32splDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>winspool.drv</I></TD>
<TD width=52%><B>ClientDebug</B></TD>
</TR>

<TR VALIGN="top">
<TD width=48%><I>winspool.drv</I></TD>
<TD width=52%><B>SplPerfDebug</B></TD>
</TR>
</TABLE><BR>

<P>The modules <I>localspl.dll</I>, <I>spoolss.dll</I>, <I>spoolsv.exe</I>, and <I>win32spl.dll</I> share data structures that require all of them to be matched; that is, all must be checked, or all must be free. </P>

<P>The two debug variables in <I>localspl.dll</I>, <B>LocalsplDebug</B> and <B>LocalmonDebug</B>, control debug messages for the local spooler and local monitor, respectively. The local monitor and local spooler were separate modules in Windows&nbsp;NT 4.0, but for performance reasons, were combined into a single module in Windows&nbsp;2000.</P>

<P>The <B>SplPerfDebug</B> debug variable in <I>winspool.drv</I> controls debug messages related to heap performance monitoring exposed by the Performance Monitor (Perfmon). For more information, see <A HREF="JavaScript:hhobj_1.Click()">Support Enhancements</A>. The <B>ClientDebug</B> debug variable controls debug messages in the client-side spooler APIs, such as <B>OpenPrinter</B> (described in the Platform SDK documentation) and others. </P>

<H4>Displaying Trace Messages in a Spooler Component</H4>

<P>The following procedure lists the steps necessary for you to be able to see trace messages in checked builds of <I>winspool.drv</I>. The steps for displaying trace messages are similar for other spooler components. </P>

<P class=proch><B><IMG SRC="../images/wedge.gif" ALT="" BORDER=0>To display trace messages in a spooler component</B>

<OL>
	<LI>Attach a debugger.</LI>

	<LI>Break into the process you want to debug.</LI>

	<LI>Find the debug variable, <B>winspool!ClientDebug</B>.</LI>

	<LI>Set the DBG_TRACE bit (0x0008) in the low WORD of the <B>winspool!ClientDebug</B> variable.</LI>

	<LI>Click Go.</LI>
</OL>

<P></P>

<P><B></B></P>

<P></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Debugging%20in%20Spooler%20Components"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
