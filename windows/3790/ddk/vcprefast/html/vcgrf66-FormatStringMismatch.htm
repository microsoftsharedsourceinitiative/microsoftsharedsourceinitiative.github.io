<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>66 - Format string mismatch.</TITLE>
<META Name="InChm" Content="True">
<META name="rtfFileName" content="prefast.rtf">
<!--CSS_START-->
<SCRIPT SRC="../scripts/dtuelink.js"></SCRIPT>
<!--CSS_END--></HEAD>
<body topmargin=0 id="bodyID" class = "dtBODY">

<!--NONSCROLLING BANNER START-->
<div id="nsbanner">
<div id="bannerrow1">
<TABLE CLASS="bannerparthead" CELLSPACING=0>
<TR ID="hdr">
<TD CLASS="runninghead" nowrap>PREfast&nbsp;User&nbsp;Guide</TD>
<TD CLASS="product" nowrap>&nbsp;</TD>
</TR>
</TABLE>
</div>
<div id="TitleRow">
<H1 class="dtH1"><A NAME="vcgrf66-formatstringmismatch"></A>66 - Format string mismatch.</H1>

<H1 class="dtH1">Additional Information: Non-pointer passed as parameter <I>&lt;number&gt;</I> when pointer is required in call to <I>&lt;function&gt;.</I></H1>
</div></div>
<!--NONSCROLLING BANNER END-->
<DIV id="nstext" valign="bottom">
<div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><!-- Topic Status -->
<P>This warning indicates that the format string specifies that a pointer is required (that is, a <B>%p</B> or <B>%n</B> specification for <B>printf</B> or a <B>%d</B> for <B>scanf</B>) but a non-pointer is being passed. This defect is likely to result in a crash or corruption of some form. It is also likely to cause a 64-bit porting problem.</P>

<P>This message is often reported because an integer has been used for a <B>%p</B> format instead of a pointer. Using an integer in this instance is not portable to 64-bit machines.</P>

<P>This warning is often reported because of subtle errors contained in format strings such as extra embedded spaces or unescaped percent signs. If the warning appears to be incorrect, you should double-check your format string.</P>

<P>PREfast interprets format strings based on the implementations in the C run-time library that is included with Visual C++&nbsp;.NET 2002.</P>

<H4 class="dtH4">Example</H4>

<P><B>Defective Source</B></P>

<PRE class="code">char buff[5];

sprintf(buff,
        "%s %n %d",
        "a",
        1,
        1);</PRE>

<P><B>Corrected Source</B></P>

<PRE class="code">char buff[5];
int  n;

sprintf(buff,
        "%s %n %d",
        "a",
        &amp;n,
        1);</PRE>
<!--Footer Start-->
<DIV CLASS="footer">
<br>
<HR><!--Copyright-->
<p><MSHelp:link keywords="vxmscCopyright" TABINDEX="0">&copy; Microsoft Corporation. All rights reserved.</MSHelp:link></p></div> <!--Closes the footer div-->
</div> <!--closes the topic content div-->
<!--FOOTER_END-->
</BODY>
</HTML>
