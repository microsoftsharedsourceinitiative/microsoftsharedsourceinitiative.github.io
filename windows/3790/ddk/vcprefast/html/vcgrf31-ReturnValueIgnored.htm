<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>31 - Return value ignored.</TITLE>
<META Name="InChm" Content="True">
<META name="rtfFileName" content="prefast.rtf">
<!--CSS_START-->
<SCRIPT SRC="../scripts/dtuelink.js"></SCRIPT>
<!--CSS_END--></HEAD>
<body topmargin=0 id="bodyID" class = "dtBODY">

<!--NONSCROLLING BANNER START-->
<div id="nsbanner">
<div id="bannerrow1">
<TABLE CLASS="bannerparthead" CELLSPACING=0>
<TR ID="hdr">
<TD CLASS="runninghead" nowrap>PREfast&nbsp;User&nbsp;Guide</TD>
<TD CLASS="product" nowrap>&nbsp;</TD>
</TR>
</TABLE>
</div>
<div id="TitleRow">
<H1 class="dtH1"><A NAME="vcgrf31-returnvalueignored"></A>31 - Return value ignored.</H1>

<H1 class="dtH1">Additional Information: <I>&lt;function&gt; </I>could fail.</H1>
</div></div>
<!--NONSCROLLING BANNER END-->
<DIV id="nstext" valign="bottom">
<div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><!-- Topic Status -->
<P>This warning indicates that the calling function is not checking the return value of a function call that signals failure through its return value. Depending on which function is being called, this defect can lead to seemingly random program misbehavior, including crashes and data corruptions in error conditions or low-resource situations.</P>

<P>In general, it is not safe to assume that a call to functions such as <B>ReadFile</B> (that is, one that accesses disk or network resources) or <B>CoCreateInstance</B> (that is, one that can require memory or other resources to be allocated) will always succeed. The caller should always check the return value and handle error cases appropriately.</P>

<P>If you are intentionally ignoring the return value (for example, in a situation where you are taking advantage of a COM function's guarantee that it will initialize its outputs to <B>NULL</B> if it fails), you can silence PREfast by explicitly casting the return value to <B>void</B>.</P>

<H4 class="dtH4">Example</H4>

<P><B>Defective Source</B></P>

<PRE class="code">ImpersonateNamedPipeClient(Pipe);</PRE>

<P><B>Corrected Source</B></P>

<PRE class="code">if (!ImpersonateNamedPipeClient(Pipe)) {
    // Dangerous to continue
    return;
}</PRE>
<!--Footer Start-->
<DIV CLASS="footer">
<br>
<HR><!--Copyright-->
<p><MSHelp:link keywords="vxmscCopyright" TABINDEX="0">&copy; Microsoft Corporation. All rights reserved.</MSHelp:link></p></div> <!--Closes the footer div-->
</div> <!--closes the topic content div-->
<!--FOOTER_END-->
</BODY>
</HTML>
