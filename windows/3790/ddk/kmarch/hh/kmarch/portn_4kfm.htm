<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>PoSetSystemState</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="PoSetSystemState">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_posetsystemstate_dr"></A>PoSetSystemState</H1>

<P>Drivers call the <B>PoSetSystemState</B> routine to indicate that the system is active. </P>

<PRE class=syntax><B>VOID
</B>  <B>PoSetSystemState(</B>
    <B>IN EXECUTION_STATE </B> <I>Flags</I>
    <B>);</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>Flags</I></DT>

<DD>Indicates the system activity, as specified by a bitwise OR of one or more of the following values:

<DL>
<DT>ES_SYSTEM_REQUIRED</DT>

<DD>The system is not idle, regardless of apparent load.</DD>

<DT>ES_DISPLAY_REQUIRED</DT>

<DD>Use of the display is required.</DD>

<DT>ES_USER_PRESENT</DT>

<DD>A user is present.
</DD>
</DL>
</DD>
</DL>

<H4>Return Value</H4>

<P>None</P>

<H4>Headers</H4>

<P>Declared in <I>wdm.h</I> and <I>ntddk.h</I>. Include <I>wdm.h</I> or <I>ntddk.h</I>.</P>

<H4>Comments</H4>

<P>A driver calls <B>PoSetSystemState</B> to set flags indicating that system activity is occurring. Unlike <A HREF="portn_08aa.htm"><B>PoRegisterSystemState</B></A>, this routine does not allow the driver to set a persistent busy state. </P>

<P>The <I>Flags</I> parameter specifies the type of activity occurring. Drivers can specify any combination of the flags.</P>

<P>Drivers can set the system busy state to request that the system avoid leaving of the working state while driver activity is occurring. Note, however, that under some circumstances (such as a critically low battery) the <A HREF="pwrmgmt_30vb.htm">Power Manager</A> may override this request and put the system to sleep anyway.</P>

<P>Callers of <B>PoSetSystemState </B>must be running at IRQL&nbsp;&lt;= DISPATCH_LEVEL.</P>

<H4>See Also</H4>

<P><A HREF="portn_08aa.htm"><B>PoRegisterSystemState</B></A>, <A HREF="portn_6j1u.htm"><B>PoUnregisterSystemState</B></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: PoSetSystemState"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
