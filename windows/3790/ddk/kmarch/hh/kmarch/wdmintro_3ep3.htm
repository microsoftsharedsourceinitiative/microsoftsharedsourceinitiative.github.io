<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Types of WDM Drivers</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Types of WDM Drivers">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_raw_mode_dg_gly">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Kernel-Mode&nbsp;Driver&nbsp;Architecture:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_types_of_wdm_drivers_kg"></A>Types of WDM Drivers</H1>

<P>There are three kinds of WDM drivers:</P>

<P class=indent1><A HREF="wdmintro_8nfr.htm">Bus drivers</A>, which drive an I/O bus and provide per-slot functionality that is device-independent. </P>

<P class=indent1><A HREF="wdmintro_27fr.htm">Function drivers</A>, which drive an individual device.</P>

<P class=indent1><A HREF="wdmintro_7dpj.htm">Filter drivers</A>, which filter I/O requests for a device, a class of devices, or a bus.</P>

<P>In this context, a <I>bus</I> is any device to which other physical, logical, or virtual devices are attached; a bus includes traditional buses such as SCSI and PCI, as well as parallel ports, serial ports, and i8042 ports.</P>

<P>It is important for driver writers to understand the different kinds of WDM drivers and to know which kind of driver they are writing. For example, whether or not a driver handles each <A HREF="plugplay_15t3.htm">Plug and Play</A> IRP and how to handle such IRPs depends on what kind of driver is being written (bus driver, function driver, or filter driver).</P>



<P><A NAME="ddk_figure_1.4_dg"></A>The following figure shows the relationship between the bus driver, function driver, and filter drivers for a device.</P>

<P><IMG SRC="images/drvlyr.gif" ALT="" BORDER=0></P>

<P><B>Possible Driver Layers</B></P>

<P>Each device typically has a bus driver for the parent I/O bus, a function driver for the device, and zero or more filter drivers for the device. A driver design that requires many filter drivers does not yield optimal performance.</P>

<P>The drivers in the previous figure are the following:

<OL>
	<LI>A <I>bus driver</I> services a bus controller, adapter, or bridge. Bus drivers are required drivers; there is one bus driver for each type of bus on a machine. Microsoft provides bus drivers for most common buses. IHVs and OEMs can provide other bus drivers.</LI>

	<LI>A <I>bus filter driver</I> typically adds value to a bus and is supplied by Microsoft or a system OEM. There can be any number of bus filter drivers for a bus.</LI>

	<LI><I>Lower-level filter drivers</I> typically modify the behavior of device hardware. They are optional and are typically supplied by IHVs. There can be any number of lower-level filter drivers for a device.</LI>

	<LI>A <I>function driver</I> is the main driver for a device. A function driver is typically written by the device vendor and is required (unless the device is being used in <A HREF="JavaScript:hhobj_1.Click()">raw mode</A>).</LI>

	<LI><I>Upper-level filter drivers</I> typically provide added-value features for a device. They are optional and are typically provided by IHVs.</LI>
</OL>

<P>The following sections describe the general types of drivers (bus drivers, function drivers, filter drivers) in detail. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Types%20of%20WDM%20Drivers"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
