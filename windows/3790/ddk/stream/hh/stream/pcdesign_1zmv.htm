<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Installing Windows Multimedia System Support for an Audio Adapter</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Installing Windows Multimedia System Support for an Audio Adapter">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_inf_addreg_directive_dr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_installing_windows_multimedia_system_support_for_an_audio_adapter_ksg"></A>Installing Windows Multimedia System Support for an Audio Adapter</H3>

<P>An INF add-registry section contains the information that the system needs to make a port-class audio adapter accessible to the Windows Multimedia System.</P>

<P>The following example presents the add-registry section, <I>XYZ-Audio-Device.AddReg</I>, that was named in an <A HREF="JavaScript:hhobj_1.Click()">INF <B>AddReg</B> directive</A> in a previous example (see <A HREF="pcdesign_07fr.htm">Installing a Port Class Audio Adapter</A>):</P>

<PRE>  [XYZ-Audio-Device.AddReg]
  HKR,,AssociatedFilters,,"wdmaud,swmidi,redbook"
  HKR,,Driver,,xyzaud.sys 
  HKR,Drivers,SubClasses,,"wave,midi,mixer,aux"

  HKR,Drivers\wave\wdmaud.drv,Driver,,wdmaud.drv
  HKR,Drivers\midi\wdmaud.drv,Driver,,wdmaud.drv
  HKR,Drivers\mixer\wdmaud.drv,Driver,,wdmaud.drv
  HKR,Drivers\aux\wdmaud.drv,Driver,,wdmaud.drv

  HKR,Drivers\wave\wdmaud.drv,Description,,%XYZ-Audio-Device-Description%
  HKR,Drivers\midi\wdmaud.drv,Description,,%XYZ-Audio-Device-Description%
  HKR,Drivers\mixer\wdmaud.drv,Description,,%XYZ-Audio-Device-Description%
  HKR,Drivers\aux\wdmaud.drv,Description,,%XYZ-Audio-Device-Description%</PRE>

<P>The add-registry section adds the registry entries that specify the components that the system needs to load so that the Windows Multimedia System can use the audio adapter. These components include both the adapter driver, <I>xyzaud.sys</I>, and the system drivers WDMAud, SWMidi, and Redbook (see <A HREF="aud-design_1kiv.htm">Kernel-Mode WDM Audio Components</A>).</P>

<P>The <B>AssociatedFilters</B> keyword in the example add-registry section indicates that the directive contains the names of one or more auxiliary driver files whose loading is to be deferred until they are needed by the adapter driver. The alternative is to load the auxiliary files at the same time that the device driver is loaded. For more information, see the description of the <B>NTMPDriver</B> keyword in <A HREF="pcdesign_1ovb.htm">Installing an Audio Adapter Service in Windows 98/Me</A>.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Installing%20Windows%20Multimedia%20System%20Support%20for%20an%20Audio%20Adapter"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
