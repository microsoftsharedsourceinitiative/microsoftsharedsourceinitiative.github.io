<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>DirectShow Filter to Minidriver Communication</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="DirectShow Filter to Minidriver Communication">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H2><A NAME="ddk_directshow_filter_to_minidriver_communication_ksg"></A>DirectShow Filter to Minidriver Communication</H2>

<P>User-mode DirectShow filters interact with video capture minidrivers using Win32 API <B>DeviceIoCtl</B> function calls that are translated by the stream class into stream request blocks (SRB) and are then forwarded to the video capture minidrivers for processing. SRBs are broken down into two categories: those that are used to control the device generally, and those that affect an individual stream. The major SRBs for each category are shown in the following table:</P>

<TABLE>

<TR VALIGN="top">
<TH align=left width=14%>Function</TH>
<TH align=left width=43%>Device</TH>
<TH align=left width=43%>Stream</TH>
</TR>

<TR VALIGN="top">
<TD width=14%>Property<BR>
Write</TD>
<TD width=43%><A HREF="strclass-srbs_1ayb.htm">SRB_SET_DEVICE_PROPERTY</A></TD>
<TD width=43%><A HREF="strclass-srbs_3643.htm">SRB_SET_STREAM_PROPERTY</A></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Property<BR>
Read</TD>
<TD width=43%><A HREF="strclass-srbs_77oz.htm">SRB_GET_DEVICE_PROPERTY</A></TD>
<TD width=43%><A HREF="strclass-srbs_92ur.htm">SRB_GET_STREAM_PROPERTY</A></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Stream<BR>
Write</TD>
<TD width=43%>None</TD>
<TD width=43%><A HREF="strclass-srbs_2bzn.htm">SRB_WRITE_DATA</A></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Stream<BR>
Read</TD>
<TD width=43%>None</TD>
<TD width=43%><A HREF="strclass-srbs_469f.htm">SRB_READ_DATA</A></TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Open<BR>
Stream</TD>
<TD width=43%><A HREF="strclass-srbs_4omr.htm">SRB_OPEN_STREAM</A></TD>
<TD width=43%>None</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Close<BR>
Stream</TD>
<TD width=43%><A HREF="strclass-srbs_8egj.htm">SRB_CLOSE_STREAM</A></TD>
<TD width=43%>None</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Create<BR>
Format</TD>
<TD width=43%><A HREF="strclass-srbs_5hv7.htm">SRB_GET_DATA_INTERSECTION</A></TD>
<TD width=43%>None</TD>
</TR>

<TR VALIGN="top">
<TD width=14%>Change<BR>
Stream<BR>
State</TD>
<TD width=43%>None</TD>
<TD width=43%><A HREF="strclass-srbs_6377.htm">SRB_SET_STREAM_STATE</A></TD>
</TR>
</TABLE><BR>

<P>Of the filters that comprise the “front end” of a capture graph, such as the Video capture filter, TV/radio tuner filter, TV audio filter, and crossbar filter, it is only the capture filter truly participates in kernel streaming. The other filters are used to control device-level property sets in the video capture minidriver itself. Thus, minidrivers that support TV/radio tuning, TV audio, and crossbars do not expose kernel pins for each of their streams. These streams only exist as user-mode constructs for the purpose of creating the graph topology.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: DirectShow%20Filter%20to%20Minidriver%20Communication"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
