<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KS_VIDEO_STREAM_CONFIG_CAPS</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KS_VIDEO_STREAM_CONFIG_CAPS">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ks_video_stream_config_caps_ks"></A>KS_VIDEO_STREAM_CONFIG_CAPS</H1>

<P>The KS_VIDEO_STREAM_CONFIG_CAPS structure describes the configuration and capabilities of a video stream, including analog video standard, scaling and cropping capabilities, minimum and maximum frame rates and minimum and maximum data rates.</P>

<PRE class=syntax>typedef struct  _KS_VIDEO_STREAM_CONFIG_CAPS  {
    GUID        guid;
    ULONG       VideoStandard;
    SIZE        InputSize;
    SIZE        MinCroppingSize;
    SIZE        MaxCroppingSize;
    int         CropGranularityX;
    int         CropGranularityY;
    int         CropAlignX;
    int         CropAlignY;
    SIZE        MinOutputSize;
    SIZE        MaxOutputSize;
    int         OutputGranularityX;
    int         OutputGranularityY;
    int         StretchTapsX;
    int         StretchTapsY;
    int         ShrinkTapsX;
    int         ShrinkTapsY;
    LONGLONG    MinFrameInterval;  
    LONGLONG    MaxFrameInterval;
    LONG        MinBitsPerSecond;
    LONG        MaxBitsPerSecond;
} KS_VIDEO_STREAM_CONFIG_CAPS;</PRE>

<H4>Members</H4>

<DL>
<DT><B>guid</B></DT>

<DD>Specifies the KSDATAFORMAT_SPECIFIER_VIDEOINFO value. This GUID is identical to the DirectShow MEDIATYPE_Video value.</DD>

<DT><B>VideoStandard</B></DT>

<DD>Specifies the analog video standards supported by the stream. This member may be set to one or more (logically ORed) KS_AnalogVideoStandard enumeration values that are defined in <I>ksmedia.h:</I>

<DL>
<DT>KS_AnalogVideo_None</DT>

<DT>KS_AnalogVideo_NTSC_M</DT>

<DT>KS_AnalogVideo_NTSC_M_J</DT>

<DT>KS_AnalogVideo_NTSC_433</DT>

<DT>KS_AnalogVideo_PAL_B</DT>

<DT>KS_AnalogVideo_PAL_D</DT>

<DT>KS_AnalogVideo_PAL_G</DT>

<DT>KS_AnalogVideo_PAL_H</DT>

<DT>KS_AnalogVideo_PAL_I</DT>

<DT>KS_AnalogVideo_PAL_M</DT>

<DT>KS_AnalogVideo_PAL_N</DT>

<DT>KS_AnalogVideo_PAL_60</DT>

<DT>KS_AnalogVideo_PAL_N_COMBO</DT>

<DT>KS_AnalogVideo_SECAM_B</DT>

<DT>KS_AnalogVideo_SECAM_D</DT>

<DT>KS_AnalogVideo_SECAM_G</DT>

<DT>KS_AnalogVideo_SECAM_H</DT>

<DT>KS_AnalogVideo_SECAM_K</DT>

<DT>KS_AnalogVideo_SECAM_K1</DT>

<DT>KS_AnalogVideo_SECAM_L</DT>

<DT>KS_AnalogVideo_SECAM_L1</DT>
</DL>
</DD>

<DT><B>InputSize</B></DT>

<DD>Specifies the size of the incoming signal. <B>InputSize</B> indicates the image rectangle's width and height in pixels. This is the largest signal the filter can digitize with each pixel remaining unique. </DD>

<DT><B>MinCroppingSize</B></DT>

<DD>Specifies the smallest cropping rectangle allowed, as specified in the <B>rcSource</B> member of the <A HREF="vidcapref_9y9f.htm">KS_VIDEOINFOHEADER</A> structure associated with the DataRange. </DD>

<DT><B>MaxCroppingSize</B></DT>

<DD>Specifies the largest cropping rectangle allowed, as specified in the <B>rcSource</B> member of the KS_VIDEOINFOHEADER structure associated with the DataRange. </DD>

<DT><B>CropGranularityX</B></DT>

<DD>Specifies the horizontal granularity of the cropping size. For example, valid widths could be specified as even multiples of four. </DD>

<DT><B>CropGranularityY</B></DT>

<DD>Specifies the vertical granularity of cropping size. For example, valid heights could be specified as even multiples of four. </DD>

<DT><B>CropAlignX</B></DT>

<DD>Specifies the horizontal alignment of the cropping rectangle inside <B>InputSize</B>. For example, the minidriver could specify that valid rectangles must start on a boundary that is a multiple of four. </DD>

<DT><B>CropAlignY</B></DT>

<DD>Specifies the vertical alignment of the cropping rectangle inside <B>InputSize</B>. For example, the minidriver could specify that valid rectangles must start on a boundary that is a multiple of four.</DD>

<DT><B>MinOutputSize</B></DT>

<DD>Specifies the smallest bitmap this pin can produce.</DD>

<DT><B>MaxOutputSize</B></DT>

<DD>Specifies the largest bitmap this pin can produce.</DD>

<DT><B>OutputGranularityX</B></DT>

<DD>Specifies the granularity of the output bitmap width.</DD>

<DT><B>OutputGranularityY</B></DT>

<DD>Specifies the granularity of the output bitmap height.</DD>

<DT><B>StretchTapsX</B></DT>

<DD>Specifies a value indicating how well the filter can stretch the image's width. A value of 0 means the filter cannot stretch. A value of 1 indicates the filter uses pixel doubling, a value 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a higher-order (smoother) form of interpolation. </DD>

<DT><B>StretchTapsY</B></DT>

<DD>Specifies a value indicating how well the filter can stretch the image's height. A value of 0 means the filter cannot stretch. A value of 1 indicates the filter uses pixel doubling, a value of 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation.</DD>

<DT><B>ShrinkTapsX</B></DT>

<DD>Specifies a value indicating how well the filter can shrink the image's width. A value of 0 indicates that the filter cannot shrink. A value of 1 indicates the filter eliminates some rows of pixels to achieve shrinking, a value of 2 indicates the filter uses interpolation (2 taps), and a value of 3 or higher indicates the filter implements a better form of interpolation. </DD>

<DT><B>ShrinkTapsY</B></DT>

<DD>Specifies a value indicating how well the filter can shrink the image's height. A value of 0 indicates the filter cannot shrink. A value of 1 indicates that the filter eliminates some rows of pixels to achieve shrinking, a value of 2 indicates that the filter uses interpolation (2 taps), and a value of 3 or higher indicates that the filter implements a better form of interpolation. </DD>

<DT><B>MinFrameInterval</B></DT>

<DD>Specifies the minimum frame rate allowed. This value applies to capture filters only.</DD>

<DT><B>MaxFrameInterval</B></DT>

<DD>Specifies the maximum frame rate allowed. This value applies to capture filters only.</DD>

<DT><B>MinBitsPerSecond</B></DT>

<DD>Specifies the minimum data rate this pin can produce.</DD>

<DT><B>MaxBitsPerSecond</B></DT>

<DD>Specifies the maximum data rate this pin can produce.
</DD>
</DL>

<H4>Headers</H4>

<P>Declared in <I>ksmedia.h</I>. Include <I>ksmedia.h</I>.</P>

<H4>Comments</H4>

<P>The KS_VIDEO_STREAM_CONFIG_CAPS structure is identical to the DirectShow VIDEO_STREAM_CONFIG_CAPS structure.</P>

<P>It is important to understand the relationships between the members of this structure. For example, assume the following values for some of the structure members: </P>

<P><B>MinCroppingSize</B> = (160, 120) </P>

<P><B>MaxCroppingSize</B> = (320, 240) </P>

<P><B>CropGranularityX</B> = 4 </P>

<P><B>CropGranularityY</B> = 8 </P>

<P>These values indicate that valid cropping sizes begin at <B>MinCroppingSize</B> and increase in steps in the x-direction by<B> CropGranularityX</B> and in the y-direction by <B>CropGranularityY</B>. In this case the x-value can be anywhere from 160 to 320 pixels in steps of 4 and the y-value can be anywhere from 120 to 240 pixels in steps of 8. </P>

<P>In this scenario a few of the valid sizes are: 

<UL>
	<LI>160 x 120, 164 x 120, 168 x 120, 172 x 120, and so on. </LI>

	<LI>160 x 128, 164 x 128, 168 x 128, 172 x 128, and so on. </LI>

	<LI>160 x 136, 164 x 136, 168 x 136, 172 x 136, and so on. </LI>
</UL>

<P><B>CropAlignX</B> and <B>CropAlignY</B> indicate where the cropping rectangle can be inside the input size rectangle. Given a 160 x 120 cropping rectangle and the following: </P>

<P class=indent1><B>CropAlignX</B> = 2 </P>

<P class=indent1><B>CropAlignY</B> = 4 </P>

<P>some of the valid values for the <B>rcSource</B> member of the <A HREF="vidcapref_9y9f.htm">KS_VIDEOINFOHEADER</A> structure would be: 

<UL>
	<LI>(0, 0, 160, 120) </LI>

	<LI>(2, 0, 162, 120) </LI>

	<LI>(2, 4, 162, 124) </LI>

	<LI>(2, 8, 162, 128) </LI>
</UL>

<P>For a 320 x 240 cropping rectangle and the same cropping alignment values, (2, 4, 322, 244) is one example of the many valid rectangles. </P>

<P>The structure members discussed above work together to specify which values of <B>rcSource</B> are valid for the <A HREF="vidcapref_9y9f.htm">KS_VIDEOINFOHEADER</A> structure that describes the output pin's media type. The remaining structure members - <B>MinOutputSize</B>, <B>MaxOutputSize</B>, <B>OutputGranularityX</B>, and <B>OutputGranularityY</B> - describe the <B>biWidth</B> and <B>biHeight</B> members of the <A HREF="vidcapref_2l2r.htm">KS_BITMAPINFOHEADER</A> structure contained in the pin's media type KS_VIDEOINFOHEADER structure. </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KS_VIDEO_STREAM_CONFIG_CAPS"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
