<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>AVStream Architecture: Basic Concepts</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="AVStream Concepts">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_avstream_concepts_ksg"></A>AVStream Architecture: Basic Concepts</H1>

<P>AVStream is a Microsoft-provided multimedia class driver that supports video-only streaming and integrated audio/video streaming. Microsoft provides AVStream as a part of the operating system, in the export driver <I>ks.sys</I>. Vendors write minidrivers that run under this class driver model.</P>

<P>The preferred driver model for audio-only drivers is the Microsoft-provided audio <A HREF="pcdesign_9y1z.htm">port-class</A> driver. Audio vendors write minidrivers under this class driver model.</P>

<P>Microsoft supports the <A HREF="strmini-design_3d0n.htm">stream class</A> driver only for existing minidrivers.  </P>

<P>AVStream drivers build on Microsoft® Windows® XP, Windows Server 2003, or any platform Windows 98 Gold or later that has DirectX® 8.0 or later installed.</P>

<P>If you build on an operating system earlier than Windows XP, be sure to do so from the latest available DirectX DDK. DirectX 9.0 contains updates for AVStream, kernel streaming components, and stream class.</P>

<P></P>

<P>AVStream offers significant advantages to the vendor by:

<UL>
	<LI>Requiring that minidriver writer produce less code.</LI>

	<LI>Providing a unified kernel streaming class model for both audio and video minidrivers.</LI>

	<LI>Providing support for vendors to use COM objects to plug in new interfaces without altering existing minidriver binaries.</LI>
</UL>

<P>In the AVStream model, vendors provide a minidriver that interacts with a Microsoft-provided class driver, as shown in the following diagram:</P>

<P><IMG SRC="images/avstream.gif" ALT="" BORDER=0></P>

<P><B>Relationship Between AVStream and KS Services</B></P>

<P>This section contains the following information:</P>

<P class=indent1><A HREF="avconcep_2fmv.htm">AVStream Object Hierarchy</A></P>

<P class=indent1><A HREF="avconcep_68pz.htm">Object Bags</A> </P>

<P class=indent1><A HREF="avconcep_4rzb.htm">Flow Control Gates in AVStream</A></P>

<P class=indent1><A HREF="avconcep_1ns7.htm">AVStream Allocators</A></P>

<P class=indent1><A HREF="avconcep_9smf.htm">AVStream Pipes and Circuits</A></P>

<P class=indent1><A HREF="avconcep_3t7r.htm">Frame Injection</A> </P>

<P class=indent1><A HREF="avconcep_9msn.htm">AVStream Splitters</A> </P>

<P class=indent1><A HREF="avconcep_1wvb.htm">Data Range Intersections in AVStream</A> </P>

<P class=indent1><A HREF="avconcep_5qg7.htm">Using AVStream with the Kernel Streaming Proxy Module</A> </P>

<P class=indent1><A HREF="avconcep_9v3b.htm">Mutexes in AVStream</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: AVStream%20Architecture:%20Basic%20Concepts"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
