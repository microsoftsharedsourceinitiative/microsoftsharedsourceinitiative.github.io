<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>KsDiscard</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="KsDiscard">
</HEAD>
<BODY TOPMARGIN="0">
<DIV STYLE="display:none;">
<OBJECT ID="hhobj_1" TYPE="application/x-oleobject" CLASSID="clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11">
	<PARAM NAME="Command" VALUE="ALink,MENU">
	<PARAM NAME="DefaultTopic" VALUE="../notopic_0pk4.htm">
	<PARAM NAME="Item1" VALUE="">
	<PARAM NAME="Item2" VALUE="ddk_exfreepool_kr">
</OBJECT>
</DIV>


<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_ksdiscard_ks"></A>KsDiscard</H1>

<P>The<B> KsDiscard </B>macro removes a given item from an object bag.</P>

<PRE class=syntax><B>ULONG
  KsDiscard(
</B>    <B>IN KSxxx</B>  <I>Object</I>,
    <B>IN PVOID</B>  <I>Pointer</I>
<B>    );</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>Object</I></DT>

<DD>The item pointed to by <I>Pointer</I> is removed from the object bag associated with this object. Can be of type <A HREF="avstruct_9qcz.htm">KSDEVICE</A>, <A HREF="avstruct_1bn7.htm">KSFILTERFACTORY</A>, <A HREF="avstruct_1yk3.htm">KSFILTER</A>, or <A HREF="avstruct_5s4z.htm">KSPIN</A>.</DD>

<DT><I>Pointer</I></DT>

<DD>Pointer to the item to be removed from the requested object’s bag.
</DD>
</DL>

<H4>Return Value</H4>

<P>Returns the number of references on <I>Item</I>. A return value of zero indicates that the item pointed to by <I>Pointer</I> was not in the object bag of <I>Object</I> at call-time.</P>

<P>A return value of one indicates that the item was successfully removed from the object bag and that it was not in any other object bag. AVStream frees the item using either <A HREF="JavaScript:hhobj_1.Click()"><B>ExFreePool</B></A> or the <I>Free</I> method specified at <A HREF="avfunc_4zoz.htm"><B>KsAddItemToObjectBag</B></A> call-time.</P>

<P>A return value greater than one indicates that the item is present in another object bag and that there are still references on it. In this case, AVStream removed the item from the object bag but did not free it.</P>

<H4>Headers</H4>

<P>Declared in <I>ks.h</I>. Include <I>ks.h</I>.</P>

<H4>Comments</H4>

<P>This function is available in Windows&nbsp;XP and DirectX&nbsp;8.0 and later. It is implemented as a C-style preprocessing macro in the <I>ks.h</I> header.</P>

<P><B>KsDiscard</B> calls <A HREF="avfunc_1jn7.htm"><B>KsRemoveItemFromObjectBag</B></A>, passing the object bag associated with <I>Object</I> (<I>Object -&gt; Bag</I>), the item specified by <I>Pointer</I>, and TRUE for the <I>Free</I> parameter.</P>

<P><B>KsDiscard</B> must be called at IRQL = PASSIVE_LEVEL.</P>

<H4>See Also</H4>

<P><A HREF="avfunc_1jn7.htm"><B>KsRemoveItemFromObjectBag</B></A>, <A HREF="avstruct_9qcz.htm">KSDEVICE</A>, <A HREF="avstruct_1bn7.htm">KSFILTERFACTORY</A>, <A HREF="avstruct_1yk3.htm">KSFILTER</A>, <A HREF="avstruct_5s4z.htm">KSPIN</A></P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: KsDiscard"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
