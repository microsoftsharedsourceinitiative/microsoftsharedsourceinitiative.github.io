<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>Avoiding Data Copying</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="Avoiding Data Copying">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Streaming&nbsp;Devices&nbsp;(Video&nbsp;and&nbsp;Audio):&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H3><A NAME="ddk_avoiding_data_copying_ksg"></A>Avoiding Data Copying</H3>

<P>You can improve driver performance by designing your audio hardware to avoid unnecessary data copying.</P>

<P>You can achieve the best results by implementing your hardware to perform true scatter/gather DMA and by writing a WavePci miniport driver to manage the hardware. Your device can then directly access playback data buffers or empty record buffers wherever they are located in system memory. This eliminates a lot of unnecessary software intervention and time-consuming data copying.</P>

<P>If you are designing a WaveCyclic device, however, you can improve its performance by making its hardware buffer directly accessible as system memory. This eliminates the overhead of copying data from an intermediate buffer in system memory.</P>

<P>Also, if your device requires an audio format with a channel ordering that is incompatible with the standard WDM audio formats, the driver might have to perform in-place conversion of each audio frame in an intermediate buffer before the hardware can process it. This can degrade performance. For additional information, see the white paper entitled <I>Multiple Channel Audio Data and WAVE Files</I> at the <a href="http://go.microsoft.com/fwlink/?linkid=8751&clcid=0x409" target="_blank">audio technology</A> Web site.</P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: Avoiding%20Data%20Copying"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
