<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML DIR="LTR"><HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1252">
<TITLE>BatteryClassInitializeDevice</TITLE>
<SCRIPT SRC="../scripts/linkcss.js"></SCRIPT><SCRIPT SRC="../scripts/langref.js"></SCRIPT><META NAME="MS-HKWD" CONTENT="BatteryClassInitializeDevice">
</HEAD>
<BODY TOPMARGIN="0">

<TABLE CLASS="buttonbarshade" CELLSPACING=0><TR><TD>&nbsp;</TD></TR></TABLE>
<TABLE CLASS="buttonbartable" CELLSPACING=0>
<TR ID="hdr"><TD CLASS="runninghead" NOWRAP>Battery&nbsp;Devices:&nbsp;Windows&nbsp;DDK</TD></TR>
</TABLE>
<H1><A NAME="ddk_batteryclassinitializedevice_dr"></A>BatteryClassInitializeDevice</H1>

<P><B>BatteryClassInitializeDevice</B> initializes a new battery device for the class driver.</P>

<PRE class=syntax><B>NTSTATUS
</B>  <B>BatteryClassInitializeDevice(</B>
    <B>IN</B> <B>PBATTERY_MINIPORT_INFO</B>  <I>MiniportInfo</I><B>,</B>
    <B>IN</B> <B>PVOID </B> <I>*ClassData</I>
    <B>);</B></PRE>

<H4>Parameters</H4>

<DL>
<DT><I>MiniportInfo</I></DT>

<DD>Pointer to a <A HREF="bat-struct_6sfm.htm">BATTERY_MINIPORT_INFO</A> structure.</DD>

<DT><I>ClassData</I></DT>

<DD>Pointer to a location at which <B>BatteryClassInitializeDevice</B> returns a handle to be used in subsequent calls to <B>BatteryClass<I>Xxx</I></B> routines. 
</DD>
</DL>

<H4>Return Value</H4>

<P><B>BatteryClassInitializeDevice</B> returns STATUS_SUCCESS or, possibly, STATUS_INSUFFICIENT_RESOURCES if not enough memory is available to store the battery miniclass data.</P>

<H4>Headers</H4>

<P>Declared in <I>batclass.h</I>. Include <I>batclass.h</I>.</P>

<H4>Comments</H4>

<P>Battery miniclass drivers must call <B>BatteryClassInitializeDevice</B> to register each battery device and to pass data about the device and the miniclass driver to the battery class driver. </P>

<P>This routine should be called as part of the device initialization, typically from the miniclass driver's <I>AddDevice</I> routine. </P>

<P>The <B>Context</B> member of the BATTERY_MINIPORT_INFO structure points to an area where the class and miniclass drivers maintain information about the battery device and its drivers. The context area typically contains the pageable device extension from the FDO and can also include other information at the discretion of the driver writer. </P>

<P>The class driver passes a pointer to the context area in calls to <A HREF="bat-mini_7b76.htm">battery miniclass driver routines</A> (<I>BatteryMiniXxx</I> routines). In their <I>BatteryMiniXxx</I> routines, miniclass drivers should read and write the device extension data through the passed-in pointer. </P>

<P>Miniclass drivers must use the <A HREF="bat-struct_6sfm.htm">BATTERY_MINIPORT_INFO</A> structure to supply entry points for all the <I>BatteryMiniXxx</I> routines. </P>

<H4>See Also</H4>

<P><A HREF="bat-mini_9d2q.htm"><I>BatteryMiniDisableStatusNotify</I></A>, <A HREF="bat-mini_1o1e.htm"><I>BatteryMiniQueryInformation</I></A>, <A HREF="bat-mini_65bm.htm"><I>BatteryMiniQueryStatus</I></A>, <A HREF="bat-mini_2bjm.htm"><I>BatteryMiniQueryTag</I></A>, <A HREF="bat-mini_9ipe.htm"><I>BatteryMiniSetInformation</I></A>, <A HREF="bat-mini_5n1u.htm"><I>BatteryMiniSetStatusNotify</I></A> </P>
<DIV CLASS="footer"><A HREF="mailto:ddksurv1@microsoft.com?subject=DDK Topic Feedback&body=Build date: Thursday, January 16, 2003     Topic Title: BatteryClassInitializeDevice"> Send feedback on this topic.</A> / Built on Thursday, January 16, 2003 </DIV>
</BODY>
</HTML>
